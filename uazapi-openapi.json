{"openapi":"3.1.0","info":{"title":"uazapiGO -  WhatsApp API (v2.0)","version":"1.0.0","description":"API para gerenciamento de inst√¢ncias do WhatsApp e comunica√ß√µes.\n\n## ‚ö†Ô∏è Recomenda√ß√£o Importante: WhatsApp Business\n**√â ALTAMENTE RECOMENDADO usar contas do WhatsApp Business** em vez do WhatsApp normal para integra√ß√£o, o WhatsApp normal pode apresentar inconsist√™ncias, desconex√µes, limita√ß√µes e instabilidades durante o uso com a nossa API.\n\n## Autentica√ß√£o\n- Endpoints regulares requerem um header 'token' com o token da inst√¢ncia\n- Endpoints administrativos requerem um header 'admintoken'\n\n## Estados da Inst√¢ncia\nAs inst√¢ncias podem estar nos seguintes estados:\n- `disconnected`: Desconectado do WhatsApp\n- `connecting`: Em processo de conex√£o\n- `connected`: Conectado e autenticado com sucesso\n\n## Limites de Uso\n- O servidor possui um limite m√°ximo de inst√¢ncias conectadas\n- Quando o limite √© atingido, novas tentativas receber√£o erro 429\n- Servidores gratuitos/demo podem ter restri√ß√µes adicionais de tempo de vida\n"},"servers":[{"url":"https://{subdomain}.uazapi.com","description":"Servidor da API uazapiGO","variables":{"subdomain":{"enum":["free","api"],"default":"free"}}}],"components":{"securitySchemes":{"token":{"name":"token","type":"apiKey","in":"header"},"admintoken":{"name":"admintoken","type":"apiKey","in":"header","description":"Token de administrador para endpoints administrativos"}},"schemas":{"Instance":{"type":"object","description":"Representa uma inst√¢ncia do WhatsApp","properties":{"id":{"type":"string","format":"uuid","description":"ID √∫nico gerado automaticamente"},"token":{"type":"string","description":"Token de autentica√ß√£o da inst√¢ncia"},"status":{"type":"string","description":"Status atual da conex√£o"},"paircode":{"type":"string","description":"C√≥digo de pareamento"},"qrcode":{"type":"string","description":"QR Code em base64 para autentica√ß√£o"},"name":{"type":"string","description":"Nome da inst√¢ncia"},"profileName":{"type":"string","description":"Nome do perfil WhatsApp"},"profilePicUrl":{"type":"string","format":"uri","description":"URL da foto do perfil"},"isBusiness":{"type":"boolean","description":"Indica se √© uma conta business"},"plataform":{"type":"string","description":"Plataforma de origem (iOS/Android/Web)"},"systemName":{"type":"string","description":"Nome do sistema operacional"},"owner":{"type":"string","description":"Propriet√°rio da inst√¢ncia"},"current_presence":{"type":"string","description":"Status atual de presen√ßa da inst√¢ncia (campo n√£o persistido)","enum":["available","unavailable"],"example":"available"},"lastDisconnect":{"type":"string","format":"date-time","description":"Data/hora da √∫ltima desconex√£o"},"lastDisconnectReason":{"type":"string","description":"Motivo da √∫ltima desconex√£o"},"adminField01":{"type":"string","description":"Campo administrativo 01"},"adminField02":{"type":"string","description":"Campo administrativo 02"},"openai_apikey":{"type":"string","description":"Chave da API OpenAI"},"chatbot_enabled":{"type":"boolean","description":"Habilitar chatbot autom√°tico"},"chatbot_ignoreGroups":{"type":"boolean","description":"Ignorar mensagens de grupos"},"chatbot_stopConversation":{"type":"string","description":"Palavra-chave para parar conversa"},"chatbot_stopMinutes":{"type":"integer","description":"Por quanto tempo ficar√° pausado o chatbot ao usar stop conversation"},"chatbot_stopWhenYouSendMsg":{"type":"integer","description":"Por quanto tempo ficar√° pausada a conversa quando voc√™ enviar mensagem manualmente"},"fieldsMap":{"type":"object","description":"Mapa de campos customizados da inst√¢ncia (quando presente)","additionalProperties":true},"currentTime":{"type":"string","description":"Hor√°rio atual retornado pelo backend"},"created":{"type":"string","format":"date-time","description":"Data de cria√ß√£o da inst√¢ncia"},"updated":{"type":"string","format":"date-time","description":"Data da √∫ltima atualiza√ß√£o"}},"example":{"id":"i91011ijkl","token":"abc123xyz","status":"connected","paircode":"1234-5678","qrcode":"data:image/png;base64,iVBORw0KGg...","name":"Inst√¢ncia Principal","profileName":"Loja ABC","profilePicUrl":"https://example.com/profile.jpg","isBusiness":true,"plataform":"Android","systemName":"uazapi","owner":"user@example.com","lastDisconnect":"2025-01-24T14:00:00Z","lastDisconnectReason":"Network error","adminField01":"custom_data","openai_apikey":"sk-...xyz","chatbot_enabled":true,"chatbot_ignoreGroups":true,"chatbot_stopConversation":"parar","chatbot_stopMinutes":60,"created":"2025-01-24T14:00:00Z","updated":"2025-01-24T14:30:00Z","currentPresence":"available"}},"Webhook":{"type":"object","description":"Configura√ß√£o completa de webhook com filtros e op√ß√µes avan√ßadas","properties":{"id":{"type":"string","format":"uuid","description":"ID √∫nico gerado automaticamente"},"enabled":{"type":"boolean","description":"Webhook ativo/inativo","default":false},"url":{"type":"string","format":"uri","description":"URL de destino dos eventos"},"events":{"type":"array","items":{"type":"string","enum":["connection","history","messages","messages_update","call","contacts","presence","groups","labels","chats","chat_labels","blocks","leads"]},"description":"Tipos de eventos monitorados"},"addUrlTypesMessages":{"type":"boolean","description":"Incluir na URLs o tipo de mensagem","default":false},"addUrlEvents":{"type":"boolean","description":"Incluir na URL o nome do evento","default":false},"excludeMessages":{"type":"array","items":{"type":"string","enum":["wasSentByApi","wasNotSentByApi","fromMeYes","fromMeNo","isGroupYes","isGroupNo","IsGroupNo"]},"description":"Filtros para excluir tipos de mensagens"}},"required":["url","events"],"example":{"id":"wh_9a8b7c6d5e","enabled":true,"url":"https://webhook.cool/example","events":["messages","connection"],"addUrlTypesMessages":false,"addUrlEvents":false,"excludeMessages":[]}},"Chat":{"type":"object","description":"Representa uma conversa/chamado no sistema","properties":{"id":{"type":"string","description":"ID √∫nico da conversa (r + 7 bytes aleat√≥rios em hex)"},"wa_fastid":{"type":"string","description":"Identificador r√°pido do WhatsApp"},"wa_chatid":{"type":"string","description":"ID completo do chat no WhatsApp"},"wa_chatlid":{"type":"string","description":"LID do chat no WhatsApp (quando dispon√≠vel)"},"wa_archived":{"type":"boolean","description":"Indica se o chat est√° arquivado","default":false},"wa_contactName":{"type":"string","description":"Nome do contato no WhatsApp","default":""},"wa_name":{"type":"string","description":"Nome do WhatsApp","default":""},"name":{"type":"string","description":"Nome exibido do chat","default":""},"image":{"type":"string","description":"URL da imagem do chat","default":""},"imagePreview":{"type":"string","description":"URL da miniatura da imagem","default":""},"wa_ephemeralExpiration":{"type":"integer","format":"int64","description":"Tempo de expira√ß√£o de mensagens ef√™meras","default":0},"wa_isBlocked":{"type":"boolean","description":"Indica se o contato est√° bloqueado","default":false},"wa_isGroup":{"type":"boolean","description":"Indica se √© um grupo","default":false},"wa_isGroup_admin":{"type":"boolean","description":"Indica se o usu√°rio √© admin do grupo","default":false},"wa_isGroup_announce":{"type":"boolean","description":"Indica se √© um grupo somente an√∫ncios","default":false},"wa_isGroup_community":{"type":"boolean","description":"Indica se √© uma comunidade","default":false},"wa_isGroup_member":{"type":"boolean","description":"Indica se √© membro do grupo","default":false},"wa_isPinned":{"type":"boolean","description":"Indica se o chat est√° fixado","default":false},"wa_label":{"type":"array","description":"Labels do chat","items":{"type":"string"}},"wa_lastMessageTextVote":{"type":"string","description":"Texto/voto da √∫ltima mensagem","default":""},"wa_lastMessageType":{"type":"string","description":"Tipo da √∫ltima mensagem","default":""},"wa_lastMsgTimestamp":{"type":"integer","format":"int64","description":"Timestamp da √∫ltima mensagem","default":0},"wa_lastMessageSender":{"type":"string","description":"Remetente da √∫ltima mensagem","default":""},"wa_muteEndTime":{"type":"integer","format":"int64","description":"Timestamp do fim do silenciamento","default":0},"owner":{"type":"string","description":"Dono da inst√¢ncia","default":""},"wa_unreadCount":{"type":"integer","format":"int64","description":"Contador de mensagens n√£o lidas","default":0},"phone":{"type":"string","description":"N√∫mero de telefone","default":""},"common_groups":{"type":"string","description":"Grupos em comum separados por v√≠rgula, formato: (nome_grupo)id_grupo","default":"","example":"Grupo Fam√≠lia(120363123456789012@g.us),Trabalho(987654321098765432@g.us)"},"lead_name":{"type":"string","description":"Nome do lead","default":""},"lead_fullName":{"type":"string","description":"Nome completo do lead","default":""},"lead_email":{"type":"string","description":"Email do lead","default":""},"lead_personalid":{"type":"string","description":"Documento de identifica√ß√£o","default":""},"lead_status":{"type":"string","description":"Status do lead","default":""},"lead_tags":{"type":"array","description":"Tags do lead","items":{"type":"string"}},"lead_notes":{"type":"string","description":"Anota√ß√µes sobre o lead","default":""},"lead_isTicketOpen":{"type":"boolean","description":"Indica se tem ticket aberto","default":false},"lead_assignedAttendant_id":{"type":"string","description":"ID do atendente respons√°vel","default":""},"lead_kanbanOrder":{"type":"integer","format":"int64","description":"Ordem no kanban","default":0},"lead_field01":{"type":"string","default":""},"lead_field02":{"type":"string","default":""},"lead_field03":{"type":"string","default":""},"lead_field04":{"type":"string","default":""},"lead_field05":{"type":"string","default":""},"lead_field06":{"type":"string","default":""},"lead_field07":{"type":"string","default":""},"lead_field08":{"type":"string","default":""},"lead_field09":{"type":"string","default":""},"lead_field10":{"type":"string","default":""},"lead_field11":{"type":"string","default":""},"lead_field12":{"type":"string","default":""},"lead_field13":{"type":"string","default":""},"lead_field14":{"type":"string","default":""},"lead_field15":{"type":"string","default":""},"lead_field16":{"type":"string","default":""},"lead_field17":{"type":"string","default":""},"lead_field18":{"type":"string","default":""},"lead_field19":{"type":"string","default":""},"lead_field20":{"type":"string","default":""},"chatbot_agentResetMemoryAt":{"type":"integer","format":"int64","description":"Timestamp do √∫ltimo reset de mem√≥ria","default":0},"chatbot_lastTrigger_id":{"type":"string","description":"ID do √∫ltimo gatilho executado","default":""},"chatbot_lastTriggerAt":{"type":"integer","format":"int64","description":"Timestamp do √∫ltimo gatilho","default":0},"chatbot_disableUntil":{"type":"integer","format":"int64","description":"Timestamp at√© quando chatbot est√° desativado","default":0}}},"Message":{"type":"object","description":"Representa uma mensagem trocada no sistema","properties":{"id":{"type":"string","format":"uuid","description":"ID √∫nico interno da mensagem (formato r + 7 caracteres hex aleat√≥rios)"},"messageid":{"type":"string","description":"ID original da mensagem no provedor"},"chatid":{"type":"string","description":"ID da conversa relacionada"},"sender":{"type":"string","description":"ID do remetente da mensagem"},"senderName":{"type":"string","description":"Nome exibido do remetente"},"isGroup":{"type":"boolean","description":"Indica se √© uma mensagem de grupo","default":false},"fromMe":{"type":"boolean","description":"Indica se a mensagem foi enviada pelo usu√°rio","default":false},"messageType":{"type":"string","description":"Tipo de conte√∫do da mensagem"},"source":{"type":"string","description":"Plataforma de origem da mensagem"},"messageTimestamp":{"type":"integer","description":"Timestamp original da mensagem em milissegundos","default":0},"status":{"type":"string","description":"Status do ciclo de vida da mensagem"},"text":{"type":"string","description":"Texto original da mensagem","default":""},"quoted":{"type":"string","description":"ID da mensagem citada/respondida","default":""},"edited":{"type":"string","description":"Hist√≥rico de edi√ß√µes da mensagem","default":""},"reaction":{"type":"string","description":"ID da mensagem reagida","default":""},"vote":{"type":"string","description":"Dados de vota√ß√£o de enquete e listas","default":""},"convertOptions":{"type":"string","description":"Convers√£o de op√ß√µes da mensagem, lista, enquete e bot√µes","default":""},"buttonOrListid":{"type":"string","description":"ID do bot√£o ou item de lista selecionado","default":""},"owner":{"type":"string","description":"Dono da mensagem","default":""},"error":{"type":"string","description":"Mensagem de erro caso o envio tenha falhado","default":""},"content":{"description":"Conte√∫do bruto da mensagem (JSON serializado ou texto)","oneOf":[{"type":"object","additionalProperties":true},{"type":"string","description":"Texto bruto quando n√£o for JSON"}]},"wasSentByApi":{"type":"boolean","description":"Indica se a mensagem foi enviada via API"},"sendFunction":{"type":"string","description":"Fun√ß√£o usada para enviar a mensagem (quando enviada via API)"},"sendPayload":{"description":"Payload enviado (texto/JSON serializado)","oneOf":[{"type":"object","additionalProperties":true},{"type":"string","description":"Texto bruto quando n√£o for JSON"}]},"fileURL":{"type":"string","description":"URL ou refer√™ncia de arquivo da mensagem"},"send_folder_id":{"type":"string","description":"Pasta associada ao envio (quando aplic√°vel)"},"track_source":{"type":"string","description":"Origem de rastreamento"},"track_id":{"type":"string","description":"ID de rastreamento (pode repetir)"},"ai_metadata":{"type":"object","description":"Metadados do processamento por IA","properties":{"agent_id":{"type":"string","description":"ID do agente de IA respons√°vel"},"request":{"type":"object","description":"Dados da requisi√ß√£o √† API de IA","properties":{"messages":{"type":"array","description":"Hist√≥rico de mensagens enviadas para a API"},"tools":{"type":"array","description":"Ferramentas dispon√≠veis para o agente"},"options":{"type":"object","description":"Op√ß√µes de configura√ß√£o da API","properties":{"model":{"type":"string"},"temperature":{"type":"number"},"maxTokens":{"type":"integer"},"topP":{"type":"number"},"frequencyPenalty":{"type":"number"},"presencePenalty":{"type":"number"}}}}},"response":{"type":"object","description":"Resposta da API de IA","properties":{"choices":{"type":"array","description":"Resultados retornados pela API"},"toolResults":{"type":"array","description":"Resultados da execu√ß√£o de ferramentas"},"error":{"type":"string","description":"Mensagem de erro, se houver"}}}}},"sender_pn":{"type":"string","description":"JID PN resolvido do remetente (quando dispon√≠vel)"},"sender_lid":{"type":"string","description":"LID original do remetente (quando dispon√≠vel)"}}},"Label":{"type":"object","description":"Representa uma etiqueta/categoria no sistema","properties":{"id":{"type":"string","format":"uuid","description":"ID √∫nico da etiqueta"},"name":{"type":"string","description":"Nome da etiqueta"},"color":{"type":"integer","description":"√çndice num√©rico da cor (0-19)","minimum":0,"maximum":19,"example":2},"colorHex":{"type":"string","description":"Cor hexadecimal correspondente ao √≠ndice","enum":["#ff9484","#64c4ff","#fed428","#dfaef0","#9ab6c1","#56ccb4","#fe9dfe","#d3a91f","#6f7bcf","#d8e651","#01d0e2","#ffc5c7","#92ceac","#f64847","#00a1f2","#83e421","#ffae04","#b4ebff","#9ba6ff","#9568cf"],"example":"#fed428"},"labelid":{"type":"string","description":"ID da label no WhatsApp (quando sincronizada)"},"owner":{"type":"string","description":"Dono da etiqueta"},"created":{"type":"string","format":"date-time","description":"Data de cria√ß√£o"},"updated":{"type":"string","format":"date-time","description":"Data da √∫ltima atualiza√ß√£o"}},"example":{"id":"l121314mnop","name":"Cliente VIP","color":2,"colorHex":"#fed428","created":"2025-01-24T14:35:00.000Z","updated":"2025-01-24T15:00:00.000Z"}},"Attendant":{"type":"object","description":"Modelo de atendente do sistema","properties":{"id":{"type":"string","format":"uuid","description":"ID √∫nico gerado automaticamente"},"name":{"type":"string","description":"Nome do atendente","default":""},"phone":{"type":"string","description":"N√∫mero de telefone","default":""},"email":{"type":"string","format":"email","description":"Endere√ßo de e-mail","default":""},"department":{"type":"string","description":"Departamento de atua√ß√£o","default":""},"customField01":{"type":"string","description":"Campo personaliz√°vel 01","default":""},"customField02":{"type":"string","description":"Campo personaliz√°vel 02","default":""},"owner":{"type":"string","description":"Respons√°vel pelo cadastro","default":""},"created":{"type":"string","format":"date-time","description":"Data de cria√ß√£o autom√°tica"},"updated":{"type":"string","format":"date-time","description":"Data de atualiza√ß√£o autom√°tica"}},"example":{"id":"r1234abcd","name":"Jo√£o da Silva","phone":"+5511999999999","email":"joao@empresa.com","department":"Suporte T√©cnico","customField01":"Turno: Manh√£","customField02":"N√≠vel: 2","owner":"admin","created":"2025-01-24T13:52:19.000Z","updated":"2025-01-24T13:52:19.000Z"}},"ChatbotTrigger":{"type":"object","required":["type","agent_id"],"properties":{"id":{"type":"string","description":"Identificador √∫nico do trigger. Se definido, voc√™ ir√° editar ou deletar o trigger.\nSe vazio, um novo trigger ser√° criado.\n"},"active":{"type":"boolean","default":true,"description":"Define se o trigger est√° ativo e dispon√≠vel para uso.\nTriggers inativos n√£o ser√£o executados pelo sistema.\n"},"type":{"type":"string","enum":["agent","quickreply","flow"],"default":"agent","description":"Tipo do trigger:\n* agent - aciona um agente de IA\n* quickreply - aciona respostas r√°pidas predefinidas\n* flow - dispara um fluxo salvo\n"},"agent_id":{"type":"string","description":"ID do agente de IA. Obrigat√≥rio quando type='agent'"},"flow_id":{"type":"string","description":"ID do fluxo. Obrigat√≥rio quando type='flow'"},"quickReply_id":{"type":"string","description":"ID da resposta r√°pida. Obrigat√≥rio quando type='quickreply'"},"ignoreGroups":{"type":"boolean","default":true,"description":"Define se o trigger deve ignorar mensagens de grupos"},"lead_field":{"type":"string","enum":["lead_name","lead_fullName","lead_email","lead_personalid","lead_status","lead_tags","lead_notes","lead_isTicketOpen","lead_field01","lead_field02","lead_field03","lead_field04","lead_field05","lead_field06","lead_field07","lead_field08","lead_field09","lead_field10","lead_field11","lead_field12","lead_field13","lead_field14","lead_field15","lead_field16","lead_field17","lead_field18","lead_field19","lead_field20"],"description":"Campo do lead usado para condi√ß√£o do trigger"},"lead_operator":{"type":"string","enum":["equals","not_equals","contains","not_contains","greater","less","empty","not_empty"],"description":"Operador de compara√ß√£o para condi√ß√£o do lead:\n* equals - igual a\n* not_equals - diferente de\n* contains - cont√©m\n* not_contains - n√£o cont√©m\n* greater - maior que\n* less - menor que\n* empty - vazio\n* not_empty - n√£o vazio\n"},"lead_value":{"type":"string","description":"Valor para compara√ß√£o com o campo do lead. Usado em conjunto com lead_field e lead_operator"},"priority":{"type":"integer","format":"int64","default":0,"description":"Prioridade do trigger. Quando existem m√∫ltiplos triggers que poderiam ser acionados,\nAPENAS o trigger com maior prioridade ser√° executado.\nSe houver m√∫ltiplos triggers com a mesma prioridade mais alta, um ser√° escolhido aleatoriamente.\n"},"wordsToStart":{"type":"string","description":"Palavras-chave ou frases que ativam o trigger.\nM√∫ltiplas entradas separadas por pipe (|).\nExemplo: ol√°|bom dia|qual seu nome\n"},"responseDelay_seconds":{"type":"integer","format":"int64","default":0,"description":"Tempo de espera em segundos antes de executar o trigger"},"owner":{"type":"string","description":"Identificador do propriet√°rio do trigger"},"created":{"type":"string","format":"date-time","description":"Data e hora de cria√ß√£o"},"updated":{"type":"string","format":"date-time","description":"Data e hora da √∫ltima atualiza√ß√£o"}}},"ChatbotAIAgent":{"type":"object","description":"Configura√ß√£o de um agente de IA para atendimento de conversas","properties":{"id":{"type":"string","format":"uuid","description":"ID √∫nico gerado pelo sistema"},"name":{"type":"string","description":"Nome de exibi√ß√£o do agente"},"provider":{"type":"string","enum":["openai","anthropic","gemini","deepseek","custom"],"description":"Provedor do servi√ßo de IA"},"model":{"type":"string","description":"Nome do modelo LLM a ser utilizado"},"apikey":{"type":"string","description":"Chave de API para autentica√ß√£o no provedor","x-sensitive":true},"basePrompt":{"type":"string","description":"Prompt base para orientar o comportamento do agente"},"maxTokens":{"type":"integer","description":"N√∫mero m√°ximo de tokens por resposta"},"temperature":{"type":"integer","minimum":0,"maximum":100,"description":"Controle de criatividade (0-100)"},"diversityLevel":{"type":"integer","minimum":0,"maximum":100,"description":"N√≠vel de diversifica√ß√£o das respostas"},"frequencyPenalty":{"type":"integer","minimum":0,"maximum":100,"description":"Penalidade para repeti√ß√£o de frases"},"presencePenalty":{"type":"integer","minimum":0,"maximum":100,"description":"Penalidade para manter foco no t√≥pico"},"signMessages":{"type":"boolean","description":"Adiciona identifica√ß√£o do agente nas mensagens"},"readMessages":{"type":"boolean","description":"Marca mensagens como lidas automaticamente"},"maxMessageLength":{"type":"integer","description":"Tamanho m√°ximo permitido para mensagens (caracteres)"},"typingDelay_seconds":{"type":"integer","description":"Atraso simulado de digita√ß√£o em segundos"},"contextTimeWindow_hours":{"type":"integer","description":"Janela temporal para contexto da conversa"},"contextMaxMessages":{"type":"integer","description":"N√∫mero m√°ximo de mensagens no contexto"},"contextMinMessages":{"type":"integer","description":"N√∫mero m√≠nimo de mensagens para iniciar contexto"},"owner":{"type":"string","description":"Respons√°vel/Propriet√°rio do agente"},"created":{"type":"string","format":"date-time","description":"Data de cria√ß√£o do registro"},"updated":{"type":"string","format":"date-time","description":"Data da √∫ltima atualiza√ß√£o"}},"required":["name","provider","model","apikey"]},"ChatbotAIFunction":{"type":"object","properties":{"id":{"type":"string","description":"ID √∫nico da fun√ß√£o gerado automaticamente"},"name":{"type":"string","description":"Nome da fun√ß√£o"},"description":{"type":"string","description":"Descri√ß√£o da fun√ß√£o"},"active":{"type":"boolean","default":false,"description":"Indica se a fun√ß√£o est√° ativa"},"method":{"type":"string","description":"M√©todo HTTP da requisi√ß√£o"},"endpoint":{"type":"string","description":"Endpoint da API"},"headers":{"type":["string","null"],"description":"Cabe√ßalhos da requisi√ß√£o"},"body":{"type":["string","null"],"description":"Corpo da requisi√ß√£o"},"parameters":{"type":["string","null"],"default":"[]","description":"Par√¢metros da fun√ß√£o"},"undocumentedParameters":{"type":"string","description":"Par√¢metros n√£o documentados"},"header_error":{"type":"boolean","default":false,"description":"Indica erro de formata√ß√£o nos cabe√ßalhos"},"body_error":{"type":"boolean","default":false,"description":"Indica erro de formata√ß√£o no corpo"},"owner":{"type":"string","description":"Propriet√°rio da fun√ß√£o"},"created":{"type":"string","format":"date-time","default":"strftime('%Y-%m-%d %H:%M:%fZ')","description":"Data de cria√ß√£o"},"updated":{"type":"string","format":"date-time","default":"strftime('%Y-%m-%d %H:%M:%fZ')","description":"Data de atualiza√ß√£o"}},"required":["name","description","method","endpoint"]},"ChatbotAIKnowledge":{"type":"object","properties":{"id":{"type":"string","description":"ID √∫nico gerado automaticamente","example":"r1a2b3c4"},"active":{"type":"boolean","default":false,"description":"Indica se o conhecimento est√° ativo"},"tittle":{"type":"string","default":"","description":"T√≠tulo do conhecimento"},"content":{"type":"string","default":"","description":"Conte√∫do textual do conhecimento"},"vectorStatus":{"type":"string","default":"","description":"Status da vetoriza√ß√£o no sistema"},"isVectorized":{"type":"boolean","default":false,"description":"Indica se o conte√∫do foi vetorizado"},"lastVectorizedAt":{"type":"integer","format":"int64","default":0,"description":"Timestamp da √∫ltima vetoriza√ß√£o"},"owner":{"type":"string","default":"","description":"Propriet√°rio do conhecimento"},"priority":{"type":"integer","format":"int64","default":0,"description":"Prioridade de uso do conhecimento"},"created":{"type":"string","format":"date-time","description":"Data de cria√ß√£o"},"updated":{"type":"string","format":"date-time","description":"Data de atualiza√ß√£o"}},"required":["id","active","tittle","content"]},"MessageQueueFolder":{"type":"object","description":"Pasta para organiza√ß√£o de campanhas de mensagens em massa","properties":{"id":{"type":"string","description":"Identificador √∫nico"},"info":{"type":"string","description":"Informa√ß√µes adicionais sobre a pasta"},"status":{"type":"string","description":"Status atual da pasta","example":"ativo"},"scheduled_for":{"type":"integer","format":"int64","description":"Timestamp Unix para execu√ß√£o agendada"},"delayMax":{"type":"integer","format":"int64","description":"Atraso m√°ximo entre mensagens em milissegundos"},"delayMin":{"type":"integer","format":"int64","description":"Atraso m√≠nimo entre mensagens em milissegundos"},"log_delivered":{"type":"integer","format":"int64","description":"Contagem de mensagens entregues"},"log_failed":{"type":"integer","format":"int64","description":"Contagem de mensagens com falha"},"log_played":{"type":"integer","format":"int64","description":"Contagem de mensagens reproduzidas (para √°udio/v√≠deo)"},"log_read":{"type":"integer","format":"int64","description":"Contagem de mensagens lidas"},"log_sucess":{"type":"integer","format":"int64","description":"Contagem de mensagens enviadas com sucesso"},"log_total":{"type":"integer","format":"int64","description":"Contagem total de mensagens"},"owner":{"type":"string","description":"Identificador do propriet√°rio da inst√¢ncia"},"created":{"type":"string","format":"date-time","description":"Data e hora de cria√ß√£o"},"updated":{"type":"string","format":"date-time","description":"Data e hora da √∫ltima atualiza√ß√£o"}}},"QuickReply":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"ID √∫nico da resposta r√°pida"},"onWhatsApp":{"type":"boolean","description":"Indica se a resposta veio do WhatsApp (n√£o pode ser editada/exclu√≠da)","default":false},"docName":{"type":"string","description":"Nome de documento associado (quando aplic√°vel)","default":""},"file":{"type":"string","description":"Caminho ou conte√∫do do arquivo associado","default":""},"shortCut":{"type":"string","description":"Atalho para acionar a resposta"},"text":{"type":"string","description":"Conte√∫do da mensagem pr√©-definida"},"type":{"type":"string","description":"Tipo da resposta r√°pida (texto/documento/outros)"},"owner":{"type":"string","description":"Dono da resposta r√°pida"},"created":{"type":"string","format":"date-time","description":"Data de cria√ß√£o"},"updated":{"type":"string","format":"date-time","description":"Data da √∫ltima atualiza√ß√£o"}},"required":["shortCut","text"]},"Group":{"type":"object","description":"Representa um grupo/conversa coletiva","properties":{"JID":{"type":"string","format":"jid","description":"Identificador √∫nico do grupo","example":"jid8@g.us"},"OwnerJID":{"type":"string","format":"jid","description":"JID do propriet√°rio do grupo","example":"1232@s.whatsapp.net"},"OwnerPN":{"type":"string","format":"jid","description":"N√∫mero/LID do propriet√°rio (quando dispon√≠vel)"},"Name":{"type":"string","description":"Nome do grupo","example":"Grupo de Suporte"},"NameSetAt":{"type":"string","format":"date-time","description":"Data da √∫ltima altera√ß√£o do nome"},"NameSetBy":{"type":"string","format":"jid","description":"JID do usu√°rio que definiu o nome"},"NameSetByPN":{"type":"string","format":"jid","description":"LID/PN de quem definiu o nome"},"Topic":{"type":"string","description":"Descri√ß√£o do grupo"},"TopicID":{"type":"string","description":"ID interno da descri√ß√£o"},"TopicSetAt":{"type":"string","format":"date-time","description":"Data da √∫ltima altera√ß√£o da descri√ß√£o"},"TopicSetBy":{"type":"string","format":"jid","description":"JID de quem alterou a descri√ß√£o"},"TopicSetByPN":{"type":"string","format":"jid","description":"LID/PN de quem alterou a descri√ß√£o"},"TopicDeleted":{"type":"boolean","description":"Indica se a descri√ß√£o foi apagada"},"IsLocked":{"type":"boolean","description":"Indica se apenas administradores podem editar informa√ß√µes do grupo\n- true = apenas admins podem editar\n- false = todos podem editar\n","example":true},"IsAnnounce":{"type":"boolean","description":"Indica se apenas administradores podem enviar mensagens"},"AnnounceVersionID":{"type":"string","description":"Vers√£o da configura√ß√£o de an√∫ncios"},"IsEphemeral":{"type":"boolean","description":"Indica se as mensagens s√£o tempor√°rias"},"DisappearingTimer":{"type":"integer","description":"Tempo em segundos para desaparecimento de mensagens","minimum":0},"IsIncognito":{"type":"boolean","description":"Indica se o grupo √© incognito"},"IsParent":{"type":"boolean","description":"Indica se √© um grupo pai (comunidade)"},"IsJoinApprovalRequired":{"type":"boolean","description":"Indica se requer aprova√ß√£o para novos membros"},"LinkedParentJID":{"type":"string","format":"jid","description":"JID da comunidade vinculada"},"IsDefaultSubGroup":{"type":"boolean","description":"Indica se √© um subgrupo padr√£o da comunidade"},"DefaultMembershipApprovalMode":{"type":"string","description":"Modo padr√£o de aprova√ß√£o de membros (quando comunidade)"},"GroupCreated":{"type":"string","format":"date-time","description":"Data de cria√ß√£o do grupo"},"CreatorCountryCode":{"type":"string","description":"C√≥digo do pa√≠s do criador"},"ParticipantVersionID":{"type":"string","description":"Vers√£o da lista de participantes"},"Participants":{"type":"array","items":{"$ref":"#/GroupParticipant"},"description":"Lista de participantes do grupo"},"MemberAddMode":{"type":"string","enum":["admin_add","all_member_add"],"description":"Modo de adi√ß√£o de novos membros"},"AddressingMode":{"type":"string","enum":["pn","lid"],"description":"Endere√ßamento preferido do grupo"},"OwnerCanSendMessage":{"type":"boolean","description":"Verifica se √© poss√≠vel voc√™ enviar mensagens"},"OwnerIsAdmin":{"type":"boolean","description":"Verifica se voc√™ adminstrador do grupo"},"DefaultSubGroupId":{"type":"string","description":"Se o grupo atual for uma comunidade, nesse campo mostrar√° o ID do subgrupo de avisos"},"invite_link":{"type":"string","description":"Link de convite para entrar no grupo"},"request_participants":{"type":"string","description":"Lista de solicita√ß√µes de entrada, separados por v√≠rgula"}}},"GroupParticipant":{"type":"object","description":"Participante de um grupo","properties":{"JID":{"type":"string","format":"jid","description":"Identificador do participante"},"LID":{"type":"string","format":"jid","description":"Identificador local do participante"},"PhoneNumber":{"type":"string","format":"jid","description":"N√∫mero do participante (quando dispon√≠vel)"},"IsAdmin":{"type":"boolean","description":"Indica se √© administrador"},"IsSuperAdmin":{"type":"boolean","description":"Indica se √© super administrador"},"DisplayName":{"type":"string","description":"Nome exibido no grupo (para usu√°rios an√¥nimos)"},"Error":{"type":"integer","description":"C√≥digo de erro ao adicionar participante","minimum":0},"AddRequest":{"type":"object","description":"Informa√ß√µes da solicita√ß√£o de entrada","properties":{"Code":{"type":"string","description":"C√≥digo da solicita√ß√£o"},"Expiration":{"type":"string","format":"date-time","description":"Data de expira√ß√£o da solicita√ß√£o"}}}}},"WebhookEvent":{"type":"object","required":["event","instance","data"],"properties":{"event":{"type":"string","enum":["message","status","presence","group","connection"],"description":"Tipo do evento recebido"},"instance":{"type":"string","description":"ID da inst√¢ncia que gerou o evento"},"data":{"type":"object","description":"Payload do evento enviado pelo webhook. O formato varia conforme o tipo do evento\n(messages, messages_update, connection, presence, etc) e segue o que o backend envia\nem `callHook` (map[string]interface{}). Consulte os exemplos de cada evento espec√≠fico.\n","additionalProperties":true}}}}},"security":[{"token":[]}],"x-tagGroups":[{"name":"ChatBot","description":"**Sistema avan√ßado de chatbots com intelig√™ncia artificial**\n\nEsta categoria cont√©m recursos sofisticados para criar chatbots inteligentes e automatizar conversas usando IA. Ideal para empresas que precisam de atendimento automatizado avan√ßado e respostas contextuais.\n\n### Recursos de IA inclu√≠dos:\n- ü§ñ **IA Conversacional**: Integra√ß√£o com m√∫ltiplos provedores (OpenAI, Anthropic, Google, DeepSeek)\n- üß† **Base de Conhecimento**: Sistema de embeddings com Qdrant para respostas contextuais\n- ‚öôÔ∏è **Fun√ß√µes Personalizadas**: Integra√ß√£o com APIs externas e l√≥gica de neg√≥cio complexa\n- üéØ **Triggers Inteligentes**: Ativa√ß√£o autom√°tica baseada em contexto e palavras-chave\n- üìã **Configura√ß√µes Avan√ßadas**: Personaliza√ß√£o completa do comportamento do bot\n\n### Casos de uso:\n- Atendimento automatizado 24/7\n- Qualifica√ß√£o autom√°tica de leads\n- Suporte t√©cnico com base de conhecimento\n- Agendamento de reuni√µes e consultas\n- FAQ din√¢mico e contextual\n\n**Ideal para**: Empresas m√©dias/grandes, desenvolvedores, ag√™ncias, sistemas de atendimento complexos\n\n**Requer**: Conhecimento t√©cnico para configura√ß√£o adequada e chaves de API dos provedores de IA\n","tags":["Chatbot Configura√ß√µes","Chatbot Trigger","Configura√ß√£o do Agente de IA","Conhecimento dos Agentes","Fun√ß√µes API dos Agentes"]}],"tags":[{"name":"Admininstra√ß√£o","description":"Endpoints para **administra√ß√£o geral** do sistema.\nRequerem um `admintoken` para autentica√ß√£o.\n"},{"name":"Instancia","description":"Opera√ß√µes relacionadas ao ciclo de vida de uma inst√¢ncia, como conectar,\ndesconectar e verificar o status.\n"},{"name":"Proxy","description":"A uazapiGO opera com um proxy interno como padr√£o.\nVoc√™ pode manter esse padr√£o, configurar um proxy pr√≥prio via `proxy_url` ou usar seu celular android como proxy instalando o app em https://github.com/uazapi/silver_proxy_apk (APK direto: https://github.com/uazapi/silver_proxy_apk/raw/refs/heads/main/silver_proxy.apk).\nSe nada for enviado, seguimos no proxy interno. IPs s√£o brasileiros; para clientes internacionais, considere um proxy da regi√£o do cliente.\n"},{"name":"Perfil","description":"Opera√ß√µes relacionadas ao perfil da inst√¢ncia do WhatsApp, como alterar\nnome e imagem de perfil.\n"},{"name":"Business","description":"‚ö†Ô∏è **EXPERIMENTAL** - Endpoints ainda n√£o testados completamente.\n\nOpera√ß√µes relacionadas ao perfil comercial do WhatsApp Business.\nPermite consultar e atualizar dados do perfil comercial como descri√ß√£o,\nendere√ßo, email, categorias e gerenciar o cat√°logo de produtos.\n\n**Requisitos:**\n- A inst√¢ncia deve ser uma conta **WhatsApp Business**\n- Contas pessoais do WhatsApp n√£o possuem perfil comercial\n\n**Nota:** Estes endpoints podem n√£o funcionar como esperado.\nReporte problemas encontrados.\n"},{"name":"Chamadas","description":"Opera√ß√µes relacionadas a chamadas peloWhatsApp.\nPermite realizar e rejeitar chamadas programaticamente.\n"},{"name":"Webhooks e SSE"},{"name":"Enviar Mensagem","description":"Endpoints para envio de mensagens do WhatsApp com diferentes tipos de conte√∫do.\n\n## Campos Opcionais Comuns\n\nTodos os endpoints de envio de mensagem suportam os seguintes campos opcionais:\n\n- **`delay`** *(integer)*: Atraso em milissegundos antes do envio\n  - Durante o atraso aparecer√° \"Digitando...\" ou \"Gravando √°udio...\" dependendo do tipo\n  - Exemplo: `5000` (5 segundos)\n\n- **`readchat`** *(boolean)*: Marcar chat como lido ap√≥s envio\n  - Remove o contador de mensagens n√£o lidas do chat\n  - Exemplo: `true`\n\n- **`readmessages`** *(boolean)*: Marcar √∫ltimas mensagens recebidas como lidas\n  - Marca as √∫ltimas 10 mensagens **recebidas** (n√£o enviadas por voc√™) como lidas\n  - √ötil para confirmar leitura de mensagens pendentes antes de responder\n  - Diferente do `readchat` que apenas remove contador de n√£o lidas\n  - Exemplo: `true`\n\n- **`replyid`** *(string)*: ID da mensagem para responder\n  - Cria uma resposta vinculada √† mensagem original\n  - Suporte varia por tipo de mensagem\n  - Exemplo: `\"3A12345678901234567890123456789012\"`\n\n- **`mentions`** *(string)*: N√∫meros para mencionar (apenas para envio em grupos)\n  - N√∫meros espec√≠ficos: `\"5511999999999,5511888888888\"`\n  - Mencionar todos: `\"all\"`\n\n- **`forward`** *(boolean)*: Marca a mensagem como encaminhada no WhatsApp\n  - Adiciona o indicador \"Encaminhada\" na mensagem\n  - Exemplo: `true`\n\n- **`track_source`** *(string)*: Origem do rastreamento da mensagem\n  - Identifica o sistema ou fonte que est√° enviando a mensagem\n  - √ötil para integra√ß√µes (ex: \"chatwoot\", \"crm\", \"chatbot\")\n  - Exemplo: `\"chatwoot\"`\n\n- **`track_id`** *(string)*: ID para rastreamento da mensagem\n  - Identificador livre para acompanhar a mensagem em sistemas externos\n  - Permite correlacionar mensagens entre diferentes plataformas\n  - **Nota**: O sistema aceita valores duplicados - n√£o h√° valida√ß√£o de unicidade\n  - Use o mesmo ID em v√°rias mensagens se fizer sentido para sua integra√ß√£o\n  - Exemplo: `\"msg_123456789\"`\n\n- **`async`** *(boolean)*: Envia pela fila interna sem bloquear a requisi√ß√£o\n  - Resposta 200 indica que a mensagem entrou na fila; o envio real pode falhar depois\n  - Em caso de falha, pesquise em `/message/find` com `status=failed`\n\n### Envio para Grupos\n- **`number`** *(string)*: Para enviar mensagem para grupo, use o ID do grupo que termina com `@g.us`\n  - Exemplo: `\"120363012345678901@g.us\"`\n  - **Como obter o ID do grupo:**\n    - Use o `chatid` do webhook recebido quando algu√©m envia mensagem no grupo\n    - Use o endpoint `GET /group/list` para listar todos os grupos e seus IDs\n\n## Placeholders Dispon√≠veis\n\nTodos os endpoints de envio de mensagem suportam placeholders din√¢micos para personaliza√ß√£o autom√°tica:\n\n### Campos de Nome\n- **`{{name}}`**: Nome consolidado do chat, usando a primeira op√ß√£o dispon√≠vel:\n  1. Nome do lead (`lead_name`)\n  2. Nome completo do lead (`lead_fullName`)\n  3. Nome do contato no WhatsApp (`wa_contactName`)\n  4. Nome do perfil do WhatsApp (`wa_name`)\n\n- **`{{first_name}}`**: Primeira palavra v√°lida do nome consolidado (m√≠nimo 2 caracteres)\n\n### Campos do WhatsApp\n- **`{{wa_name}}`**: Nome do perfil do WhatsApp\n- **`{{wa_contactName}}`**: Nome do contato como salvo no WhatsApp\n\n### Campos do Lead\n- **`{{lead_name}}`**: Nome do lead\n- **`{{lead_fullName}}`**: Nome completo do lead\n- **`{{lead_personalid}}`**: ID pessoal (CPF, CNPJ, etc)\n- **`{{lead_email}}`**: Email do lead\n- **`{{lead_status}}`**: Status atual do lead\n- **`{{lead_notes}}`**: Anota√ß√µes do lead\n- **`{{lead_assignedAttendant_id}}`**: ID do atendente designado\n\n### Campos Personalizados\nCampos adicionados via custom fields s√£o acess√≠veis usando `{{lead_field01}}` √† `{{lead_field20}}` ou usar `{{nomedocampo}}` definido em `/instance/updateFieldsMap`.\n\n### Exemplo de Uso\n```\nOl√° {{name}}! Vi que voc√™ trabalha na {{company}}.\nSeu email {{lead_email}} est√° correto?\n```\n\n**üí° Dica**: Use `/chat/find` para buscar dados do chat e ver os campos dispon√≠veis antes de enviar mensagens com placeholders.\n"},{"name":"A√ß√µes na mensagem e Buscar"},{"name":"Chats"},{"name":"Contatos"},{"name":"Bloqueios"},{"name":"Etiquetas"},{"name":"Grupos e Comunidades"},{"name":"Respostas R√°pidas","description":"Gerenciamento de respostas r√°pidas para agilizar o atendimento.\n\n**‚ö†Ô∏è Importante**: Este recurso tem serventia apenas se voc√™ utilizar um sistema frontend/interface\npersonalizada para registrar e utilizar as respostas. A API apenas armazena as respostas, \nmas n√£o as aplica automaticamente.\n\n### Como funciona:\n- **Criar**: Cadastre respostas pr√©-definidas com t√≠tulos e conte√∫do\n- **Listar**: Recupere todas as respostas cadastradas para exibir na sua interface\n- **Usar**: Seu sistema frontend pode usar essas respostas para agilizar digita√ß√£o\n\n### Casos de uso:\n- Interfaces web personalizadas de atendimento\n- Apps mobile com sugest√µes de resposta\n- Sistemas CRM com templates de mensagem\n- Ferramentas de produtividade para atendentes\n\n**N√£o √© um chatbot**: Para respostas autom√°ticas, use os recursos de Chatbot.\n"},{"name":"CRM","description":"Sistema completo de gest√£o de relacionamento com clientes integrado √† API.\n\n**üíæ Armazenamento interno**: Todos os dados dos leads ficam salvos diretamente na API,\neliminando a necessidade de bancos de dados externos. Sua aplica√ß√£o pode focar apenas\nna interface e l√≥gica de neg√≥cio.\n\n### Recursos dispon√≠veis:\n- **üìã 20+ campos personaliz√°veis**: Nome, telefone, email, empresa, observa√ß√µes, etc.\n- **üè∑Ô∏è Sistema de etiquetas**: Organize e categorize seus contatos\n- **üîç Busca avan√ßada**: Filtre por qualquer campo ou etiqueta\n- **üìä Hist√≥rico completo**: Todas as intera√ß√µes ficam registradas automaticamente\n\n### üéØ Placeholders em mensagens:\nUse vari√°veis din√¢micas nas mensagens para personaliza√ß√£o autom√°tica:\n\n```\nOl√° {{nome}}! Vi que voc√™ trabalha na {{empresa}}.\nSeu email {{email}} est√° correto?\nObserva√ß√µes: {{observacoes}}\n```\n\n### Fluxo t√≠pico:\n1. **Captura**: Leads chegam via WhatsApp ou formul√°rios\n2. **Enriquecimento**: Adicione dados usando `/chat/editLead`\n3. **Segmenta√ß√£o**: Organize com etiquetas\n4. **Comunica√ß√£o**: Envie mensagens personalizadas com placeholders\n5. **Acompanhamento**: Hist√≥rico fica salvo automaticamente\n\n**Ideal para**: Vendas, marketing, atendimento, qualifica√ß√£o de leads\n"},{"name":"Mensagem em massa"},{"name":"Chatbot Configura√ß√µes"},{"name":"Chatbot Trigger"},{"name":"Configura√ß√£o do Agente de IA"},{"name":"Conhecimento dos Agentes"},{"name":"Fun√ß√µes API dos Agentes"},{"name":"Integra√ß√£o Chatwoot","description":"**üöß INTEGRA√á√ÉO BETA - Sistema de integra√ß√£o com Chatwoot para atendimento unificado**\n\n**‚ö†Ô∏è AVISO**: Esta integra√ß√£o est√° em fase BETA. Use por sua conta e risco. Recomendamos testes em ambiente n√£o-produtivo antes do uso em produ√ß√£o.\n\nEsta categoria cont√©m recursos para configurar e gerenciar a integra√ß√£o com o Chatwoot, uma plataforma de atendimento ao cliente open-source. A integra√ß√£o permite centralizar conversas do WhatsApp no Chatwoot.\n\n### Recursos dispon√≠veis:\n- üîß **Configura√ß√£o Completa**: Configure URL, tokens e credenciais do Chatwoot\n- üì¨ **Sincroniza√ß√£o Bidirecional**: Mensagens novas entre WhatsApp e Chatwoot s√£o sincronizadas automaticamente\n- üì± **Gerenciamento de Contatos**: Sincroniza√ß√£o autom√°tica de nomes e telefones\n- üîÑ **Atualiza√ß√£o LID‚ÜíPN**: Migra√ß√£o autom√°tica de Local ID para Phone Number\n- üè∑Ô∏è **Nomes Inteligentes**: Sistema de nomes com til (~) para atualiza√ß√£o autom√°tica\n- üö´ **Separa√ß√£o de Grupos**: Op√ß√£o para ignorar grupos na sincroniza√ß√£o\n- üë§ **Assinatura de Mensagens**: Identifica√ß√£o do agente nas mensagens enviadas\n- üîó **Webhook Autom√°tico**: URL gerada automaticamente para configurar no Chatwoot\n\n### üè∑Ô∏è Sistema de Nomes Inteligentes:\n- **Nomes com til (~)**: Atualizados automaticamente quando contato modifica nome no WhatsApp\n- **Nomes espec√≠ficos**: Para nome fixo, remover til (~) do nome no Chatwoot\n- **Exemplo**: \"~Jo√£o Silva\" = autom√°tico, \"Jo√£o Silva\" = fixo\n- **Migra√ß√£o LID‚ÜíPN**: Sem duplica√ß√£o de conversas durante a transi√ß√£o\n- **Respostas nativas**: Aparecem diretamente no Chatwoot sem marca√ß√µes externas\n\n### ‚ö†Ô∏è Limita√ß√µes conhecidas:\n- **Sincroniza√ß√£o de hist√≥rico**: N√£o implementada - apenas mensagens novas s√£o sincronizadas\n\n### Casos de uso:\n- Atendimento centralizado no Chatwoot\n- Equipes de suporte com m√∫ltiplos agentes\n- Integra√ß√£o com CRM via Chatwoot\n- Centraliza√ß√£o de canais de comunica√ß√£o\n- Gest√£o autom√°tica de contatos e nomes\n\n**Ideal para**: Empresas com equipes de atendimento, call centers, suporte t√©cnico (em ambiente de testes)\n\n**Requer**: Inst√¢ncia do Chatwoot configurada, tokens de API e ambiente de testes\n\n**üöß Lembre-se**: Integra√ß√£o em BETA - funcionalidades podem mudar sem aviso pr√©vio\n"}],"paths":{"/instance/init":{"post":{"operationId":"initInstance","tags":["Admininstra√ß√£o"],"summary":"Criar Instancia","security":[{"admintoken":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Nome da inst√¢ncia","example":"minha-instancia"},"systemName":{"type":"string","description":"Nome do sistema (opcional, padr√£o 'uazapiGO' se n√£o informado)","example":"apilocal"},"adminField01":{"type":"string","description":"Campo administrativo 1 para metadados personalizados (opcional)","example":"custom-metadata-1"},"adminField02":{"type":"string","description":"Campo administrativo 2 para metadados personalizados (opcional)","example":"custom-metadata-2"},"fingerprintProfile":{"type":"string","description":"Perfil de fingerprint para emula√ß√£o de navegador (opcional)","example":"chrome"},"browser":{"type":"string","description":"Tipo de navegador para emula√ß√£o (opcional)","example":"chrome"}},"required":["name"]}}}},"description":"Cria uma nova inst√¢ncia do WhatsApp. Para criar uma inst√¢ncia voc√™ precisa:\n\n1. Ter um admintoken v√°lido\n2. Enviar pelo menos o nome da inst√¢ncia\n3. A inst√¢ncia ser√° criada desconectada\n4. Ser√° gerado um token √∫nico para autentica√ß√£o\n\nAp√≥s criar a inst√¢ncia, guarde o token retornado pois ele ser√° necess√°rio\npara todas as outras opera√ß√µes.\n\nEstados poss√≠veis da inst√¢ncia:\n\n- `disconnected`: Desconectado do WhatsApp\n- `connecting`: Em processo de conex√£o\n- `connected`: Conectado e autenticado\n\nCampos administrativos (adminField01/adminField02) s√£o opcionais e podem ser usados para armazenar metadados personalizados. \nOS valores desses campos s√£o v√≠siveis para o dono da instancia via token, por√©m apenas o administrador da api (via admin token) pode edit√°-los.\n","responses":{"200":{"description":"Sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Instance created successfully"},"instance":{"$ref":"../schemas/instance.yaml#/Instance"},"connected":{"type":"boolean","example":false},"loggedIn":{"type":"boolean","example":false},"name":{"type":"string","example":"minha-instancia"},"token":{"type":"string","example":"123e4567-e89b-12d3-a456-426614174000"},"info":{"type":"string","example":"This instance will be automatically disconnected and deleted after 1 hour."}}}}}},"401":{"description":"Token inv√°lido/expirado"},"404":{"description":"Inst√¢ncia n√£o encontrada"},"500":{"description":"Erro interno"}}}},"/instance/all":{"get":{"operationId":"listAllInstances","tags":["Admininstra√ß√£o"],"summary":"Listar todas as inst√¢ncias","security":[{"admintoken":[]}],"description":"Retorna uma lista completa de todas as inst√¢ncias do sistema, incluindo:\n- ID e nome de cada inst√¢ncia\n- Status atual (disconnected, connecting, connected)\n- Data de cria√ß√£o\n- √öltima desconex√£o e motivo\n- Informa√ß√µes de perfil (se conectado)\n\nRequer permiss√µes de administrador.\n","responses":{"200":{"description":"Lista de inst√¢ncias retornada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/instance.yaml#/Instance"}},"example":[{"id":"r183e2ef9597845","name":"instancia-1","token":"abc123xyz","status":"connected","profileName":"Meu WhatsApp","profilePicUrl":"https://example.com/profile.jpg","isBusiness":true,"plataform":"Android","systemName":"uazapi","owner":"user@example.com","created":"2024-01-01T12:00:00.000Z","updated":"2024-01-01T12:30:00.000Z"},{"id":"r283e2ef9597846","name":"instancia-2","token":"def456xyz","status":"disconnected","lastDisconnect":"2024-01-02T12:00:00.000Z","lastDisconnectReason":"manual disconnect","created":"2024-01-02T12:00:00.000Z","updated":"2024-01-02T12:30:00.000Z"}]}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"403":{"description":"Token de administrador inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid AdminToken Header"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Internal server error"}}}}}}}}},"/instance/connect":{"post":{"operationId":"connectInstance","tags":["Instancia"],"summary":"Conectar inst√¢ncia ao WhatsApp","description":"Inicia o processo de conex√£o de uma inst√¢ncia ao WhatsApp. Este endpoint:\n1. Requer o token de autentica√ß√£o da inst√¢ncia\n2. Recebe o n√∫mero de telefone associado √† conta WhatsApp\n3. Gera um QR code caso n√£o passe o campo `phone`\n4. Ou Gera c√≥digo de pareamento se passar o o campo `phone`\n5. Atualiza o status da inst√¢ncia para \"connecting\"\n\nO processo de conex√£o permanece pendente at√© que:\n- O QR code seja escaneado no WhatsApp do celular, ou\n- O c√≥digo de pareamento seja usado no WhatsApp\n- Timeout de 2 minutos para QRCode seja atingido ou 5 minutos para o c√≥digo de pareamento\n\nUse o endpoint /instance/status para monitorar o progresso da conex√£o.\n\nEstados poss√≠veis da inst√¢ncia:\n- `disconnected`: Desconectado do WhatsApp\n- `connecting`: Em processo de conex√£o\n- `connected`: Conectado e autenticado\n\nExemplo de requisi√ß√£o:\n```json\n{\n  \"phone\": \"5511999999999\"\n}\n```\n","requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"phone":{"type":"string","description":"N√∫mero de telefone no formato internacional (ex: 5511999999999). Se informado, gera c√≥digo de pareamento. Se omitido, gera QR code.","example":"5511999999999","pattern":"^\\d{10,15}$"}}}}}},"responses":{"200":{"description":"Sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"connected":{"type":"boolean","description":"Estado atual da conex√£o","example":false},"loggedIn":{"type":"boolean","description":"Estado do login","example":false},"jid":{"type":["object","null"],"description":"ID do WhatsApp (quando logado)","example":null},"instance":{"$ref":"../schemas/instance.yaml#/Instance","description":"Detalhes completos da inst√¢ncia"}}}}}},"401":{"description":"Token inv√°lido/expirado"},"404":{"description":"Inst√¢ncia n√£o encontrada"},"429":{"description":"Limite de conex√µes simult√¢neas atingido"},"500":{"description":"Erro interno"}}}},"/instance/disconnect":{"post":{"operationId":"disconnectInstance","tags":["Instancia"],"summary":"Desconectar inst√¢ncia","description":"Desconecta a inst√¢ncia do WhatsApp, encerrando a sess√£o atual.\nEsta opera√ß√£o:\n\n- Encerra a conex√£o ativa\n\n- Requer novo QR code para reconectar\n\n\nDiferen√ßas entre desconectar e hibernar:\n\n- Desconectar: Encerra completamente a sess√£o, exigindo novo login\n\n- Hibernar: Mant√©m a sess√£o ativa, apenas pausa a conex√£o\n\n\nUse este endpoint para:\n\n1. Encerrar completamente uma sess√£o\n\n2. For√ßar uma nova autentica√ß√£o\n\n3. Limpar credenciais de uma inst√¢ncia\n\n4. Reiniciar o processo de conex√£o\n\n\nEstados poss√≠veis ap√≥s desconectar:\n\n- `disconnected`: Desconectado do WhatsApp\n\n- `connecting`: Em processo de reconex√£o (ap√≥s usar /instance/connect)\n","responses":{"200":{"description":"Sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"instance":{"$ref":"../schemas/instance.yaml#/Instance"},"response":{"type":"string","example":"Disconnected"},"info":{"type":"string","example":"The device has been successfully disconnected from WhatsApp. A new QR code will be required for the next connection."}}}}}},"401":{"description":"Token inv√°lido/expirado"},"404":{"description":"Inst√¢ncia n√£o encontrada"},"500":{"description":"Erro interno"}}}},"/instance/status":{"get":{"operationId":"getInstanceStatus","tags":["Instancia"],"summary":"Verificar status da inst√¢ncia","description":"Retorna o status atual de uma inst√¢ncia, incluindo:\n- Estado da conex√£o (disconnected, connecting, connected)\n- QR code atualizado (se em processo de conex√£o)\n- C√≥digo de pareamento (se dispon√≠vel)\n- Informa√ß√µes da √∫ltima desconex√£o\n- Detalhes completos da inst√¢ncia\n\nEste endpoint √© particularmente √∫til para:\n1. Monitorar o progresso da conex√£o\n2. Obter QR codes atualizados durante o processo de conex√£o\n3. Verificar o estado atual da inst√¢ncia\n4. Identificar problemas de conex√£o\n\nEstados poss√≠veis:\n- `disconnected`: Desconectado do WhatsApp\n- `connecting`: Em processo de conex√£o (aguardando QR code ou c√≥digo de pareamento)\n- `connected`: Conectado e autenticado com sucesso\n","responses":{"200":{"description":"Sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"instance":{"$ref":"../schemas/instance.yaml#/Instance"},"status":{"type":"object","properties":{"connected":{"type":"boolean","description":"Indica se est√° conectado ao WhatsApp"},"loggedIn":{"type":"boolean","description":"Indica se est√° autenticado no WhatsApp"},"jid":{"type":["object","null"],"description":"ID do WhatsApp quando conectado"}}}}},"example":{"instance":{"id":"r183e2ef9597845","name":"minha-instancia","status":"connected","profileName":"Meu WhatsApp","currentTime":"2024-01-25T12:00:00.000Z"},"status":{"connected":true,"loggedIn":true,"jid":{"user":"5511999999999","agent":0,"device":0,"server":"s.whatsapp.net"}}}}}},"401":{"description":"Token inv√°lido/expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"instance info not found"}}}}}},"404":{"description":"Inst√¢ncia n√£o encontrada"},"500":{"description":"Erro interno"}}}},"/instance/updatechatbotsettings":{"post":{"operationId":"updateChatbotSettings","tags":["Chatbot Configura√ß√µes"],"summary":"Chatbot Configura√ß√µes","description":"Explica√ß√£o dos campos:\n\n\n- `openai_apikey`: Chave da API OpenAI (come√ßa com \"sk-\")  \n\n- `chatbot_enabled`: Habilita/desabilita o chatbot  \n\n- `chatbot_ignoreGroups`: Define se o chatbot deve ignorar mensagens de grupos  \n\n- `chatbot_stopConversation`: Palavra-chave que os usu√°rios podem usar para parar o chatbot  \n\n- `chatbot_stopMinutes`: Por quantos minutos o chatbot deve ficar desativado ap√≥s receber o comando de parada  \n\n- `chatbot_stopWhenYouSendMsg`: Por quantos minutos o chatbot deve ficar desativado ap√≥s voc√™ enviar uma mensagem fora da API, 0 desliga.\n","requestBody":{"content":{"application/json":{"schema":{"type":"object","example":{"openai_apikey":"sk-1234567890abcdefghijklmnopqrstuvwxyz","chatbot_enabled":true,"chatbot_ignoreGroups":true,"chatbot_stopConversation":"stop","chatbot_stopMinutes":30,"chatbot_stopWhenYouSendMsg":5}}}}},"responses":{"200":{"description":"Sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/instance.yaml#/Instance"}}}},"401":{"description":"Token inv√°lido/expirado"},"404":{"description":"Inst√¢ncia n√£o encontrada"},"500":{"description":"Erro interno"}}}},"/instance/updateFieldsMap":{"post":{"operationId":"updateFieldsMap","tags":["CRM"],"summary":"Atualizar campos personalizados de leads","description":"Atualiza os campos personalizados (custom fields) de uma inst√¢ncia. \nPermite configurar at√© 20 campos personalizados para armazenamento de \ninforma√ß√µes adicionais sobre leads.\n\nCada campo pode armazenar at√© 255 caracteres e aceita qualquer tipo de dado.\n\nCampos dispon√≠veis:\n- lead_field01 a lead_field20\n\nExemplo de uso:\n1. Armazenar informa√ß√µes adicionais sobre leads\n2. Criar campos personalizados para integra√ß√£o com outros sistemas\n3. Armazenar tags ou categorias personalizadas\n4. Manter hist√≥rico de intera√ß√µes com o lead\n\nExemplo de requisi√ß√£o:\n```json\n{\n  \"lead_field01\": \"nome\",\n  \"lead_field02\": \"email\",\n  \"lead_field03\": \"telefone\",\n  \"lead_field04\": \"cidade\",\n  \"lead_field05\": \"estado\",\n  \"lead_field06\": \"idade\",\n  \"lead_field07\": \"interesses\",\n  \"lead_field08\": \"origem\",\n  \"lead_field09\": \"status\",\n  \"lead_field10\": \"valor\",\n  \"lead_field11\": \"observacoes\",\n  \"lead_field12\": \"ultima_interacao\",\n  \"lead_field13\": \"proximo_contato\",\n  \"lead_field14\": \"vendedor\",\n  \"lead_field15\": \"produto_interesse\",\n  \"lead_field16\": \"fonte_captacao\",\n  \"lead_field17\": \"score\",\n  \"lead_field18\": \"tags\",\n  \"lead_field19\": \"historico\",\n  \"lead_field20\": \"custom\"\n}\n```\n\nExemplo de resposta:\n```json\n{\n  \"success\": true,\n  \"message\": \"Custom fields updated successfully\",\n  \"instance\": {\n    \"id\": \"r183e2ef9597845\",\n    \"name\": \"minha-instancia\",\n    \"fieldsMap\": {\n      \"lead_field01\": \"nome\",\n      \"lead_field02\": \"email\",\n      \"lead_field03\": \"telefone\",\n      \"lead_field04\": \"cidade\",\n      \"lead_field05\": \"estado\",\n      \"lead_field06\": \"idade\",\n      \"lead_field07\": \"interesses\",\n      \"lead_field08\": \"origem\",\n      \"lead_field09\": \"status\",\n      \"lead_field10\": \"valor\",\n      \"lead_field11\": \"observacoes\",\n      \"lead_field12\": \"ultima_interacao\",\n      \"lead_field13\": \"proximo_contato\",\n      \"lead_field14\": \"vendedor\",\n      \"lead_field15\": \"produto_interesse\",\n      \"lead_field16\": \"fonte_captacao\",\n      \"lead_field17\": \"score\",\n      \"lead_field18\": \"tags\",\n      \"lead_field19\": \"historico\",\n      \"lead_field20\": \"custom\"\n    }\n  }\n}\n```\n\nErros comuns:\n- 400: Campos inv√°lidos ou payload mal formatado\n- 401: Token inv√°lido ou expirado\n- 404: Inst√¢ncia n√£o encontrada\n- 500: Erro ao atualizar campos no banco de dados\n\nRestri√ß√µes:\n- Cada campo pode ter no m√°ximo 255 caracteres\n- Campos vazios ser√£o mantidos com seus valores atuais\n- Apenas os campos enviados ser√£o atualizados\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"lead_field01":{"type":"string","description":"Campo personalizado 01","maxLength":255},"lead_field02":{"type":"string","description":"Campo personalizado 02","maxLength":255},"lead_field03":{"type":"string","description":"Campo personalizado 03","maxLength":255},"lead_field04":{"type":"string","description":"Campo personalizado 04","maxLength":255},"lead_field05":{"type":"string","description":"Campo personalizado 05","maxLength":255},"lead_field06":{"type":"string","description":"Campo personalizado 06","maxLength":255},"lead_field07":{"type":"string","description":"Campo personalizado 07","maxLength":255},"lead_field08":{"type":"string","description":"Campo personalizado 08","maxLength":255},"lead_field09":{"type":"string","description":"Campo personalizado 09","maxLength":255},"lead_field10":{"type":"string","description":"Campo personalizado 10","maxLength":255},"lead_field11":{"type":"string","description":"Campo personalizado 11","maxLength":255},"lead_field12":{"type":"string","description":"Campo personalizado 12","maxLength":255},"lead_field13":{"type":"string","description":"Campo personalizado 13","maxLength":255},"lead_field14":{"type":"string","description":"Campo personalizado 14","maxLength":255},"lead_field15":{"type":"string","description":"Campo personalizado 15","maxLength":255},"lead_field16":{"type":"string","description":"Campo personalizado 16","maxLength":255},"lead_field17":{"type":"string","description":"Campo personalizado 17","maxLength":255},"lead_field18":{"type":"string","description":"Campo personalizado 18","maxLength":255},"lead_field19":{"type":"string","description":"Campo personalizado 19","maxLength":255},"lead_field20":{"type":"string","description":"Campo personalizado 20","maxLength":255}}}}}},"responses":{"200":{"description":"Sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/instance.yaml#/Instance"}}}},"401":{"description":"Token inv√°lido/expirado"},"404":{"description":"Inst√¢ncia n√£o encontrada"},"500":{"description":"Erro interno"}}}},"/instance/updateInstanceName":{"post":{"operationId":"updateInstanceName","tags":["Instancia"],"summary":"Atualizar nome da inst√¢ncia","description":"Atualiza o nome de uma inst√¢ncia WhatsApp existente.\nO nome n√£o precisa ser √∫nico.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Novo nome para a inst√¢ncia","example":"Minha Nova Inst√¢ncia 2024!@#"}},"required":["name"]}}}},"responses":{"200":{"description":"Sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/instance.yaml#/Instance"}}}},"401":{"description":"Token inv√°lido/expirado"},"404":{"description":"Inst√¢ncia n√£o encontrada"},"500":{"description":"Erro interno"}}}},"/instance/updateAdminFields":{"post":{"operationId":"updateAdminFields","tags":["Admininstra√ß√£o"],"summary":"Atualizar campos administrativos","security":[{"admintoken":[]}],"description":"Atualiza os campos administrativos (adminField01/adminField02) de uma inst√¢ncia.\n\nCampos administrativos s√£o opcionais e podem ser usados para armazenar metadados personalizados. \nEstes campos s√£o persistidos no banco de dados e podem ser utilizados para integra√ß√µes com outros sistemas ou para armazenamento de informa√ß√µes internas.\nOS valores desses campos s√£o v√≠siveis para o dono da instancia via token, por√©m apenas o administrador da api (via admin token) pode edit√°-los.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID da inst√¢ncia","example":"inst_123456"},"adminField01":{"type":"string","description":"Campo administrativo 1","example":"clientId_456"},"adminField02":{"type":"string","description":"Campo administrativo 2","example":"integration_xyz"}},"required":["id"]}}}},"responses":{"200":{"description":"Campos atualizados com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/instance.yaml#/Instance"}}}},"401":{"description":"Token de administrador inv√°lido"},"404":{"description":"Inst√¢ncia n√£o encontrada"},"500":{"description":"Erro interno"}}}},"/instance/proxy":{"get":{"operationId":"getProxyConfig","tags":["Proxy"],"summary":"Obter configura√ß√£o de proxy da inst√¢ncia","description":"A uazapiGO opera com um proxy interno como padr√£o.\nObserva√ß√£o: nossos IPs s√£o brasileiros. Se voc√™ atende clientes internacionais, considere usar um proxy do pa√≠s/regi√£o do seu cliente (via `proxy_url`).\nVoc√™ pode:\n  (1) continuar no proxy interno padr√£o;\n  (2) usar um proxy pr√≥prio informando `proxy_url`. Se nada for definido, seguimos no proxy interno; ou\n  (3) usar seu celular android como proxy instalando o aplicativo disponibilizado pela uazapi em https://github.com/uazapi/silver_proxy_apk (APK direto: https://github.com/uazapi/silver_proxy_apk/raw/refs/heads/main/silver_proxy.apk).\n\nA resposta desse endpoint traz o estado atual do proxy e o √∫ltimo teste de conectividade.\n","security":[{"token":[]}],"responses":{"200":{"description":"Configura√ß√£o de proxy recuperada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"enabled":{"type":"boolean","description":"Indica se o proxy est√° habilitado"},"proxy_url":{"type":"string","description":"URL do proxy (mascarada na resposta)"},"last_test_at":{"type":"integer","description":"Timestamp (ms) do √∫ltimo teste"},"last_test_error":{"type":"string","description":"√öltimo erro de teste (se houver)"},"validation_error":{"type":"boolean","description":"Indica se o √∫ltimo teste resultou em erro"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"500":{"description":"Erro interno do servidor ao recuperar a configura√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}},"post":{"operationId":"updateProxyConfig","tags":["Proxy"],"summary":"Configurar ou alterar o proxy","description":"Permite habilitar ou trocar para:\n- Um proxy pr√≥prio (`proxy_url`), usando sua infraestrutura ou o aplicativo de celular para proxy pr√≥prio.\n- O proxy interno padr√£o (nenhum `proxy_url` enviado).\n\nSe nada for enviado, seguimos no proxy interno. A URL √© validada antes de salvar. A conex√£o pode ser reiniciada automaticamente para aplicar a mudan√ßa.\n\nOpcional: voc√™ pode usar seu celular android como proxy instalando o aplicativo disponibilizado pela uazapi em https://github.com/uazapi/silver_proxy_apk (APK direto: https://github.com/uazapi/silver_proxy_apk/raw/refs/heads/main/silver_proxy.apk).\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"enable":{"type":"boolean","description":"Define se o proxy deve ser habilitado; se `false`, remove o proxy atual","default":true},"proxy_url":{"type":"string","description":"URL do proxy a ser usado (obrigat√≥ria se `enable=true` e quiser usar um proxy pr√≥prio)","example":"http://usuario:senha@ip:porta"}},"required":["enable"]}}}},"responses":{"200":{"description":"Proxy configurado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"details":{"type":"string","example":"Proxy configurado"},"proxy":{"type":"object","properties":{"enabled":{"type":"boolean"},"proxy_url":{"type":"string","description":"URL mascarada do proxy salvo"},"last_test_at":{"type":"integer","description":"Timestamp (ms) do √∫ltimo teste"},"last_test_error":{"type":"string","description":"√öltimo erro de teste (se houver)"},"validation_error":{"type":"boolean","description":"Indica se o √∫ltimo teste resultou em erro"}}},"restart_requested":{"type":"boolean","description":"Indica se uma reinicializa√ß√£o da conex√£o foi solicitada para aplicar o proxy"}}}}}},"400":{"description":"Payload inv√°lido ou falha na valida√ß√£o do proxy","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Falha ao validar proxy: ..."}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"500":{"description":"Erro interno do servidor ao configurar o proxy","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}},"delete":{"operationId":"deleteProxyConfig","tags":["Proxy"],"summary":"Remover o proxy configurado","description":"Desativa e apaga o proxy personalizado, voltando ao comportamento padr√£o (proxy interno).\nPode reiniciar a conex√£o para aplicar a remo√ß√£o.\n","security":[{"token":[]}],"responses":{"200":{"description":"Configura√ß√£o de proxy removida com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"details":{"type":"string","example":"Proxy removido"},"proxy":{"type":"object","properties":{"enabled":{"type":"boolean"}}},"restart_requested":{"type":"boolean","description":"Indica se a conex√£o foi reiniciada para aplicar a mudan√ßa"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"500":{"description":"Erro interno do servidor ao deletar a configura√ß√£o de proxy","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/profile/name":{"post":{"operationId":"updateProfileName","tags":["Perfil"],"summary":"Altera o nome do perfil do WhatsApp","description":"Altera o nome de exibi√ß√£o do perfil da inst√¢ncia do WhatsApp.\n\nO endpoint realiza:\n- Atualiza o nome do perfil usando o WhatsApp AppState\n- Sincroniza a mudan√ßa com o servidor do WhatsApp\n- Retorna confirma√ß√£o da altera√ß√£o\n\n**Importante**: \n- A inst√¢ncia deve estar conectada ao WhatsApp\n- O nome ser√° vis√≠vel para todos os contatos\n- Pode haver um limite de altera√ß√µes por per√≠odo (conforme WhatsApp)\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string","description":"Novo nome do perfil do WhatsApp","example":"Minha Empresa - Atendimento","maxLength":25}}}}}},"responses":{"200":{"description":"Nome do perfil alterado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Nome do perfil alterado com sucesso"},"profile":{"type":"object","properties":{"name":{"type":"string","description":"Novo nome do perfil","example":"Minha Empresa - Atendimento"},"updated_at":{"type":"integer","description":"Timestamp da altera√ß√£o (Unix timestamp)","example":1704067200}}}}}}}},"400":{"description":"Dados inv√°lidos na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Nome muito longo ou inv√°lido"}}}}}},"401":{"description":"Sem sess√£o ativa","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"403":{"description":"A√ß√£o n√£o permitida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Limite de altera√ß√µes excedido ou conta com restri√ß√µes"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Erro ao alterar nome do perfil"}}}}}}}}},"/profile/image":{"post":{"operationId":"updateProfileImage","tags":["Perfil"],"summary":"Altera a imagem do perfil do WhatsApp","description":"Altera a imagem de perfil da inst√¢ncia do WhatsApp.\n\nO endpoint realiza:\n- Atualiza a imagem do perfil usando \n- Processa a imagem (URL, base64 ou comando de remo√ß√£o)\n- Sincroniza a mudan√ßa com o servidor do WhatsApp\n- Retorna confirma√ß√£o da altera√ß√£o\n\n**Importante**: \n- A inst√¢ncia deve estar conectada ao WhatsApp\n- A imagem ser√° vis√≠vel para todos os contatos\n- A imagem deve estar em formato JPEG e tamanho 640x640 pixels\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["image"],"properties":{"image":{"type":"string","description":"Imagem do perfil. Pode ser:\n- URL da imagem (http/https)\n- String base64 da imagem\n- \"remove\" ou \"delete\" para remover a imagem atual\n","example":"https://picsum.photos/640/640.jpg","oneOf":[{"description":"URL da imagem","example":"https://picsum.photos/640/640.jpg"},{"description":"Imagem em base64","example":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="},{"description":"Comando para remover imagem","example":"remove"}]}}}}}},"responses":{"200":{"description":"Imagem do perfil alterada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Imagem do perfil alterada com sucesso"},"profile":{"type":"object","properties":{"image_updated":{"type":"boolean","description":"Indica se a imagem foi atualizada","example":true},"image_removed":{"type":"boolean","description":"Indica se a imagem foi removida","example":false},"updated_at":{"type":"integer","description":"Timestamp da altera√ß√£o (Unix timestamp)","example":1704067200}}}}}}}},"400":{"description":"Dados inv√°lidos na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Formato de imagem inv√°lido ou URL inacess√≠vel"}}}}}},"401":{"description":"Sem sess√£o ativa","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"403":{"description":"A√ß√£o n√£o permitida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Limite de altera√ß√µes excedido ou conta com restri√ß√µes"}}}}}},"413":{"description":"Imagem muito grande","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Imagem muito grande, tamanho m√°ximo permitido excedido"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Erro ao alterar imagem do perfil"}}}}}}}}},"/instance":{"delete":{"operationId":"deleteInstance","tags":["Instancia"],"summary":"Deletar inst√¢ncia","description":"Remove a inst√¢ncia do sistema.\n","security":[{"token":[]}],"responses":{"200":{"description":"Inst√¢ncia deletada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Instance Deleted"},"info":{"type":"string","example":"O dispositivo foi desconectado com sucesso e a inst√¢ncia foi removida do banco de dados."}}}}}},"401":{"description":"Falha na autentica√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"N√£o autorizado - Token inv√°lido ou ausente"}}}}}},"404":{"description":"Inst√¢ncia n√£o encontrada","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Inst√¢ncia n√£o encontrada"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Falha ao deletar inst√¢ncia"}}}}}}}}},"/instance/privacy":{"get":{"operationId":"getInstancePrivacy","tags":["Instancia"],"summary":"Buscar configura√ß√µes de privacidade","description":"Busca as configura√ß√µes de privacidade atuais da inst√¢ncia do WhatsApp.\n\n**Importante - Diferen√ßa entre Status e Broadcast:**\n\n- **Status**: Refere-se ao recado personalizado que aparece embaixo do nome do usu√°rio (ex: \"Dispon√≠vel\", \"Ocupado\", texto personalizado)\n- **Broadcast**: Refere-se ao envio de \"stories/reels\" (fotos/v√≠deos tempor√°rios)\n\n**Limita√ß√£o**: As configura√ß√µes de privacidade do broadcast (stories/reels) n√£o est√£o dispon√≠veis para altera√ß√£o via API.\n\nRetorna todas as configura√ß√µes de privacidade como quem pode:\n- Adicionar aos grupos\n- Ver visto por √∫ltimo\n- Ver status (recado embaixo do nome)\n- Ver foto de perfil\n- Receber confirma√ß√£o de leitura\n- Ver status online\n- Fazer chamadas\n","responses":{"200":{"description":"Configura√ß√µes de privacidade obtidas com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"groupadd":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode adicionar aos grupos. Valores - all, contacts, contact_blacklist, none","example":"contacts"},"last":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver visto por √∫ltimo. Valores - all, contacts, contact_blacklist, none","example":"contacts"},"status":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver status (recado embaixo do nome). Valores - all, contacts, contact_blacklist, none","example":"contacts"},"profile":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver foto de perfil. Valores - all, contacts, contact_blacklist, none","example":"contacts"},"readreceipts":{"type":"string","enum":["all","none"],"description":"Confirma√ß√£o de leitura. Valores - all, none","example":"all"},"online":{"type":"string","enum":["all","match_last_seen"],"description":"Quem pode ver status online. Valores - all, match_last_seen","example":"all"},"calladd":{"type":"string","enum":["all","known"],"description":"Quem pode fazer chamadas. Valores - all, known","example":"all"}}},"examples":{"success":{"summary":"Configura√ß√µes de privacidade obtidas","value":{"groupadd":"contacts","last":"contacts","status":"contacts","profile":"contacts","readreceipts":"all","online":"all","calladd":"all"}}}}}},"401":{"description":"Token de autentica√ß√£o inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}}}},"post":{"tags":["Instancia"],"summary":"Alterar configura√ß√µes de privacidade","description":"Altera uma ou m√∫ltiplas configura√ß√µes de privacidade da inst√¢ncia do WhatsApp de forma otimizada.\n\n**Importante - Diferen√ßa entre Status e Broadcast:**\n\n- **Status**: Refere-se ao recado personalizado que aparece embaixo do nome do usu√°rio (ex: \"Dispon√≠vel\", \"Ocupado\", texto personalizado)\n- **Broadcast**: Refere-se ao envio de \"stories/reels\" (fotos/v√≠deos tempor√°rios)\n\n**Limita√ß√£o**: As configura√ß√µes de privacidade do broadcast (stories/reels) n√£o est√£o dispon√≠veis para altera√ß√£o via API.\n\n**Caracter√≠sticas:**\n- ‚úÖ **Efici√™ncia**: Altera apenas configura√ß√µes que realmente mudaram\n- ‚úÖ **Flexibilidade**: Pode alterar uma ou m√∫ltiplas configura√ß√µes na mesma requisi√ß√£o\n- ‚úÖ **Feedback completo**: Retorna todas as configura√ß√µes atualizadas\n\n**Formato de entrada:**\n```json\n{\n  \"groupadd\": \"contacts\",\n  \"last\": \"none\",\n  \"status\": \"contacts\"\n}\n```\n\n**Tipos de privacidade dispon√≠veis:**\n- `groupadd`: Quem pode adicionar aos grupos\n- `last`: Quem pode ver visto por √∫ltimo\n- `status`: Quem pode ver status (recado embaixo do nome)\n- `profile`: Quem pode ver foto de perfil\n- `readreceipts`: Confirma√ß√£o de leitura\n- `online`: Quem pode ver status online\n- `calladd`: Quem pode fazer chamadas\n\n**Valores poss√≠veis:**\n- `all`: Todos\n- `contacts`: Apenas contatos\n- `contact_blacklist`: Contatos exceto bloqueados\n- `none`: Ningu√©m\n- `match_last_seen`: Corresponder ao visto por √∫ltimo (apenas para online)\n- `known`: N√∫meros conhecidos (apenas para calladd)\n","operationId":"setPrivacySetting","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupadd":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode adicionar aos grupos. Valores - all, contacts, contact_blacklist, none"},"last":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver visto por √∫ltimo. Valores - all, contacts, contact_blacklist, none"},"status":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver status (recado embaixo do nome). Valores - all, contacts, contact_blacklist, none"},"profile":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver foto de perfil. Valores - all, contacts, contact_blacklist, none"},"readreceipts":{"type":"string","enum":["all","none"],"description":"Confirma√ß√£o de leitura. Valores - all, none"},"online":{"type":"string","enum":["all","match_last_seen"],"description":"Quem pode ver status online. Valores - all, match_last_seen"},"calladd":{"type":"string","enum":["all","known"],"description":"Quem pode fazer chamadas. Valores - all, known"}},"minProperties":1,"additionalProperties":false},"examples":{"single_setting":{"summary":"Alterar uma configura√ß√£o","value":{"groupadd":"contacts"}},"multiple_settings":{"summary":"Alterar m√∫ltiplas configura√ß√µes","value":{"groupadd":"contacts","last":"none","status":"contacts","profile":"contacts"}},"privacy_strict":{"summary":"Configura√ß√£o mais restritiva","value":{"groupadd":"none","last":"none","status":"contacts","profile":"contacts","readreceipts":"none"}}}}}},"responses":{"200":{"description":"Configura√ß√£o de privacidade alterada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"groupadd":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode adicionar aos grupos. Valores - all, contacts, contact_blacklist, none"},"last":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver visto por √∫ltimo. Valores - all, contacts, contact_blacklist, none"},"status":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver status (recado embaixo do nome). Valores - all, contacts, contact_blacklist, none"},"profile":{"type":"string","enum":["all","contacts","contact_blacklist","none"],"description":"Quem pode ver foto de perfil. Valores - all, contacts, contact_blacklist, none"},"readreceipts":{"type":"string","enum":["all","none"],"description":"Confirma√ß√£o de leitura. Valores - all, none"},"online":{"type":"string","enum":["all","match_last_seen"],"description":"Quem pode ver status online. Valores - all, match_last_seen"},"calladd":{"type":"string","enum":["all","known"],"description":"Quem pode fazer chamadas. Valores - all, known"}}},"examples":{"success":{"summary":"Configura√ß√µes atualizadas ap√≥s altera√ß√£o","value":{"groupadd":"contacts","last":"contacts","status":"contacts","profile":"contacts","readreceipts":"all","online":"all","calladd":"all"}}}}}},"400":{"description":"Dados de entrada inv√°lidos","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"examples":{"no_valid_settings":{"summary":"Nenhuma configura√ß√£o v√°lida encontrada","value":{"error":"No valid privacy settings found. Use format: {\"groupadd\": \"contacts\", \"last\": \"none\"}"}},"invalid_value_type":{"summary":"Valor deve ser string","value":{"error":"Value for groupadd must be a non-empty string"}},"invalid_privacy_type":{"summary":"Tipo de privacidade inv√°lido","value":{"error":"invalid privacy type: invalidtype. Valid types: groupadd, last, status, profile, readreceipts, online, calladd"}},"invalid_privacy_value":{"summary":"Valor de privacidade inv√°lido","value":{"error":"invalid privacy value: invalidvalue. Valid values: all, contacts, contact_blacklist, none, match_last_seen, known"}}}}}},"401":{"description":"Token de autentica√ß√£o inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}},"examples":{"no_session":{"summary":"Sem sess√£o ativa","value":{"error":"No session"}},"whatsapp_error":{"summary":"Erro do WhatsApp","value":{"error":"Failed to set privacy setting: context deadline exceeded"}}}}}}}}},"/instance/presence":{"post":{"operationId":"updateInstancePresence","tags":["Instancia"],"summary":"Atualizar status de presen√ßa da inst√¢ncia","description":"Atualiza o status de presen√ßa global da inst√¢ncia do WhatsApp. Este endpoint permite:\n1. Definir se a inst√¢ncia est√° dispon√≠vel (Aparece \"online\") ou indispon√≠vel\n2. Controlar o status de presen√ßa para todos os contatos\n3. Salvar o estado atual da presen√ßa na inst√¢ncia\n\nTipos de presen√ßa suportados:\n- available: Marca a inst√¢ncia como dispon√≠vel/online\n- unavailable: Marca a inst√¢ncia como indispon√≠vel/offline\n\n**Aten√ß√£o**:\n- O status de presen√ßa pode ser temporariamente alterado para \"available\" (online) em algumas situa√ß√µes internas da API, e com isso o visto por √∫ltimo tamb√©m pode ser atualizado.\n- Caso isso for um problema, considere alterar suas configura√ß√µes de privacidade no WhatsApp para n√£o mostrar o visto por √∫ltimo e/ou quem pode ver seu status \"online\".\n\n**‚ö†Ô∏è Importante - Limita√ß√£o do Presence \"unavailable\"**:\n- **Quando a API √© o √∫nico dispositivo ativo**: Confirma√ß√µes de entrega/leitura (ticks cinzas/azuis) n√£o s√£o enviadas nem recebidas\n- **Impacto**: Eventos `message_update` com status de entrega podem n√£o ser recebidos\n- **Solu√ß√£o**: Se precisar das confirma√ß√µes, mantenha WhatsApp Web ou aplicativo m√≥vel ativo ou use presence \"available\" \n\nExemplo de requisi√ß√£o:\n```json\n{\n  \"presence\": \"available\"\n}\n```\n\nExemplo de resposta:\n```json\n{\n  \"response\": \"Presence updated successfully\"\n}\n```\n\nErros comuns:\n- 401: Token inv√°lido ou expirado\n- 400: Valor de presen√ßa inv√°lido\n- 500: Erro ao atualizar presen√ßa\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"presence":{"type":"string","description":"Status de presen√ßa da inst√¢ncia","enum":["available","unavailable"],"example":"available"}},"required":["presence"]}}}},"responses":{"200":{"description":"Presen√ßa atualizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Presence updated successfully"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro","examples":["Invalid payload","Invalid presence value, use available or unavailable"]}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro interno","example":"No session"}}}}}}}}},"/send/text":{"post":{"operationId":"sendText","tags":["Enviar Mensagem"],"summary":"Enviar mensagem de texto","description":"Envia uma mensagem de texto para um contato ou grupo.\n\n## Recursos Espec√≠ficos\n\n- **Preview de links** com suporte a personaliza√ß√£o autom√°tica ou customizada\n- **Formata√ß√£o b√°sica** do texto\n- **Substitui√ß√£o autom√°tica de placeholders** din√¢micos\n\n## Campos Comuns\n\nEste endpoint suporta todos os **campos opcionais comuns** documentados na tag **\"Enviar Mensagem\"**, incluindo:\n`delay`, `readchat`, `readmessages`, `replyid`, `mentions`, `forward`, `track_source`, `track_id`, placeholders e envio para grupos.\n\n## Preview de Links\n\n### Preview Autom√°tico\n```json\n{\n  \"number\": \"5511999999999\",\n  \"text\": \"Confira: https://exemplo.com\",\n  \"linkPreview\": true\n}\n```\n\n### Preview Personalizado\n```json\n{\n  \"number\": \"5511999999999\",\n  \"text\": \"Confira nosso site! https://exemplo.com\",\n  \"linkPreview\": true,\n  \"linkPreviewTitle\": \"T√≠tulo Personalizado\",\n  \"linkPreviewDescription\": \"Uma descri√ß√£o personalizada do link\",\n  \"linkPreviewImage\": \"https://exemplo.com/imagem.jpg\",\n  \"linkPreviewLarge\": true\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"text":{"type":"string","description":"Texto da mensagem (aceita placeholders)","example":"Ol√° {{name}}! Como posso ajudar?"},"linkPreview":{"type":"boolean","description":"Ativa/desativa preview de links. Se true, procura automaticamente um link no texto para gerar preview.\n\nComportamento:\n- Se apenas linkPreview=true: gera preview autom√°tico do primeiro link encontrado no texto\n- Se fornecidos campos personalizados (title, description, image): usa os valores fornecidos\n- Se campos personalizados parciais: combina com dados autom√°ticos do link como fallback\n","example":true},"linkPreviewTitle":{"type":"string","description":"Define um t√≠tulo personalizado para o preview do link","example":"T√≠tulo Personalizado"},"linkPreviewDescription":{"type":"string","description":"Define uma descri√ß√£o personalizada para o preview do link","example":"Descri√ß√£o personalizada do link"},"linkPreviewImage":{"type":"string","description":"URL ou Base64 da imagem para usar no preview do link","example":"https://exemplo.com/imagem.jpg"},"linkPreviewLarge":{"type":"boolean","description":"Se true, gera um preview grande com upload da imagem. Se false, gera um preview pequeno sem upload","example":true},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"readchat":{"type":"boolean","description":"Marca conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio, durante o atraso apacer√° 'Digitando...'","example":1000},"forward":{"type":"boolean","description":"Marca a mensagem como encaminhada no WhatsApp","example":true},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna. √ötil para alto volume de mensagens.","example":false}},"required":["number","text"]},"examples":{"basic":{"summary":"Mensagem b√°sica","description":"Exemplo mais simples poss√≠vel","value":{"number":"5511999999999","text":"Ol√°! Como posso ajudar?"}},"withLinkPreview":{"summary":"Com preview autom√°tico","description":"Preview autom√°tico de link no texto","value":{"number":"5511999999999","text":"Confira: https://exemplo.com","linkPreview":true}},"customLinkPreview":{"summary":"Preview personalizado","description":"Preview com t√≠tulo, descri√ß√£o e imagem customizados","value":{"number":"5511999999999","text":"Confira nosso site! https://exemplo.com","linkPreview":true,"linkPreviewTitle":"T√≠tulo Personalizado","linkPreviewDescription":"Uma descri√ß√£o personalizada do link","linkPreviewImage":"https://exemplo.com/imagem.jpg","linkPreviewLarge":true}},"withPlaceholders":{"summary":"Com placeholders","description":"Texto com vari√°veis din√¢micas","value":{"number":"5511999999999","text":"Ol√° {{name}}! Sua empresa {{company}} est√° cadastrada."}}}}}},"responses":{"200":{"description":"Mensagem enviada com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Message sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing number or text"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"429":{"description":"Limite de requisi√ß√µes excedido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Rate limit exceeded"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send message"}}}}}}}}},"/send/media":{"post":{"operationId":"sendMedia","tags":["Enviar Mensagem"],"summary":"Enviar m√≠dia (imagem, v√≠deo, √°udio ou documento)","description":"Envia diferentes tipos de m√≠dia para um contato ou grupo. Suporta URLs ou arquivos base64.\n\n## Tipos de M√≠dia Suportados\n- **`image`**: Imagens (JPG preferencialmente)\n- **`video`**: V√≠deos (apenas MP4)\n- **`document`**: Documentos (PDF, DOCX, XLSX, etc)\n- **`audio`**: √Åudio comum (MP3 ou OGG)\n- **`myaudio`**: Mensagem de voz (alternativa ao PTT)\n- **`ptt`**: Mensagem de voz (Push-to-Talk)\n- **`ptv`**: Mensagem de v√≠deo (Push-to-Video)\n- **`sticker`**: Figurinha/Sticker\n\n## Recursos Espec√≠ficos\n- **Upload por URL ou base64**\n- **Caption/legenda** opcional com suporte a placeholders\n- **Nome personalizado** para documentos (`docName`)\n- **Gera√ß√£o autom√°tica de thumbnails**\n- **Compress√£o otimizada** conforme o tipo\n\n## Campos Comuns\n\nEste endpoint suporta todos os **campos opcionais comuns** documentados na tag **\"Enviar Mensagem\"**, incluindo:\n`delay`, `readchat`, `readmessages`, `replyid`, `mentions`, `forward`, `track_source`, `track_id`, placeholders e envio para grupos.\n\n## Exemplos B√°sicos\n\n### Imagem Simples\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"image\",\n  \"file\": \"https://exemplo.com/foto.jpg\"\n}\n```\n\n### Documento com Nome\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"document\",\n  \"file\": \"https://exemplo.com/contrato.pdf\",\n  \"docName\": \"Contrato.pdf\",\n  \"text\": \"Segue o documento solicitado\"\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"type":{"type":"string","description":"Tipo de m√≠dia (image, video, document, audio, myaudio, ptt, ptv, sticker)","enum":["image","video","document","audio","myaudio","ptt","ptv","sticker"],"example":"image"},"file":{"type":"string","description":"URL ou base64 do arquivo","example":"https://exemplo.com/imagem.jpg"},"text":{"type":"string","description":"Texto descritivo (caption) - aceita placeholders","example":"Veja esta foto!"},"docName":{"type":"string","description":"Nome do arquivo (apenas para documents)","example":"relatorio.pdf"},"thumbnail":{"type":"string","description":"URL ou base64 de thumbnail personalizado para v√≠deos e documentos","example":"https://exemplo.com/thumb.jpg"},"mimetype":{"type":"string","description":"MIME type do arquivo (opcional, detectado automaticamente)","example":"application/pdf"},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"readchat":{"type":"boolean","description":"Marca conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio, durante o atraso apacer√° 'Digitando...' ou 'Gravando √°udio...'","example":1000},"forward":{"type":"boolean","description":"Marca a mensagem como encaminhada no WhatsApp","example":true},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna","example":false}},"required":["number","type","file"]},"examples":{"image":{"summary":"Imagem","description":"Envio de imagem simples","value":{"number":"5511999999999","type":"image","file":"https://exemplo.com/foto.jpg"}},"imageWithCaption":{"summary":"Imagem com legenda","description":"Imagem com texto descritivo","value":{"number":"5511999999999","type":"image","file":"https://exemplo.com/foto.jpg","text":"Veja esta foto!"}},"document":{"summary":"Documento","description":"Documento PDF com nome personalizado","value":{"number":"5511999999999","type":"document","file":"https://exemplo.com/contrato.pdf","docName":"Contrato.pdf","text":"Segue o documento solicitado"}},"audio":{"summary":"Mensagem de voz","description":"Arquivo de √°udio como mensagem de voz","value":{"number":"5511999999999","type":"ptt","file":"https://exemplo.com/audio.ogg"}},"video":{"summary":"V√≠deo","description":"Arquivo de v√≠deo com legenda","value":{"number":"5511999999999","type":"video","file":"https://exemplo.com/video.mp4","text":"Confira este v√≠deo!"}},"ptv":{"summary":"Mensagem de v√≠deo","description":"Arquivo de v√≠deo como mensagem de v√≠deo","value":{"number":"5511999999999","type":"ptv","file":"https://exemplo.com/video.mp4"}},"sticker":{"summary":"Figurinha","description":"Envio de figurinha/sticker","value":{"number":"5511999999999","type":"sticker","file":"https://exemplo.com/sticker.webp"}}}}}},"responses":{"200":{"description":"M√≠dia enviada com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Media sent successfully"},"fileUrl":{"type":"string","example":"https://mmg.whatsapp.net/..."}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid media type or file format"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"413":{"description":"Arquivo muito grande","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"File size exceeds limit"}}}}}},"415":{"description":"Formato de m√≠dia n√£o suportado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unsupported media format"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to upload media"}}}}}}}}},"/send/contact":{"post":{"operationId":"sendContact","tags":["Enviar Mensagem"],"summary":"Enviar cart√£o de contato (vCard)","description":"Envia um cart√£o de contato (vCard) para um contato ou grupo.\n\n## Recursos Espec√≠ficos\n\n- **vCard completo** com nome, telefones, organiza√ß√£o, email e URL\n- **M√∫ltiplos n√∫meros de telefone** (separados por v√≠rgula)\n- **Cart√£o clic√°vel** no WhatsApp para salvar na agenda\n- **Informa√ß√µes profissionais** (organiza√ß√£o/empresa)\n\n## Campos Comuns\n\nEste endpoint suporta todos os **campos opcionais comuns** documentados na tag **\"Enviar Mensagem\"**, incluindo:\n`delay`, `readchat`, `readmessages`, `replyid`, `mentions`, `forward`, `track_source`, `track_id`, placeholders e envio para grupos.\n\n## Exemplo B√°sico\n```json\n{\n  \"number\": \"5511999999999\",\n  \"fullName\": \"Jo√£o Silva\",\n  \"phoneNumber\": \"5511999999999,5511888888888\",\n  \"organization\": \"Empresa XYZ\",\n  \"email\": \"joao.silva@empresa.com\",\n  \"url\": \"https://empresa.com/joao\"\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"fullName":{"type":"string","description":"Nome completo do contato","example":"Jo√£o Silva"},"phoneNumber":{"type":"string","description":"N√∫meros de telefone (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"organization":{"type":"string","description":"Nome da organiza√ß√£o/empresa","example":"Empresa XYZ"},"email":{"type":"string","description":"Endere√ßo de email","example":"joao@empresa.com"},"url":{"type":"string","description":"URL pessoal ou da empresa","example":"https://empresa.com/joao"},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"readchat":{"type":"boolean","description":"Marca conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio, durante o atraso apacer√° 'Digitando...'","example":1000},"forward":{"type":"boolean","description":"Marca a mensagem como encaminhada no WhatsApp","example":true},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna","example":false}},"required":["number","fullName","phoneNumber"]}}}},"responses":{"200":{"description":"Cart√£o de contato enviado com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Contact card sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing required fields"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"429":{"description":"Limite de requisi√ß√µes excedido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Rate limit exceeded"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send contact card"}}}}}}}}},"/send/location":{"post":{"operationId":"sendLocation","tags":["Enviar Mensagem"],"summary":"Enviar localiza√ß√£o geogr√°fica","description":"Envia uma localiza√ß√£o geogr√°fica para um contato ou grupo.\n\n## Recursos Espec√≠ficos\n\n- **Coordenadas precisas** (latitude e longitude obrigat√≥rias)\n- **Nome do local** para identifica√ß√£o\n- **Endere√ßo completo** para exibi√ß√£o detalhada\n- **Mapa interativo** no WhatsApp para navega√ß√£o\n- **Pin personalizado** com nome do local\n\n## Campos Comuns\n\nEste endpoint suporta todos os **campos opcionais comuns** documentados na tag **\"Enviar Mensagem\"**, incluindo:\n`delay`, `readchat`, `readmessages`, `replyid`, `mentions`, `forward`, `track_source`, `track_id`, placeholders e envio para grupos.\n\n## Exemplo B√°sico\n```json\n{\n  \"number\": \"5511999999999\",\n  \"name\": \"Maracan√£\",\n  \"address\": \"Av. Pres. Castelo Branco - Maracan√£, Rio de Janeiro - RJ\",\n  \"latitude\": -22.912982815767986,\n  \"longitude\": -43.23028153499254\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"name":{"type":"string","description":"Nome do local","example":"MASP"},"address":{"type":"string","description":"Endere√ßo do local","example":"Av. Paulista, 1578 - Bela Vista, S√£o Paulo - SP"},"latitude":{"type":"number","description":"Latitude (-90 a 90)","example":-23.5616},"longitude":{"type":"number","description":"Longitude (-180 a 180)","example":-46.6562},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"readchat":{"type":"boolean","description":"Marca conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio, durante o atraso apacer√° 'Digitando...'","example":1000},"forward":{"type":"boolean","description":"Marca a mensagem como encaminhada no WhatsApp","example":true},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna","example":false}},"required":["number","latitude","longitude"]}}}},"responses":{"200":{"description":"Localiza√ß√£o enviada com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Location sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid coordinates or missing number"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"429":{"description":"Limite de requisi√ß√µes excedido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Rate limit exceeded"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send location"}}}}}}}}},"/message/presence":{"post":{"operationId":"sendPresence","tags":["Enviar Mensagem"],"summary":"Enviar atualiza√ß√£o de presen√ßa","description":"Envia uma atualiza√ß√£o de presen√ßa para um contato ou grupo de forma **ass√≠ncrona**.\n\n## üîÑ Comportamento Ass√≠ncrono:\n- **Execu√ß√£o independente**: A presen√ßa √© gerenciada em background, n√£o bloqueia o retorno da API\n- **Limite m√°ximo**: 5 minutos de dura√ß√£o (300 segundos)\n- **Tick de atualiza√ß√£o**: Reenvia a presen√ßa a cada 10 segundos\n- **Cancelamento autom√°tico**: Presen√ßa √© cancelada automaticamente ao enviar uma mensagem para o mesmo chat\n\n## üì± Tipos de presen√ßa suportados:\n- **composing**: Indica que voc√™ est√° digitando uma mensagem\n- **recording**: Indica que voc√™ est√° gravando um √°udio\n- **paused**: Remove/cancela a indica√ß√£o de presen√ßa atual\n\n## ‚è±Ô∏è Controle de dura√ß√£o:\n- **Sem delay**: Usa limite padr√£o de 5 minutos\n- **Com delay**: Usa o valor especificado (m√°ximo 5 minutos)\n- **Cancelamento**: Envio de mensagem cancela presen√ßa automaticamente\n\n## üìã Exemplos de uso:\n\n### Digitar por 30 segundos:\n```json\n{\n  \"number\": \"5511999999999\",\n  \"presence\": \"composing\",\n  \"delay\": 30000\n}\n```\n\n### Gravar √°udio por 1 minuto:\n```json\n{\n  \"number\": \"5511999999999\",\n  \"presence\": \"recording\",\n  \"delay\": 60000\n}\n```\n\n### Cancelar presen√ßa atual:\n```json\n{\n  \"number\": \"5511999999999\",\n  \"presence\": \"paused\"\n}\n```\n\n### Usar limite m√°ximo (5 minutos):\n```json\n{\n  \"number\": \"5511999999999\",\n  \"presence\": \"composing\"\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do destinat√°rio no formato internacional (ex: 5511999999999)","example":"5511999999999"},"presence":{"type":"string","description":"Tipo de presen√ßa a ser enviada","enum":["composing","recording","paused"],"example":"composing"},"delay":{"type":"integer","description":"Dura√ß√£o em milissegundos que a presen√ßa ficar√° ativa (m√°ximo 5 minutos = 300000ms).\nSe n√£o informado ou valor maior que 5 minutos, usa o limite padr√£o de 5 minutos.\nA presen√ßa √© reenviada a cada 10 segundos durante este per√≠odo.\n","maximum":300000,"example":30000}},"required":["number","presence"]}}}},"responses":{"200":{"description":"Presen√ßa atualizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Chat presence sent successfully"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro","example":"N√∫mero inv√°lido ou tipo de presen√ßa inv√°lido"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro de autentica√ß√£o","example":"Token inv√°lido ou expirado"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro interno","example":"Erro ao enviar presen√ßa"}}}}}}}}},"/send/status":{"post":{"operationId":"sendStatus","tags":["Enviar Mensagem"],"summary":"Enviar Stories (Status)","description":"Envia um story (status) com suporte para texto, imagem, v√≠deo e √°udio.\n\n**Suporte a campos de rastreamento**: Este endpoint tamb√©m suporta `track_source` e `track_id` documentados na tag **\"Enviar Mensagem\"**.\n\n## Tipos de Status\n- text: Texto com estilo e cor de fundo\n- image: Imagens com legenda opcional\n- video: V√≠deos com thumbnail e legenda\n- audio: √Åudio normal ou mensagem de voz (PTT)\n\n## Cores de Fundo\n- 1-3: Tons de amarelo\n- 4-6: Tons de verde\n- 7-9: Tons de azul\n- 10-12: Tons de lil√°s\n- 13: Magenta\n- 14-15: Tons de rosa\n- 16: Marrom claro\n- 17-19: Tons de cinza (19 √© o padr√£o)\n\n## Fontes (para texto)\n- 0: Padr√£o \n- 1-8: Estilos alternativos\n\n## Limites\n- Texto: M√°ximo 656 caracteres\n- Imagem: JPG, PNG, GIF\n- V√≠deo: MP4, MOV\n- √Åudio: MP3, OGG, WAV (convertido para OGG/OPUS)\n\n## Exemplo\n```json\n{\n  \"type\": \"text\",\n  \"text\": \"Novidades chegando!\",\n  \"background_color\": 7,\n  \"font\": 1\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","enum":["text","image","video","audio","myaudio","ptt"],"description":"Tipo do status","example":"text"},"text":{"type":"string","description":"Texto principal ou legenda","example":"Novidades chegando!"},"background_color":{"type":"integer","minimum":1,"maximum":19,"description":"C√≥digo da cor de fundo","example":7},"font":{"type":"integer","minimum":0,"maximum":8,"description":"Estilo da fonte (apenas para type=text)","example":1},"file":{"type":"string","description":"URL ou Base64 do arquivo de m√≠dia","example":"https://example.com/video.mp4"},"thumbnail":{"type":"string","description":"URL ou Base64 da miniatura (opcional para v√≠deos)","example":"https://example.com/thumb.jpg"},"mimetype":{"type":"string","description":"MIME type do arquivo (opcional)","example":"video/mp4"},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"readchat":{"type":"boolean","description":"Marca conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio","example":1000},"forward":{"type":"boolean","description":"Marca a mensagem como encaminhada no WhatsApp","example":false},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna","example":false},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"}},"required":["type"]}}}},"responses":{"200":{"description":"Status enviado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"Id":{"type":"string","example":"ABCD1234"},"content":{"type":"object","description":"Conte√∫do processado da mensagem"},"messageTimestamp":{"type":"integer","example":1672531200000},"status":{"type":"string","example":"Pending"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Text too long"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to upload media"}}}}}}}}},"/send/menu":{"post":{"operationId":"sendMenu","tags":["Enviar Mensagem"],"summary":"Enviar menu interativo (bot√µes, carrosel, lista ou enquete)","description":"Este endpoint oferece uma interface unificada para envio de quatro tipos principais de mensagens interativas:\n- Bot√µes: Para a√ß√µes r√°pidas e diretas\n- Carrosel de Bot√µes: Para uma lista horizontal de bot√µes com imagens\n- Listas: Para menus organizados em se√ß√µes\n- Enquetes: Para coleta de opini√µes e vota√ß√µes\n\n**Suporte a campos de rastreamento**: Este endpoint tamb√©m suporta `track_source` e `track_id` documentados na tag **\"Enviar Mensagem\"**.\n\n## Estrutura Base do Payload\n\nTodas as requisi√ß√µes seguem esta estrutura base:\n\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"button|list|poll|carousel\",\n  \"text\": \"Texto principal da mensagem\",\n  \"choices\": [\"op√ß√µes baseadas no tipo escolhido\"],\n  \"footerText\": \"Texto do rodap√© (opcional para bot√µes e listas)\",\n  \"listButton\": \"Texto do bot√£o (para listas)\",\n  \"selectableCount\": \"N√∫mero de op√ß√µes selecion√°veis (apenas para enquetes)\"\n}\n```\n\n## Tipos de Mensagens Interativas\n\n### 1. Bot√µes (type: \"button\")\n\nCria bot√µes interativos com diferentes funcionalidades de a√ß√£o.\n\n#### Campos Espec√≠ficos\n- `footerText`: Texto opcional exibido abaixo da mensagem principal\n- `choices`: Array de op√ß√µes que ser√£o convertidas em bot√µes\n\n#### Formatos de Bot√µes\nCada bot√£o pode ser configurado usando `|` (pipe) ou `\\n` (quebra de linha) como separadores:\n\n- **Bot√£o de Resposta**: \n  - `\"texto|id\"` ou \n  - `\"texto\\nid\"` ou \n  - `\"texto\"` (ID ser√° igual ao texto)\n\n- **Bot√£o de C√≥pia**: \n  - `\"texto|copy:c√≥digo\"` ou \n  - `\"texto\\ncopy:c√≥digo\"`\n\n- **Bot√£o de Chamada**: \n  - `\"texto|call:+5511999999999\"` ou \n  - `\"texto\\ncall:+5511999999999\"`\n\n- **Bot√£o de URL**: \n  - `\"texto|https://exemplo.com\"` ou \n  - `\"texto|url:https://exemplo.com\"`\n\n#### Bot√µes com Imagem\nPara adicionar uma imagem aos bot√µes, use o campo `imageButton` no payload:\n\n#### Exemplo com Imagem\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"button\",\n  \"text\": \"Escolha um produto:\",\n  \"imageButton\": \"https://exemplo.com/produto1.jpg\",\n  \"choices\": [\n    \"Produto A|prod_a\",\n    \"Mais Info|https://exemplo.com/produto-a\",\n    \"Produto B|prod_b\",\n    \"Ligar|call:+5511999999999\"\n  ],\n  \"footerText\": \"Produtos em destaque\"\n}\n```\n\n> **Suporte**: O campo `imageButton` aceita URLs ou imagens em base64.\n\n#### Exemplo Completo\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"button\",\n  \"text\": \"Como podemos ajudar?\",\n  \"choices\": [\n    \"Suporte T√©cnico|suporte\",\n    \"Fazer Pedido|pedido\",\n    \"Nosso Site|https://exemplo.com\",\n    \"Falar Conosco|call:+5511999999999\"\n  ],\n  \"footerText\": \"Escolha uma das op√ß√µes abaixo\"\n}\n```\n\n#### Limita√ß√µes e Compatibilidade\n> **Importante**: Ao combinar bot√µes de resposta com outros tipos (call, url, copy) na mesma mensagem, ser√° exibido o aviso: \"N√£o √© poss√≠vel exibir esta mensagem no WhatsApp Web. Abra o WhatsApp no seu celular para visualiz√°-la.\"\n\n### 2. Listas (type: \"list\")\n\nCria menus organizados em se√ß√µes com itens selecion√°veis.\n\n#### Campos Espec√≠ficos\n- `listButton`: Texto do bot√£o que abre a lista\n- `footerText`: Texto opcional do rodap√©\n- `choices`: Array com se√ß√µes e itens da lista\n\n#### Formato das Choices\n- `\"[T√≠tulo da Se√ß√£o]\"`: Inicia uma nova se√ß√£o\n- `\"texto|id|descri√ß√£o\"`: Item da lista com:\n  - texto: Label do item\n  - id: Identificador √∫nico, opcional\n  - descri√ß√£o: Texto descritivo adicional e opcional\n\n#### Exemplo Completo\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"list\",\n  \"text\": \"Cat√°logo de Produtos\",\n  \"choices\": [\n    \"[Eletr√¥nicos]\",\n    \"Smartphones|phones|√öltimos lan√ßamentos\",\n    \"Notebooks|notes|Modelos 2024\",\n    \"[Acess√≥rios]\",\n    \"Fones|fones|Bluetooth e com fio\",\n    \"Capas|cases|Prote√ß√£o para seu device\"\n  ],\n  \"listButton\": \"Ver Cat√°logo\",\n  \"footerText\": \"Pre√ßos sujeitos a altera√ß√£o\"\n}\n```\n\n### 3. Enquetes (type: \"poll\")\n\nCria enquetes interativas para vota√ß√£o.\n\n#### Campos Espec√≠ficos\n- `selectableCount`: N√∫mero de op√ß√µes que podem ser selecionadas (padr√£o: 1)\n- `choices`: Array simples com as op√ß√µes de voto\n\n#### Exemplo Completo\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"poll\",\n  \"text\": \"Qual hor√°rio prefere para atendimento?\",\n  \"choices\": [\n    \"Manh√£ (8h-12h)\",\n    \"Tarde (13h-17h)\",\n    \"Noite (18h-22h)\"\n  ],\n  \"selectableCount\": 1\n}\n```\n\n### 4. Carousel (type: \"carousel\")\n\nCria um carrossel de cart√µes com imagens e bot√µes interativos.\n\n#### Campos Espec√≠ficos\n- `choices`: Array com elementos do carrossel na seguinte ordem:\n  - `[Texto do cart√£o]`: Texto do cart√£o entre colchetes\n  - `{URL ou base64 da imagem}`: Imagem entre chaves\n  - Bot√µes do cart√£o (um por linha):\n    - `\"texto|copy:c√≥digo\"` para bot√£o de copiar\n    - `\"texto|https://url\"` para bot√£o de link\n    - `\"texto|call:+n√∫mero\"` para bot√£o de liga√ß√£o\n\n#### Exemplo Completo\n```json\n{\n  \"number\": \"5511999999999\",\n  \"type\": \"carousel\",\n  \"text\": \"Conhe√ßa nossos produtos\",\n  \"choices\": [\n    \"[Smartphone XYZ\\nO mais avan√ßado smartphone da linha]\",\n    \"{https://exemplo.com/produto1.jpg}\",\n    \"Copiar C√≥digo|copy:PROD123\",\n    \"Ver no Site|https://exemplo.com/xyz\",\n    \"Fale Conosco|call:+5511999999999\",\n    \"[Notebook ABC\\nO notebook ideal para profissionais]\",\n    \"{https://exemplo.com/produto2.jpg}\",\n    \"Copiar C√≥digo|copy:NOTE456\",\n    \"Comprar Online|https://exemplo.com/abc\",\n    \"Suporte|call:+5511988888888\"\n  ]\n}\n```\n\n> **Nota**: Criamos outro endpoint para carrossel: `/send/carousel`, funciona da mesma forma, mas com outro formato de payload. Veja o que √© mais f√°cil para voc√™.\n\n## Termos de uso\n\nOs recursos de bot√µes interativos e listas podem ser descontinuados a qualquer momento sem aviso pr√©vio. N√£o nos responsabilizamos por quaisquer altera√ß√µes ou indisponibilidade destes recursos.\n\n### Alternativas e Compatibilidade\n\nConsiderando a natureza din√¢mica destes recursos, nosso endpoint foi projetado para facilitar a migra√ß√£o entre diferentes tipos de mensagens (bot√µes, listas e enquetes). \n\nRecomendamos criar seus fluxos de forma flex√≠vel, preparados para alternar entre os diferentes tipos.\n\nEm caso de descontinuidade de algum recurso, voc√™ poder√° facilmente migrar para outro tipo de mensagem apenas alterando o campo \"type\" no payload, mantendo a mesma estrutura de choices.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"type":{"type":"string","description":"Tipo do menu (button, list, poll, carousel)","enum":["button","list","poll","carousel"],"example":"list"},"text":{"type":"string","description":"Texto principal (aceita placeholders)","example":"Escolha uma op√ß√£o:"},"footerText":{"type":"string","description":"Texto do rodap√© (opcional)","example":"Menu de servi√ßos"},"listButton":{"type":"string","description":"Texto do bot√£o principal","example":"Ver op√ß√µes"},"selectableCount":{"type":"integer","description":"N√∫mero m√°ximo de op√ß√µes selecion√°veis (para enquetes)","example":1},"choices":{"type":"array","description":"Lista de op√ß√µes. Use [T√≠tulo] para se√ß√µes em listas","items":{"type":"string"},"example":["[Eletr√¥nicos]","Smartphones|phones|√öltimos lan√ßamentos","Notebooks|notes|Modelos 2024","[Acess√≥rios]","Fones|fones|Bluetooth e com fio","Capas|cases|Prote√ß√£o para seu device"]},"imageButton":{"type":"string","description":"URL da imagem para bot√µes (recomendado para type: button)","example":"https://exemplo.com/imagem-botao.jpg"},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"readchat":{"type":"boolean","description":"Marca conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio, durante o atraso apacer√° 'Digitando...'","example":1000},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna","example":false}},"required":["number","type","text","choices"]}}}},"responses":{"200":{"description":"Menu enviado com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Menu sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing required fields or invalid menu type"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"429":{"description":"Limite de requisi√ß√µes excedido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Rate limit exceeded"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send menu"}}}}}}}}},"/send/carousel":{"post":{"operationId":"sendCarousel","tags":["Enviar Mensagem"],"summary":"Enviar carrossel de m√≠dia com bot√µes","description":"Este endpoint permite enviar um carrossel com imagens e bot√µes interativos.\nFunciona de maneira igual ao endpoint `/send/menu` com type: carousel, por√©m usando outro formato de payload.\n\n## Campos Comuns\n\nEste endpoint suporta todos os **campos opcionais comuns** documentados na tag **\"Enviar Mensagem\"**, incluindo:\n`delay`, `readchat`, `readmessages`, `replyid`, `mentions`, `forward`, `track_source`, `track_id`, placeholders e envio para grupos.\n\n## Estrutura do Payload\n\n```json\n{\n  \"number\": \"5511999999999\",\n  \"text\": \"Texto principal\",\n  \"carousel\": [\n    {\n      \"text\": \"Texto do cart√£o\",\n      \"image\": \"URL da imagem\",\n      \"buttons\": [\n        {\n          \"id\": \"resposta1\",\n          \"text\": \"Texto do bot√£o\",\n          \"type\": \"REPLY\"\n        }\n      ]\n    }\n  ],\n  \"delay\": 1000,\n  \"readchat\": true\n}\n```\n\n## Tipos de Bot√µes\n\n- `REPLY`: Bot√£o de resposta r√°pida\n  - Quando clicado, envia o valor do id como resposta ao chat\n  - O id ser√° o texto enviado como resposta\n\n- `URL`: Bot√£o com link\n  - Quando clicado, abre a URL especificada\n  - O id deve conter a URL completa (ex: https://exemplo.com)\n\n- `COPY`: Bot√£o para copiar texto\n  - Quando clicado, copia o texto para a √°rea de transfer√™ncia\n  - O id ser√° o texto que ser√° copiado\n\n- `CALL`: Bot√£o para realizar chamada\n  - Quando clicado, inicia uma chamada telef√¥nica\n  - O id deve conter o n√∫mero de telefone\n\n## Exemplo de Bot√µes\n```json\n{\n  \"buttons\": [\n    {\n      \"id\": \"Sim, quero comprar!\",\n      \"text\": \"Confirmar Compra\",\n      \"type\": \"REPLY\"\n    },\n    {\n      \"id\": \"https://exemplo.com/produto\",\n      \"text\": \"Ver Produto\",\n      \"type\": \"URL\"\n    },\n    {\n      \"id\": \"CUPOM20\",\n      \"text\": \"Copiar Cupom\",\n      \"type\": \"COPY\"\n    },\n    {\n      \"id\": \"5511999999999\",\n      \"text\": \"Falar com Vendedor\",\n      \"type\": \"CALL\"\n    }\n  ]\n}\n```\n\n## Exemplo Completo de Carrossel\n```json\n{\n  \"number\": \"5511999999999\",\n  \"text\": \"Nossos Produtos em Destaque\",\n  \"carousel\": [\n    {\n      \"text\": \"Smartphone XYZ\\nO mais avan√ßado smartphone da linha\",\n      \"image\": \"https://exemplo.com/produto1.jpg\",\n      \"buttons\": [\n        {\n          \"id\": \"SIM_COMPRAR_XYZ\",\n          \"text\": \"Comprar Agora\",\n          \"type\": \"REPLY\"\n        },\n        {\n          \"id\": \"https://exemplo.com/xyz\",\n          \"text\": \"Ver Detalhes\",\n          \"type\": \"URL\"\n        }\n      ]\n    },\n    {\n      \"text\": \"Cupom de Desconto\\nGanhe 20% OFF em qualquer produto\",\n      \"image\": \"https://exemplo.com/cupom.jpg\",\n      \"buttons\": [\n        {\n          \"id\": \"DESCONTO20\",\n          \"text\": \"Copiar Cupom\",\n          \"type\": \"COPY\"\n        },\n        {\n          \"id\": \"5511999999999\",\n          \"text\": \"Falar com Vendedor\",\n          \"type\": \"CALL\"\n        }\n      ]\n    }\n  ],\n  \"delay\": 0,\n  \"readchat\": true\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"text":{"type":"string","description":"Texto principal da mensagem","example":"Nossos Produtos em Destaque"},"carousel":{"type":"array","description":"Array de cart√µes do carrossel","items":{"type":"object","properties":{"text":{"type":"string","description":"Texto do cart√£o","example":"Smartphone XYZ\nO mais avan√ßado smartphone da linha"},"image":{"type":"string","description":"URL da imagem (opcional)","example":"https://exemplo.com/produto1.jpg"},"video":{"type":"string","description":"URL do v√≠deo (alternativa √† imagem)","example":"https://exemplo.com/produto1.mp4"},"document":{"type":"string","description":"URL do documento (alternativa √† imagem)","example":"https://exemplo.com/catalogo.pdf"},"filename":{"type":"string","description":"Nome do arquivo para documentos","example":"Catalogo.pdf"},"buttons":{"type":"array","description":"Array de bot√µes do cart√£o","items":{"type":"object","properties":{"id":{"type":"string","description":"ID do bot√£o","example":"buy_xyz"},"text":{"type":"string","description":"Texto exibido no bot√£o","example":"Comprar Agora"},"type":{"type":"string","description":"Tipo do bot√£o:\n* REPLY - O id ser√° enviado como resposta ao chat\n* URL - O id deve ser a URL completa que ser√° aberta\n* COPY - O id ser√° o texto copiado para √°rea de transfer√™ncia\n* CALL - O id deve ser o n√∫mero de telefone para a chamada\n","enum":["REPLY","URL","CALL","COPY"],"example":"REPLY"}}}}},"required":["text","buttons"]}},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio","example":1000},"readchat":{"type":"boolean","description":"Marca conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"forward":{"type":"boolean","description":"Marca a mensagem como encaminhada no WhatsApp","example":false},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna","example":false},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"}},"required":["number","text","carousel"]}}}},"responses":{"200":{"description":"Carrossel enviado com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Carousel sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing required fields or invalid card format"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send carousel"}}}}}}}}},"/send/location-button":{"post":{"operationId":"sendLocationButton","tags":["Enviar Mensagem"],"summary":"Solicitar localiza√ß√£o do usu√°rio","description":"Este endpoint envia uma mensagem com um bot√£o que solicita a localiza√ß√£o do usu√°rio.\nQuando o usu√°rio clica no bot√£o, o WhatsApp abre a interface para compartilhar a localiza√ß√£o atual.\n\n## Campos Comuns\n\nEste endpoint suporta todos os **campos opcionais comuns** documentados na tag **\"Enviar Mensagem\"**, incluindo:\n`delay`, `readchat`, `readmessages`, `replyid`, `mentions`, `forward`, `track_source`, `track_id`, placeholders e envio para grupos.\n\n## Estrutura do Payload\n\n```json\n{\n  \"number\": \"5511999999999\",\n  \"text\": \"Por favor, compartilhe sua localiza√ß√£o\",\n  \"delay\": 0,\n  \"readchat\": true\n}\n```\n\n## Exemplo de Uso\n\n```json\n{\n  \"number\": \"5511999999999\",\n  \"text\": \"Para continuar o atendimento, clique no bot√£o abaixo e compartilhe sua localiza√ß√£o\"\n}\n```\n\n> **Nota**: O bot√£o de localiza√ß√£o √© adicionado automaticamente √† mensagem\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"text":{"type":"string","description":"Texto da mensagem que ser√° exibida","example":"Por favor, compartilhe sua localiza√ß√£o"},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio","example":0},"readchat":{"type":"boolean","description":"Se deve marcar a conversa como lida ap√≥s envio","example":true},"readmessages":{"type":"boolean","description":"Marca √∫ltimas mensagens recebidas como lidas","example":true},"replyid":{"type":"string","description":"ID da mensagem para responder","example":"3EB0538DA65A59F6D8A251"},"mentions":{"type":"string","description":"N√∫meros para mencionar (separados por v√≠rgula)","example":"5511999999999,5511888888888"},"async":{"type":"boolean","description":"Se true, envia a mensagem de forma ass√≠ncrona via fila interna","example":false},"track_source":{"type":"string","description":"Origem do rastreamento da mensagem","example":"chatwoot"},"track_id":{"type":"string","description":"ID para rastreamento da mensagem (aceita valores duplicados)","example":"msg_123456789"}},"required":["number","text"]}}}},"responses":{"200":{"description":"Localiza√ß√£o enviada com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Location sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing required fields or invalid coordinates"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send location"}}}}}}}}},"/send/request-payment":{"post":{"operationId":"sendRequestPayment","tags":["Enviar Mensagem"],"summary":"Solicitar pagamento","description":"Envia uma solicita√ß√£o de pagamento com o bot√£o nativo **\"Revisar e pagar\"** do WhatsApp.\nO fluxo suporta PIX (est√°tico, din√¢mico ou desabilitado), boleto, link de pagamento e cart√£o,\ncombinando tudo em uma √∫nica mensagem interativa.\n\n## Como funciona\n- Define o valor em `amount` (BRL por padr√£o) e opcionalmente personaliza t√≠tulo, texto e nota adicional.\n- Por padr√£o exige `pixKey`.\n- O arquivo apontado por `fileUrl` √© anexado como documento (boleto ou fatura em PDF, por exemplo).\n- `paymentLink` habilita o bot√£o externo.\n\n\n\n## Campos comuns\nEste endpoint tamb√©m suporta os campos padr√£o: `delay`, `readchat`, `readmessages`, `replyid`,\n`mentions`, `track_source`, `track_id` e `async`.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"title":{"type":"string","description":"T√≠tulo que aparece no cabe√ßalho do fluxo","example":"Detalhes do pedido"},"text":{"type":"string","description":"Mensagem exibida no corpo do fluxo","example":"Pedido #123 pronto para pagamento"},"footer":{"type":"string","description":"Texto do rodap√© da mensagem","example":"Loja Exemplo"},"itemName":{"type":"string","description":"Nome do item principal listado no fluxo","example":"Assinatura Plano Ouro"},"invoiceNumber":{"type":"string","description":"Identificador ou n√∫mero da fatura","example":"PED-123"},"amount":{"type":"number","format":"float","description":"Valor da cobran√ßa (em BRL por padr√£o)","example":199.9},"pixKey":{"type":"string","description":"Chave PIX est√°tico (CPF/CNPJ/telefone/email/EVP)","example":"123e4567-e89b-12d3-a456-426614174000"},"pixType":{"type":"string","description":"Tipo da chave PIX (`CPF`, `CNPJ`, `PHONE`, `EMAIL`, `EVP`). Padr√£o `EVP`","example":"EVP"},"pixName":{"type":"string","description":"Nome do recebedor exibido no fluxo (padr√£o usa o nome do perfil da inst√¢ncia)","example":"Loja Exemplo"},"paymentLink":{"type":"string","description":"URL externa para checkout (somente dominios homologados; veja lista acima)","example":"https://pagamentos.exemplo.com/checkout/abc"},"fileUrl":{"type":"string","description":"URL ou caminho (base64) do documento a ser anexado (ex.: boleto PDF)","example":"https://cdn.exemplo.com/boleto-123.pdf"},"fileName":{"type":"string","description":"Nome do arquivo exibido no WhatsApp ao anexar `fileUrl`","example":"boleto-123.pdf"},"boletoCode":{"type":"string","description":"Linha digit√°vel do boleto (habilita o m√©todo boleto automaticamente)","example":"34191.79001 01043.510047 91020.150008 5 91070026000"},"replyid":{"type":"string","description":"ID da mensagem que ser√° respondida"},"mentions":{"type":"string","description":"N√∫meros mencionados separados por v√≠rgula"},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio (exibe \"digitando...\" no WhatsApp)"},"readchat":{"type":"boolean","description":"Marca o chat como lido ap√≥s enviar a mensagem"},"readmessages":{"type":"boolean","description":"Marca mensagens recentes como lidas ap√≥s o envio"},"async":{"type":"boolean","description":"Enfileira o envio para processamento ass√≠ncrono"},"track_source":{"type":"string","description":"Origem de rastreamento (ex.: chatwoot, crm-interno)"},"track_id":{"type":"string","description":"Identificador de rastreamento (aceita valores duplicados)"}},"required":["number","amount"]},"examples":{"pixSimples":{"summary":"PIX simples","value":{"number":"5511999999999","amount":199.9,"text":"Pedido #123 pronto para pagamento","pixKey":"123e4567-e89b-12d3-a456-426614174000","pixType":"EVP"}},"pixEBoleto":{"summary":"PIX + boleto","value":{"number":"5511999999999","amount":349.5,"text":"Pedido #457 com boleto","pixKey":"12345678000190","pixType":"CNPJ","pixName":"Loja Exemplo LTDA","boletoCode":"34191.79001 01043.510047 91020.150008 5 91070026000","additionalNote":"Pague via PIX ou utilize o boleto em anexo"}},"completo":{"summary":"PIX + boleto + link","value":{"number":"5511888888888","title":"Assinatura Premium","text":"Plano anual dispon√≠vel para pagamento","footer":"footer","invoiceNumber":"INV-789","itemName":"Bolo XYZ","amount":599,"pixKey":"123e4567-e89b-12d3-a456-426614174000","pixType":"EVP","pixName":"Empresa Exemplo","boletoCode":"23793.38128 60000.000123 45670.000012 3 45670000012345","fileUrl":"https://cdn.exemplo.com/boleto-inv-789.pdf","fileName":"Clique para abrir o PDF.pdf","paymentLink":"https://payment-link.pagar.me/checkout/inv-789"}}}}}},"responses":{"200":{"description":"Solicita√ß√£o de pagamento enviada com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Payment request sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing pixKey or pixCode"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send payment request"}}}}}}}}},"/send/pix-button":{"post":{"operationId":"sendPixButton","tags":["Enviar Mensagem"],"summary":"Enviar bot√£o PIX","description":"Envia um bot√£o nativo do WhatsApp que abre para pagamento PIX com a chave informada.\nO usu√°rio visualiza o detalhe do recebedor, nome e chave.\n\n## Regras principais\n- `pixType` aceita: `CPF`, `CNPJ`, `PHONE`, `EMAIL`, `EVP` (case insensitive)\n- `pixName` padr√£o: `\"Pix\"` quando n√£o informado - nome de quem recebe o pagamento\n\n\n## Campos comuns\nEste endpoint herda os campos opcionais padronizados da tag **\"Enviar Mensagem\"**:\n`delay`, `readchat`, `readmessages`, `replyid`, `mentions`, `track_source`, `track_id` e `async`.\n\n## Exemplo de payload\n```json\n{\n  \"number\": \"5511999999999\",\n  \"pixType\": \"EVP\",\n  \"pixKey\": \"123e4567-e89b-12d3-a456-426614174000\",\n  \"pixName\": \"Loja Exemplo\"\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"ID do chat para o qual a mensagem ser√° enviada. Pode ser um n√∫mero de telefone em formato internacional, um ID de grupo (`@g.us`), um ID de usu√°rio (com `@s.whatsapp.net` ou `@lid`).","example":"5511999999999"},"pixType":{"type":"string","description":"Tipo da chave PIX. Valores aceitos: CPF, CNPJ, PHONE, EMAIL ou EVP","example":"EVP"},"pixKey":{"type":"string","description":"Valor da chave PIX (CPF/CNPJ/telefone/email/EVP)","example":"123e4567-e89b-12d3-a456-426614174000"},"pixName":{"type":"string","description":"Nome exibido como recebedor do PIX (padr√£o \"Pix\" se vazio)","example":"Loja Exemplo"},"async":{"type":"boolean","description":"Enfileira o envio para processamento ass√≠ncrono"},"delay":{"type":"integer","description":"Atraso em milissegundos antes do envio (exibe \"digitando...\" no WhatsApp)"},"readchat":{"type":"boolean","description":"Marca o chat como lido ap√≥s enviar a mensagem"},"readmessages":{"type":"boolean","description":"Marca mensagens recentes como lidas ap√≥s o envio"},"replyid":{"type":"string","description":"ID da mensagem que ser√° respondida"},"mentions":{"type":"string","description":"Lista de n√∫meros mencionados separados por v√≠rgula"},"track_source":{"type":"string","description":"Origem de rastreamento (ex.: chatwoot, crm-interno)"},"track_id":{"type":"string","description":"Identificador de rastreamento (aceita valores duplicados)"}},"required":["number","pixType","pixKey"],"example":{"number":"5511999999999","pixType":"EVP","pixKey":"123e4567-e89b-12d3-a456-426614174000","pixName":"Loja Exemplo"}}}}},"responses":{"200":{"description":"Bot√£o PIX enviado com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/message.yaml#/Message"},{"type":"object","properties":{"response":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"PIX button sent successfully"}}}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid keyType. Allowed: CPF, CNPJ, PHONE, EMAIL, EVP"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to send PIX button"}}}}}}}}},"/message/download":{"post":{"operationId":"downloadMessage","tags":["A√ß√µes na mensagem e Buscar"],"summary":"Baixar arquivo de uma mensagem","description":"Baixa o arquivo associado a uma mensagem de m√≠dia (imagem, v√≠deo, √°udio, documento ou sticker).\n\n## Par√¢metros\n\n- **id** (string, obrigat√≥rio): ID da mensagem\n- **return_base64** (boolean, default: false): Retorna arquivo em base64\n- **generate_mp3** (boolean, default: true): Para √°udios, define formato de retorno\n  - `true`: Retorna MP3\n  - `false`: Retorna OGG\n- **return_link** (boolean, default: true): Retorna URL p√∫blica do arquivo\n- **transcribe** (boolean, default: false): Transcreve √°udios para texto\n- **openai_apikey** (string, opcional): Chave OpenAI para transcri√ß√£o\n  - Se n√£o informada, usa a chave salva na inst√¢ncia\n  - Se informada, atualiza e salva na inst√¢ncia para pr√≥ximas chamadas\n- **download_quoted** (boolean, default: false): Baixa m√≠dia da mensagem citada\n  - √ötil para baixar conte√∫do original de status do WhatsApp\n  - Quando uma mensagem √© resposta a um status, permite baixar a m√≠dia do status original\n  - **Contextualiza√ß√£o**: Ao baixar a m√≠dia citada, voc√™ identifica o contexto da conversa\n    - Exemplo: Se algu√©m responde a uma promo√ß√£o, baixando a m√≠dia voc√™ saber√° que a pergunta √© sobre aquela promo√ß√£o espec√≠fica\n\n## Exemplos\n\n### Baixar √°udio como MP3:\n```json\n{\n  \"id\": \"7EB0F01D7244B421048F0706368376E0\",\n  \"generate_mp3\": true\n}\n```\n\n### Transcrever √°udio:\n```json\n{\n  \"id\": \"7EB0F01D7244B421048F0706368376E0\",\n  \"transcribe\": true\n}\n```\n\n### Apenas base64 (sem salvar):\n```json\n{\n  \"id\": \"7EB0F01D7244B421048F0706368376E0\",\n  \"return_base64\": true,\n  \"return_link\": false\n}\n```\n\n### Baixar m√≠dia de status (mensagem citada):\n```json\n{\n  \"id\": \"7EB0F01D7244B421048F0706368376E0\",\n  \"download_quoted\": true\n}\n```\n*√ötil quando o cliente responde a uma promo√ß√£o/status - voc√™ baixa a m√≠dia original para entender sobre qual produto/oferta ele est√° perguntando.*\n\n## Resposta\n\n```json\n{\n  \"fileURL\": \"https://api.exemplo.com/files/arquivo.mp3\",\n  \"mimetype\": \"audio/mpeg\",\n  \"base64Data\": \"UklGRkj...\",\n  \"transcription\": \"Texto transcrito\"\n}\n```\n\n**Nota**: \n- Por padr√£o, se n√£o definido o contr√°rio:\n  1. √°udios s√£o retornados como MP3. \n  2. E todos os pedidos de download s√£o retornados com URL p√∫blica.\n- Transcri√ß√£o requer chave OpenAI v√°lida. A chave pode ser configurada uma vez na inst√¢ncia e ser√° reutilizada automaticamente.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID da mensagem contendo o arquivo","example":"7EB0F01D7244B421048F0706368376E0"},"return_base64":{"type":"boolean","description":"Se verdadeiro, retorna o conte√∫do em base64","default":false},"generate_mp3":{"type":"boolean","description":"Para √°udios, define formato de retorno (true=MP3, false=OGG)","default":true},"return_link":{"type":"boolean","description":"Salva e retorna URL p√∫blica do arquivo","default":true},"transcribe":{"type":"boolean","description":"Se verdadeiro, transcreve √°udios para texto","default":false},"openai_apikey":{"type":"string","description":"Chave da API OpenAI para transcri√ß√£o (opcional)","example":"sk-..."},"download_quoted":{"type":"boolean","description":"Se verdadeiro, baixa m√≠dia da mensagem citada ao inv√©s da mensagem principal","default":false}},"required":["id"]}}}},"responses":{"200":{"description":"Successful file download","content":{"application/json":{"schema":{"type":"object","properties":{"fileURL":{"type":"string","description":"URL p√∫blica para acessar o arquivo (se return_link=true)","example":"https://api.exemplo.com/files/arquivo.mp3"},"mimetype":{"type":"string","description":"Tipo MIME do arquivo","example":"audio/mpeg"},"base64Data":{"type":"string","description":"Conte√∫do do arquivo em base64 (se return_base64=true)","example":"UklGRkj..."},"transcription":{"type":"string","description":"Texto transcrito do √°udio (se transcribe=true)","example":"Texto transcrito"}},"required":["mimetype"]}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unsupported media type or no media found in message"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid token"}}}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","examples":["Message not found","No quoted message found in this message"]}}}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to download media"}}}}}}}}},"/message/find":{"post":{"operationId":"findMessages","tags":["A√ß√µes na mensagem e Buscar"],"summary":"Buscar mensagens em um chat","description":"Busca mensagens com m√∫ltiplos filtros dispon√≠veis. Este endpoint permite:\n\n1. **Busca por ID espec√≠fico**: Use `id` para encontrar uma mensagem exata\n2. **Filtrar por chat**: Use `chatid` para mensagens de uma conversa espec√≠fica\n3. **Filtrar por rastreamento**: Use `track_source` e `track_id` para mensagens com dados de tracking\n4. **Limitar resultados**: Use `limit` para controlar quantas mensagens retornar\n5. **Ordena√ß√£o**: Resultados ordenados por data (mais recentes primeiro)\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID espec√≠fico da mensagem para busca exata","example":"user123:r3EB0538"},"chatid":{"type":"string","description":"ID do chat no formato internacional","example":"5511999999999@s.whatsapp.net"},"track_source":{"type":"string","description":"Origem do rastreamento para filtrar mensagens","example":"chatwoot"},"track_id":{"type":"string","description":"ID de rastreamento para filtrar mensagens","example":"msg_123456789"},"limit":{"type":"integer","description":"Numero maximo de mensagens a retornar (padrao 100)","minimum":1,"default":100,"example":20},"offset":{"type":"integer","description":"Deslocamento para paginacao (0 retorna as mensagens mais recentes)","default":0}}},"examples":{"chatSearch":{"summary":"Buscar por chat especifico","description":"Busca mensagens de uma conversa especifica","value":{"chatid":"5511999999999@s.whatsapp.net","limit":20,"offset":0}},"idSearch":{"summary":"Buscar por ID especifico","description":"Busca uma mensagem especifica pelo seu ID","value":{"id":"user123:r3EB0538"}},"trackingSearch":{"summary":"Buscar por rastreamento","description":"Busca mensagens usando dados de tracking com paginacao","value":{"track_source":"chatwoot","track_id":"conv_123456","limit":50,"offset":100}}}}}},"responses":{"200":{"description":"Lista de mensagens encontradas com metadados de paginacao","content":{"application/json":{"schema":{"type":"object","properties":{"returnedMessages":{"type":"integer","description":"Quantidade de mensagens retornadas nesta pagina"},"messages":{"type":"array","items":{"$ref":"../schemas/message.yaml#/Message"}},"limit":{"type":"integer","description":"Limite aplicado na busca"},"offset":{"type":"integer","description":"Offset usado para recuperar os resultados"},"nextOffset":{"type":"integer","description":"Offset sugerido para a proxima pagina"},"hasMore":{"type":"boolean","description":"Indica se existem mais mensagens apos esta pagina"}}}}}},"400":{"description":"Parametros invalidos"},"401":{"description":"Token invalido ou expirado"},"404":{"description":"Chat nao encontrado"},"500":{"description":"Erro interno do servidor"}}}},"/message/markread":{"post":{"operationId":"markMessageRead","tags":["A√ß√µes na mensagem e Buscar"],"summary":"Marcar mensagens como lidas","description":"Marca uma ou mais mensagens como lidas. Este endpoint permite:\n1. Marcar m√∫ltiplas mensagens como lidas de uma vez\n2. Atualizar o status de leitura no WhatsApp\n3. Sincronizar o status de leitura entre dispositivos\n\nExemplo de requisi√ß√£o b√°sica:\n```json\n{\n  \"id\": [\n    \"62AD1AD844E518180227BF68DA7ED710\",\n    \"ECB9DE48EB41F77BFA8491BFA8D6EF9B\"  \n  ]\n}\n```\n\nExemplo de resposta:\n```json\n{\n  \"success\": true,\n  \"message\": \"Messages marked as read\",\n  \"markedMessages\": [\n    {\n      \"id\": \"62AD1AD844E518180227BF68DA7ED710\",\n      \"timestamp\": 1672531200000\n    },\n    {\n      \"id\": \"ECB9DE48EB41F77BFA8491BFA8D6EF9B\",\n      \"timestamp\": 1672531300000\n    }\n  ]\n}\n```\n\nPar√¢metros dispon√≠veis:\n- id: Lista de IDs das mensagens a serem marcadas como lidas\n\nErros comuns:\n- 401: Token inv√°lido ou expirado\n- 400: Lista de IDs vazia ou inv√°lida\n- 404: Uma ou mais mensagens n√£o encontradas\n- 500: Erro ao marcar mensagens como lidas\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"array","description":"Lista de IDs das mensagens a serem marcadas como lidas","items":{"type":"string"},"example":["62AD1AD844E518180227BF68DA7ED710","ECB9DE48EB41F77BFA8491BFA8D6EF9B"]}},"required":["id"]}}}},"responses":{"200":{"description":"Messages successfully marked as read","content":{"application/json":{"schema":{"type":"object","properties":{"results":{"type":"array","items":{"type":"object","properties":{"message_id":{"type":"string","description":"ID of the message that was processed"},"status":{"type":"string","enum":["success","error"],"description":"Status of the mark as read operation"},"error":{"type":"string","description":"Error message if status is error"}}},"example":[{"message_id":"62AD1AD844E518180227BF68DA7ED710","status":"success"},{"message_id":"ECB9DE48EB41F77BFA8491BFA8D6EF9B","status":"error","error":"Message not found"}]}}}}}},"400":{"description":"Invalid request payload or missing required fields","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing Id in Payload"}}}}}},"401":{"description":"Unauthorized - invalid or missing token"},"500":{"description":"Server error while processing the request"}}}},"/message/react":{"post":{"operationId":"reactToMessage","tags":["A√ß√µes na mensagem e Buscar"],"summary":"Enviar rea√ß√£o a uma mensagem","description":"Envia uma rea√ß√£o (emoji) a uma mensagem espec√≠fica. Este endpoint permite:\n\n1. Adicionar ou remover rea√ß√µes em mensagens\n\n2. Usar qualquer emoji Unicode v√°lido\n\n3. Reagir a mensagens em chats individuais ou grupos\n\n4. Remover rea√ß√µes existentes\n\n5. Verificar o status da rea√ß√£o enviada\n\n\nTipos de rea√ß√µes suportados:\n\n- Qualquer emoji Unicode v√°lido (üëç, ‚ù§Ô∏è, üòÇ, etc)\n\n- String vazia para remover rea√ß√£o\n\n\nExemplo de requisi√ß√£o b√°sica:\n\n```json\n\n{\n  \"number\": \"5511999999999@s.whatsapp.net\",\n  \"text\": \"üëç\",\n  \"id\": \"3EB0538DA65A59F6D8A251\"\n}\n\n```\n\n\nExemplo de requisi√ß√£o para remover rea√ß√£o:\n\n```json\n\n{\n  \"number\": \"5511999999999@s.whatsapp.net\",\n  \"text\": \"\",\n  \"id\": \"3EB0538DA65A59F6D8A251\"\n}\n\n```\n\n\nExemplo de resposta:\n\n```json\n\n{\n  \"success\": true,\n  \"message\": \"Reaction sent\",\n  \"reaction\": {\n    \"id\": \"3EB0538DA65A59F6D8A251\",\n    \"emoji\": \"üëç\",\n    \"timestamp\": 1672531200000,\n    \"status\": \"sent\"\n  }\n}\n\n```\n\n\nExemplo de resposta ao remover rea√ß√£o:\n\n```json\n\n{\n  \"success\": true,\n  \"message\": \"Reaction removed\",\n  \"reaction\": {\n    \"id\": \"3EB0538DA65A59F6D8A251\",\n    \"emoji\": null,\n    \"timestamp\": 1672531200000,\n    \"status\": \"removed\"\n  }\n}\n\n```\n\n\nPar√¢metros dispon√≠veis:\n\n- number: N√∫mero do chat no formato internacional (ex:\n5511999999999@s.whatsapp.net)\n\n- text: Emoji Unicode da rea√ß√£o (ou string vazia para remover rea√ß√£o)\n\n- id: ID da mensagem que receber√° a rea√ß√£o\n\n\nErros comuns:\n\n- 401: Token inv√°lido ou expirado\n\n- 400: N√∫mero inv√°lido ou emoji n√£o suportado\n\n- 404: Mensagem n√£o encontrada\n\n- 500: Erro ao enviar rea√ß√£o\n\n\nLimita√ß√µes:\n\n- S√≥ √© poss√≠vel reagir a mensagens enviadas por outros usu√°rios\n\n- N√£o √© poss√≠vel reagir a mensagens antigas (mais de 7 dias)\n\n- O mesmo usu√°rio s√≥ pode ter uma rea√ß√£o ativa por mensagem\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do chat no formato internacional","example":"5511999999999@s.whatsapp.net"},"text":{"type":"string","description":"Emoji Unicode da rea√ß√£o (ou string vazia para remover rea√ß√£o)","example":"üëç"},"id":{"type":"string","description":"ID da mensagem que receber√° a rea√ß√£o","example":"3EB0538DA65A59F6D8A251"}},"required":["number","text","id"]}}}},"responses":{"200":{"description":"Rea√ß√£o enviada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID √∫nico da mensagem de rea√ß√£o","example":"owner:generated_message_id"},"messageid":{"type":"string","description":"ID gerado para a mensagem de rea√ß√£o","example":"generated_message_id"},"content":{"type":"object","description":"Detalhes da rea√ß√£o"},"messageTimestamp":{"type":"number","description":"Timestamp da mensagem em milissegundos","example":1672531200000},"messageType":{"type":"string","description":"Tipo da mensagem","example":"reaction"},"status":{"type":"string","description":"Status atual da mensagem","example":"Pending"},"owner":{"type":"string","description":"Propriet√°rio da inst√¢ncia","example":"instance_owner"}}}}}},"400":{"description":"Erro nos dados da requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing Id in Payload"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"404":{"description":"Mensagem n√£o encontrada","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Message not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Error sending message"}}}}}}}}},"/message/delete":{"post":{"operationId":"deleteMessage","tags":["A√ß√µes na mensagem e Buscar"],"summary":"Apagar Mensagem Para Todos","description":"Apaga uma mensagem para todos os participantes da conversa.\n\n### Funcionalidades:\n- Apaga mensagens em conversas individuais ou grupos\n- Funciona com mensagens enviadas pelo usu√°rio ou recebidas\n- Atualiza o status no banco de dados\n- Envia webhook de atualiza√ß√£o\n\n**Notas T√©cnicas**:\n1. O ID da mensagem pode ser fornecido em dois formatos:\n   - ID completo (cont√©m \":\"): usado diretamente\n   - ID curto: concatenado com o owner para busca\n2. Gera evento webhook do tipo \"messages_update\"\n3. Atualiza o status da mensagem para \"Deleted\"\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID da mensagem a ser apagada"}},"required":["id"]}}}},"responses":{"200":{"description":"Mensagem apagada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"id":{"type":"string"}}}}}},"400":{"description":"Payload inv√°lido ou ID de chat/sender inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"invalid payload"}}}}}},"401":{"description":"Token n√£o fornecido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"404":{"description":"Mensagem n√£o encontrada","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"message not found"}}}}}},"500":{"description":"Erro interno do servidor ou sess√£o n√£o iniciada","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}}}}},"/message/edit":{"post":{"operationId":"editMessage","tags":["A√ß√µes na mensagem e Buscar"],"summary":"Edita uma mensagem enviada","description":"Edita o conte√∫do de uma mensagem j√° enviada usando a funcionalidade nativa do WhatsApp.\n\nO endpoint realiza:\n- Busca a mensagem original no banco de dados usando o ID fornecido\n- Edita o conte√∫do da mensagem para o novo texto no WhatsApp\n- Gera um novo ID para a mensagem editada\n- Retorna objeto de mensagem completo seguindo o padr√£o da API\n- Dispara eventos SSE/Webhook automaticamente\n\n**Importante**: \n- S√≥ √© poss√≠vel editar mensagens enviadas pela pr√≥pria inst√¢ncia\n- A mensagem deve existir no banco de dados\n- O ID pode ser fornecido no formato completo (owner:messageid) ou apenas messageid\n- A mensagem deve estar dentro do prazo permitido pelo WhatsApp para edi√ß√£o\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["id","text"],"properties":{"id":{"type":"string","description":"ID √∫nico da mensagem que ser√° editada (formato owner:messageid ou apenas messageid)","example":"3A12345678901234567890123456789012"},"text":{"type":"string","description":"Novo conte√∫do de texto da mensagem","example":"Texto editado da mensagem"}}}}}},"responses":{"200":{"description":"Mensagem editada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID √∫nico da mensagem no formato owner:messageid","example":"5511999999999:3A12345678901234567890123456789012"},"messageid":{"type":"string","description":"ID da mensagem no WhatsApp","example":"3A12345678901234567890123456789012"},"content":{"type":"string","description":"Conte√∫do da mensagem editada","example":"Texto editado da mensagem"},"messageTimestamp":{"type":"integer","description":"Timestamp da mensagem (Unix timestamp em milissegundos)","example":1704067200000},"messageType":{"type":"string","description":"Tipo da mensagem","example":"text"},"status":{"type":"string","description":"Status da mensagem","example":"Pending"},"owner":{"type":"string","description":"Propriet√°rio da inst√¢ncia","example":"5511999999999"}}}}}},"400":{"description":"Dados inv√°lidos na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid payload"}}}}}},"401":{"description":"Sem sess√£o ativa","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"404":{"description":"Mensagem n√£o encontrada","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Message not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Error fetching message from database"}}}}}}}}},"/group/create":{"post":{"operationId":"createGroup","tags":["Grupos e Comunidades"],"summary":"Criar um novo grupo","description":"Cria um novo grupo no WhatsApp com participantes iniciais.\n\n### Detalhes\n- Requer autentica√ß√£o via token da inst√¢ncia\n- Os n√∫meros devem ser fornecidos sem formata√ß√£o (apenas d√≠gitos)\n\n### Limita√ß√µes\n- M√≠nimo de 1 participante al√©m do criador\n  \n### Comportamento\n- Retorna informa√ß√µes detalhadas do grupo criado\n- Inclui lista de participantes adicionados com sucesso/falha\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Nome do grupo","minLength":1,"maxLength":100,"example":"uazapiGO grupo"},"participants":{"type":"array","description":"Lista de n√∫meros de telefone dos participantes iniciais","items":{"type":"string","description":"N√∫mero de telefone sem formata√ß√£o"},"minItems":1,"maxItems":50,"example":["5521987905995","5511912345678"]}},"required":["name","participants"]},"examples":{"default":{"value":{"name":"Meu Novo Grupo","participants":["5521987905995"]}},"multiple_participants":{"value":{"name":"Equipe de Projeto","participants":["5521987905995","5511912345678","5519987654321"]}}}}}},"responses":{"200":{"description":"Grupo criado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/group.yaml#/Group"}}}},"400":{"description":"Erro de payload inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Could not parse phone"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to create group"}}}}}}},"security":[{"token":[]}]}},"/group/info":{"post":{"operationId":"getGroupInfo","tags":["Grupos e Comunidades"],"summary":"Obter informa√ß√µes detalhadas de um grupo","description":"Recupera informa√ß√µes completas de um grupo do WhatsApp, incluindo:\n- Detalhes do grupo\n- Participantes\n- Configura√ß√µes\n- Link de convite (opcional)\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupjid":{"type":"string","description":"Identificador √∫nico do grupo (JID)","example":"120363153742561022@g.us"},"getInviteLink":{"type":"boolean","description":"Recuperar link de convite do grupo","default":false,"example":true},"getRequestsParticipants":{"type":"boolean","description":"Recuperar lista de solicita√ß√µes pendentes de participa√ß√£o","default":false,"example":false},"force":{"type":"boolean","description":"For√ßar atualiza√ß√£o, ignorando cache","default":false,"example":false}},"required":["groupjid"]}}}},"responses":{"200":{"description":"Informa√ß√µes do grupo obtidas com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/group.yaml#/Group"},"example":{"JID":"120363153742561022@g.us","Name":"uazapiGO Community","Participants":[{"JID":"5521987654321@s.whatsapp.net","IsAdmin":true}],"IsLocked":false,"IsAnnounce":false}}}},"400":{"description":"C√≥digo de convite inv√°lido ou mal formatado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid invite code"}}}}}},"404":{"description":"Grupo n√£o encontrado ou link de convite expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Group invite link is invalid or has expired"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to retrieve group information"}}}}}}}}},"/group/inviteInfo":{"post":{"operationId":"getGroupInviteInfo","tags":["Grupos e Comunidades"],"summary":"Obter informa√ß√µes de um grupo pelo c√≥digo de convite","description":"Retorna informa√ß√µes detalhadas de um grupo usando um c√≥digo de convite ou URL completo do WhatsApp.\n\nEsta rota permite:\n- Recuperar informa√ß√µes b√°sicas sobre um grupo antes de entrar\n- Validar um link de convite\n- Obter detalhes como nome do grupo, n√∫mero de participantes e restri√ß√µes de entrada\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"invitecode":{"type":"string","description":"C√≥digo de convite ou URL completo do grupo.\nPode ser um c√≥digo curto ou a URL completa do WhatsApp.\n","examples":["IYnl5Zg9bUcJD32rJrDzO7","https://chat.whatsapp.com/IYnl5Zg9bUcJD32rJrDzO7"]}},"required":["invitecode"]}}}},"responses":{"200":{"description":"Informa√ß√µes do grupo obtidas com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/group.yaml#/Group"},"example":{"JID":"120363153742561022@g.us","Name":"uazapiGO Community","Participants":[{"JID":"5521987654321@s.whatsapp.net","IsAdmin":true}],"IsLocked":false,"IsAnnounce":false}}}},"400":{"description":"C√≥digo de convite inv√°lido ou mal formatado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid invite code"}}}}}},"404":{"description":"Grupo n√£o encontrado ou link de convite expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Group invite link is invalid or has expired"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to retrieve group information"}}}}}}}}},"/group/join":{"post":{"operationId":"joinGroup","tags":["Grupos e Comunidades"],"summary":"Entrar em um grupo usando c√≥digo de convite","description":"Permite entrar em um grupo do WhatsApp usando um c√≥digo de convite ou URL completo. \n\nCaracter√≠sticas:\n- Suporta c√≥digo de convite ou URL completo\n- Valida o c√≥digo antes de tentar entrar no grupo\n- Retorna informa√ß√µes b√°sicas do grupo ap√≥s entrada bem-sucedida\n- Trata poss√≠veis erros como convite inv√°lido ou expirado\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["invitecode"],"properties":{"invitecode":{"type":"string","description":"C√≥digo de convite ou URL completo do grupo. \nFormatos aceitos:\n- C√≥digo completo: \"IYnl5Zg9bUcJD32rJrDzO7\"\n- URL completa: \"https://chat.whatsapp.com/IYnl5Zg9bUcJD32rJrDzO7\"\n","example":"https://chat.whatsapp.com/IYnl5Zg9bUcJD32rJrDzO7","minLength":10,"maxLength":50}}}}}},"responses":{"200":{"description":"Entrada no grupo realizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Group join successful"},"group":{"$ref":"../schemas/group.yaml#/Group"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"400":{"description":"C√≥digo de convite inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid invite code"}}}}}},"403":{"description":"Usu√°rio j√° est√° no grupo ou n√£o tem permiss√£o para entrar","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unable to join group"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Error processing group invite"}}}}}}}}},"/group/leave":{"post":{"operationId":"leaveGroup","tags":["Grupos e Comunidades"],"summary":"Sair de um grupo","description":"Remove o usu√°rio atual de um grupo espec√≠fico do WhatsApp.\n\nRequisitos:\n- O usu√°rio deve estar conectado a uma inst√¢ncia v√°lida\n- O usu√°rio deve ser um membro do grupo\n\nComportamentos:\n- Se o usu√°rio for o √∫ltimo administrador, o grupo ser√° dissolvido\n- Se o usu√°rio for um membro comum, ser√° removido do grupo\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupjid":{"type":"string","description":"Identificador √∫nico do grupo (JID)\n- Formato: n√∫mero@g.us\n- Exemplo v√°lido: 120363324255083289@g.us\n","example":"120363324255083289@g.us","pattern":"^\\d+@g\\.us$"}},"required":["groupjid"]}}}},"responses":{"200":{"description":"Sa√≠da do grupo realizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Group leave successful"}}}}}},"400":{"description":"Erro de payload inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"invalid payload"}}}}}},"500":{"description":"Erro interno do servidor ou falha na conex√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"error leaving group"}}}}}}}}},"/group/list":{"get":{"operationId":"listGroups","tags":["Grupos e Comunidades"],"summary":"Listar todos os grupos","description":"Retorna uma lista com todos os grupos dispon√≠veis para a inst√¢ncia atual do WhatsApp.\n\nRecursos adicionais:\n- Suporta atualiza√ß√£o for√ßada do cache de grupos\n- Recupera informa√ß√µes detalhadas de grupos conectados\n","parameters":[{"name":"force","in":"query","schema":{"type":"boolean","default":false},"description":"Se definido como `true`, for√ßa a atualiza√ß√£o do cache de grupos.\n√ötil para garantir que as informa√ß√µes mais recentes sejam recuperadas.\n\nComportamentos:\n- `false` (padr√£o): Usa informa√ß√µes em cache\n- `true`: Busca dados atualizados diretamente do WhatsApp\n"},{"name":"noparticipants","in":"query","schema":{"type":"boolean","default":false},"description":"Se definido como `true`, retorna a lista de grupos sem incluir os participantes.\n√ötil para otimizar a resposta quando n√£o h√° necessidade dos dados dos participantes.\n\nComportamentos:\n- `false` (padr√£o): Retorna grupos com lista completa de participantes\n- `true`: Retorna grupos sem incluir os participantes\n"}],"responses":{"200":{"description":"Lista de grupos recuperada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"groups":{"type":"array","items":{"$ref":"../schemas/group.yaml#/Group"},"description":"Lista detalhada de grupos"}}}}}},"500":{"description":"Erro interno do servidor ao recuperar grupos","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}},"post":{"operationId":"refreshGroups","tags":["Grupos e Comunidades"],"summary":"Listar todos os grupos com filtros e paginacao","description":"Retorna uma lista com todos os grupos disponiveis para a instancia atual do WhatsApp, com opcoes de filtros e paginacao via corpo (POST).\nA rota GET continua para quem prefere a listagem direta sem paginacao.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"page":{"type":"integer","description":"Numero da pagina para paginacao (padrao 1)","default":1},"pageSize":{"type":"integer","description":"Quantidade de resultados por pagina (padrao 50, maximo 1000)","default":50},"limit":{"type":"integer","description":"Alias opcional para `pageSize`"},"offset":{"type":"integer","description":"Deslocamento base zero; se informado recalcula a pagina","default":0},"search":{"type":"string","description":"Texto para filtrar grupos por nome/JID"},"force":{"type":"boolean","default":false,"description":"Se definido como `true`, forca a atualizacao do cache de grupos.\nUtil para garantir que as informacoes mais recentes sejam recuperadas.\n"},"noParticipants":{"type":"boolean","default":false,"description":"Se definido como `true`, retorna a lista de grupos sem incluir os participantes.\nUtil para otimizar a resposta quando nao ha necessidade dos dados dos participantes.\n"}}}}}},"responses":{"200":{"description":"Lista de grupos recuperada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"groups":{"type":"array","items":{"$ref":"../schemas/group.yaml#/Group"},"description":"Lista detalhada de grupos"},"pagination":{"type":"object","properties":{"totalRecords":{"type":"integer","description":"Total de grupos encontrados"},"pageSize":{"type":"integer","description":"Itens por pagina"},"currentPage":{"type":"integer","description":"Pagina atual"},"totalPages":{"type":"integer","description":"Numero total de paginas"},"hasNextPage":{"type":"boolean","description":"Indica se existe uma proxima pagina"},"hasPreviousPage":{"type":"boolean","description":"Indica se existe pagina anterior"}}}}}}}},"500":{"description":"Erro interno do servidor ao recuperar grupos","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/group/resetInviteCode":{"post":{"operationId":"resetGroupInviteCode","tags":["Grupos e Comunidades"],"summary":"Resetar c√≥digo de convite do grupo","description":"Gera um novo c√≥digo de convite para o grupo, invalidando o c√≥digo de convite anterior. \nSomente administradores do grupo podem realizar esta a√ß√£o.\n\nPrincipais caracter√≠sticas:\n- Invalida o link de convite antigo\n- Cria um novo link √∫nico\n- Retorna as informa√ß√µes atualizadas do grupo\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupjid":{"type":"string","description":"Identificador √∫nico do grupo (JID)","example":"120363308883996631@g.us"}},"required":["groupjid"]}}}},"responses":{"200":{"description":"C√≥digo de convite resetado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"InviteLink":{"type":"string","description":"Novo link de convite gerado","example":"https://chat.whatsapp.com/AbCdEfGhIjKlMnOpQrStUv"},"group":{"$ref":"../schemas/group.yaml#/Group"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"400":{"description":"Erro de valida√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Could not parse Group JID"}}}}}},"403":{"description":"Usu√°rio sem permiss√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"User is not an admin of this group"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to reset group invite link"}}}}}}}}},"/group/updateAnnounce":{"post":{"operationId":"updateGroupAnnounce","tags":["Grupos e Comunidades"],"summary":"Configurar permiss√µes de envio de mensagens no grupo","description":"Define as permiss√µes de envio de mensagens no grupo, permitindo restringir o envio apenas para administradores.\n\nQuando ativado (announce=true):\n- Apenas administradores podem enviar mensagens\n- Outros participantes podem apenas ler\n- √ötil para an√∫ncios importantes ou controle de spam\n\nQuando desativado (announce=false):\n- Todos os participantes podem enviar mensagens\n- Configura√ß√£o padr√£o para grupos normais\n\nRequer que o usu√°rio seja administrador do grupo para fazer altera√ß√µes.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupjid":{"type":"string","description":"Identificador √∫nico do grupo no formato xxxx@g.us","example":"120363339858396166@g.us"},"announce":{"type":"boolean","description":"Controla quem pode enviar mensagens no grupo","example":true}},"required":["groupjid","announce"]}}}},"responses":{"200":{"description":"Configura√ß√£o atualizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Group announce enabled successfully"},"group":{"$ref":"../schemas/group.yaml#/Group"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"401":{"description":"Token de autentica√ß√£o ausente ou inv√°lido"},"403":{"description":"Usu√°rio n√£o √© administrador do grupo"},"404":{"description":"Grupo n√£o encontrado"},"500":{"description":"Erro interno do servidor ou falha na API do WhatsApp"}}}},"/group/updateDescription":{"post":{"operationId":"updateGroupDescription","tags":["Grupos e Comunidades"],"summary":"Atualizar descri√ß√£o do grupo","description":"Altera a descri√ß√£o (t√≥pico) do grupo WhatsApp especificado.\nRequer que o usu√°rio seja administrador do grupo.\nA descri√ß√£o aparece na tela de informa√ß√µes do grupo e pode ser visualizada por todos os participantes.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["groupjid","description"],"properties":{"groupjid":{"type":"string","description":"JID (ID) do grupo no formato xxxxx@g.us","example":"120363339858396166@g.us","pattern":"^[0-9]+@g\\.us$"},"description":{"type":"string","description":"Nova descri√ß√£o/t√≥pico do grupo","example":"Grupo oficial de suporte","maxLength":512}}}}}},"responses":{"200":{"description":"Descri√ß√£o atualizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Group description updated successfully"},"group":{"$ref":"../schemas/group.yaml#/Group"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"401":{"description":"Token inv√°lido ou ausente"},"403":{"description":"Usu√°rio n√£o √© administrador do grupo"},"404":{"description":"Grupo n√£o encontrado"},"413":{"description":"Descri√ß√£o excede o limite m√°ximo permitido"}}}},"/group/updateImage":{"post":{"operationId":"updateGroupImage","tags":["Grupos e Comunidades"],"summary":"Atualizar imagem do grupo","description":"Altera a imagem do grupo especificado. A imagem pode ser enviada como URL ou como string base64.\n\nRequisitos da imagem:\n- Formato: JPEG\n- Resolu√ß√£o m√°xima: 640x640 pixels\n- Imagens maiores ou diferente de JPEG n√£o s√£o aceitas pelo WhatsApp\n\nPara remover a imagem atual, envie \"remove\" ou \"delete\" no campo image.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupjid":{"type":"string","description":"JID do grupo","example":"120363308883996631@g.us"},"image":{"type":"string","description":"URL da imagem, string base64 ou \"remove\"/\"delete\" para remover.\nA imagem deve estar em formato JPEG e ter resolu√ß√£o m√°xima de 640x640.\n","examples":["https://example.com/image.jpg","data:image/jpeg;base64,/9j/4AAQSkZJRg...","remove"]}},"required":["groupjid","image"]}}}},"parameters":[],"responses":{"200":{"description":"Imagem atualizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Group image updated successfully"},"group":{"$ref":"../schemas/group.yaml#/Group"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"400":{"description":"Erro nos par√¢metros da requisi√ß√£o"},"401":{"description":"Token inv√°lido ou expirado"},"403":{"description":"Usu√°rio n√£o √© administrador do grupo"},"413":{"description":"Imagem muito grande"},"415":{"description":"Formato de imagem inv√°lido"}}}},"/group/updateLocked":{"post":{"operationId":"updateGroupLocked","tags":["Grupos e Comunidades"],"summary":"Configurar permiss√£o de edi√ß√£o do grupo","description":"Define se apenas administradores podem editar as informa√ß√µes do grupo. \nQuando bloqueado (locked=true), apenas administradores podem alterar nome, descri√ß√£o, \nimagem e outras configura√ß√µes do grupo. Quando desbloqueado (locked=false), \nqualquer participante pode editar as informa√ß√µes.\n\nImportante:\n- Requer que o usu√°rio seja administrador do grupo\n- Afeta edi√ß√µes de nome, descri√ß√£o, imagem e outras informa√ß√µes do grupo\n- N√£o controla permiss√µes de adi√ß√£o de membros\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupjid":{"type":"string","description":"Identificador √∫nico do grupo (JID)","example":"120363308883996631@g.us"},"locked":{"type":"boolean","description":"Define permiss√µes de edi√ß√£o:\n- true = apenas admins podem editar infos do grupo\n- false = qualquer participante pode editar infos do grupo\n","example":true}},"required":["groupjid","locked"]}}}},"responses":{"200":{"description":"Opera√ß√£o realizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Group lock status changed successfully"},"group":{"$ref":"../schemas/group.yaml#/Group"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"403":{"description":"Usu√°rio n√£o √© administrador do grupo"},"404":{"description":"Grupo n√£o encontrado"}}}},"/group/updateName":{"post":{"operationId":"updateGroupName","tags":["Grupos e Comunidades"],"summary":"Atualizar nome do grupo","description":"Altera o nome de um grupo do WhatsApp. Apenas administradores do grupo podem realizar esta opera√ß√£o.\nO nome do grupo deve seguir as diretrizes do WhatsApp e ter entre 1 e 25 caracteres.\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["groupjid","name"],"properties":{"groupjid":{"type":"string","description":"Identificador √∫nico do grupo no formato JID","example":"120363339858396166@g.us"},"name":{"type":"string","description":"Novo nome para o grupo","example":"Grupo de Suporte","minLength":1,"maxLength":25}}}}}},"responses":{"200":{"description":"Nome do grupo atualizado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Group name updated successfully"},"group":{"$ref":"../schemas/group.yaml#/Group"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"400":{"description":"Erro de valida√ß√£o na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid payload"}}}}}},"401":{"description":"Token de autentica√ß√£o ausente ou inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"403":{"description":"Usu√°rio n√£o √© administrador do grupo","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"User is not an admin of this group"}}}}}},"404":{"description":"Grupo n√£o encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Group not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to update group name"}}}}}}}}},"/group/updateParticipants":{"post":{"operationId":"updateGroupParticipants","tags":["Grupos e Comunidades"],"summary":"Gerenciar participantes do grupo","description":"Gerencia participantes do grupo atrav√©s de diferentes a√ß√µes:\n- Adicionar ou remover participantes\n- Promover ou rebaixar administradores\n- Aprovar ou rejeitar solicita√ß√µes pendentes\n\nRequer que o usu√°rio seja administrador do grupo para executar as a√ß√µes.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"groupjid":{"type":"string","description":"JID (identificador) do grupo","example":"120363308883996631@g.us"},"action":{"type":"string","description":"A√ß√£o a ser executada:\n- add: Adicionar participantes ao grupo\n- remove: Remover participantes do grupo\n- promote: Promover participantes a administradores\n- demote: Remover privil√©gios de administrador\n- approve: Aprovar solicita√ß√µes pendentes de entrada\n- reject: Rejeitar solicita√ß√µes pendentes de entrada\n","enum":["add","remove","promote","demote","approve","reject"],"example":"promote"},"participants":{"type":"array","items":{"type":"string"},"description":"Lista de n√∫meros de telefone ou JIDs dos participantes.\nPara n√∫meros de telefone, use formato internacional sem '+' ou espa√ßos.\n","example":["5521987654321","5511999887766"]}},"required":["groupjid","action","participants"]}}}},"responses":{"200":{"description":"Sucesso na opera√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"groupUpdated":{"type":"array","items":{"type":"object","properties":{"JID":{"type":"string","description":"JID do participante"},"Error":{"type":"integer","description":"C√≥digo de erro (0 para sucesso)"}}},"description":"Status da opera√ß√£o para cada participante"},"group":{"$ref":"../schemas/group.yaml#/Group","description":"Informa√ß√µes atualizadas do grupo"},"needs_refresh":{"type":"boolean","description":"Indica se o grupo precisa ser atualizado no cache local","example":false}}}}}},"400":{"description":"Erro nos par√¢metros da requisi√ß√£o"},"403":{"description":"Usu√°rio n√£o √© administrador do grupo"},"500":{"description":"Erro interno do servidor"}}}},"/community/create":{"post":{"operationId":"createCommunity","tags":["Grupos e Comunidades"],"summary":"Criar uma comunidade","description":"Cria uma nova comunidade no WhatsApp. Uma comunidade √© uma estrutura que permite agrupar m√∫ltiplos grupos relacionados sob uma √∫nica administra√ß√£o. \n\nA comunidade criada inicialmente ter√° apenas o grupo principal (announcements), e grupos adicionais podem ser vinculados posteriormente usando o endpoint `/community/updategroups`.\n\n**Observa√ß√µes importantes:**\n- O n√∫mero que cria a comunidade torna-se automaticamente o administrador\n- A comunidade ter√° um grupo principal de an√∫ncios criado automaticamente\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Nome da comunidade","example":"Comunidade do Bairro"}},"required":["name"]}}}},"responses":{"200":{"description":"Comunidade criada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"group":{"$ref":"../schemas/group.yaml#/Group"},"failed":{"type":"array","description":"Lista de JIDs que falharam ao serem adicionados","items":{"type":"string","format":"jid"}}}}}}},"400":{"description":"Erro na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"invalid payload"}}}}}},"401":{"description":"Token inv√°lido ou n√£o fornecido"},"403":{"description":"Sem permiss√£o para criar comunidades"},"429":{"description":"Limite de cria√ß√£o de comunidades atingido"},"500":{"description":"Erro interno do servidor"}}}},"/community/editgroups":{"post":{"operationId":"editCommunityGroups","tags":["Grupos e Comunidades"],"summary":"Gerenciar grupos em uma comunidade","description":"Adiciona ou remove grupos de uma comunidade do WhatsApp. Apenas administradores da comunidade podem executar estas opera√ß√µes.\n\n## Funcionalidades\n- Adicionar m√∫ltiplos grupos simultaneamente a uma comunidade\n- Remover grupos de uma comunidade existente\n- Suporta opera√ß√µes em lote\n\n## Limita√ß√µes\n- Os grupos devem existir previamente\n- A comunidade deve existir e o usu√°rio deve ser administrador\n- Grupos j√° vinculados n√£o podem ser adicionados novamente\n- Grupos n√£o vinculados n√£o podem ser removidos\n\n## A√ß√µes Dispon√≠veis\n- `add`: Adiciona os grupos especificados √† comunidade\n- `remove`: Remove os grupos especificados da comunidade\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["community","action","groupjids"],"properties":{"community":{"type":"string","description":"JID (identificador √∫nico) da comunidade","example":"120363153742561022@g.us"},"action":{"type":"string","enum":["add","remove"],"description":"Tipo de opera√ß√£o a ser realizada:\n* add - Adiciona grupos √† comunidade\n* remove - Remove grupos da comunidade\n"},"groupjids":{"type":"array","items":{"type":"string","pattern":"^[0-9]+@g.us$"},"minItems":1,"description":"Lista de JIDs dos grupos para adicionar ou remover","example":["120363324255083289@g.us","120363308883996631@g.us"]}}}}}},"responses":{"200":{"description":"Opera√ß√£o realizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"community updated"},"success":{"type":"array","items":{"type":"string"},"description":"Lista de JIDs dos grupos processados com sucesso"},"failed":{"type":"array","items":{"type":"string"},"description":"Lista de JIDs dos grupos que falharam no processamento"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida"},"401":{"description":"N√£o autorizado"},"403":{"description":"Usu√°rio n√£o √© administrador da comunidade"}}}},"/webhook":{"get":{"operationId":"getWebhook","tags":["Webhooks e SSE"],"summary":"Ver Webhook da Inst√¢ncia","description":"Retorna a configura√ß√£o atual do webhook da inst√¢ncia, incluindo:\n- URL configurada\n- Eventos ativos\n- Filtros aplicados\n- Configura√ß√µes adicionais\n\nExemplo de resposta:\n```json\n[\n  {\n    \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    \"enabled\": true,\n    \"url\": \"https://example.com/webhook\",\n    \"events\": [\"messages\", \"messages_update\"],\n    \"excludeMessages\": [\"wasSentByApi\", \"isGroupNo\"],\n    \"addUrlEvents\": true,\n    \"addUrlTypesMessages\": true\n  },\n  {\n    \"id\": \"987fcdeb-51k3-09j8-x543-864297539100\",\n    \"enabled\": true,\n    \"url\": \"https://outro-endpoint.com/webhook\",\n    \"events\": [\"connection\", \"presence\"],\n    \"excludeMessages\": [],\n    \"addUrlEvents\": false,\n    \"addUrlTypesMessages\": false\n  }\n]\n```\n\nA resposta √© sempre um array, mesmo quando h√° apenas um webhook configurado.\n","responses":{"200":{"description":"Configura√ß√£o do webhook retornada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/webhook.yaml#/Webhook"}},"example":[{"id":"123e4567-e89b-12d3-a456-426614174000","enabled":true,"url":"https://example.com/webhook","events":["messages","messages_update"],"excludeMessages":["wasSentByApi","isGroupNo"],"addUrlEvents":true,"addUrlTypesMessages":true},{"id":"987fcdeb-51k3-09j8-x543-864297539100","enabled":true,"url":"https://outro-endpoint.com/webhook","events":["connection","presence"],"excludeMessages":[],"addUrlEvents":false,"addUrlTypesMessages":false}]}}},"401":{"description":"Token inv√°lido ou n√£o fornecido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"missing token"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to process webhook data"}}}}}}}},"post":{"operationId":"updateWebhook","tags":["Webhooks e SSE"],"summary":"Configurar Webhook da Inst√¢ncia","description":"Gerencia a configura√ß√£o de webhooks para receber eventos em tempo real da inst√¢ncia.\nPermite gerenciar m√∫ltiplos webhooks por inst√¢ncia atrav√©s do campo ID e action.\n\n### üöÄ Modo Simples (Recomendado)\n\n**Uso mais f√°cil - sem complexidade de IDs**:\n- N√£o inclua `action` nem `id` no payload\n- Gerencia automaticamente um √∫nico webhook por inst√¢ncia\n- Cria novo ou atualiza o existente automaticamente\n- **Recomendado**: Sempre use `\"excludeMessages\": [\"wasSentByApi\"]` para evitar loops\n- **Exemplo**: `{\"url\": \"https://meusite.com/webhook\", \"events\": [\"messages\"], \"excludeMessages\": [\"wasSentByApi\"]}`\n\n### üß™ Sites para Testes (ordenados por qualidade)\n\n**Para testar webhooks durante desenvolvimento**:\n1. **https://webhook.cool/** - ‚≠ê Melhor op√ß√£o (sem rate limit, interface limpa)\n2. **https://rbaskets.in/** - ‚≠ê Boa alternativa (confi√°vel, baixo rate limit)\n3. **https://webhook.site/** - ‚ö†Ô∏è Evitar se poss√≠vel (rate limit agressivo)\n\n### ‚öôÔ∏è Modo Avan√ßado (Para m√∫ltiplos webhooks)\n\n**Para usu√°rios que precisam de m√∫ltiplos webhooks por inst√¢ncia**:\n\nüí° **Dica**: Mesmo precisando de m√∫ltiplos webhooks, considere usar `addUrlEvents` no modo simples.\nUm √∫nico webhook pode receber diferentes tipos de eventos em URLs espec√≠ficas \n(ex: `/webhook/message`, `/webhook/connection`), eliminando a necessidade de m√∫ltiplos webhooks.\n\n1. **Criar Novo Webhook**:\n   - Use `action: \"add\"`\n   - N√£o inclua `id` no payload\n   - O sistema gera ID automaticamente\n\n2. **Atualizar Webhook Existente**:\n   - Use `action: \"update\"`\n   - Inclua o `id` do webhook no payload\n   - Todos os campos ser√£o atualizados\n\n3. **Remover Webhook**:\n   - Use `action: \"delete\"`\n   - Inclua apenas o `id` do webhook\n   - Outros campos s√£o ignorados\n\n\n\n### Eventos Dispon√≠veis\n- `connection`: Altera√ß√µes no estado da conex√£o\n- `history`: Recebimento de hist√≥rico de mensagens\n- `messages`: Novas mensagens recebidas\n- `messages_update`: Atualiza√ß√µes em mensagens existentes\n- `call`: Eventos de chamadas VoIP\n- `contacts`: Atualiza√ß√µes na agenda de contatos\n- `presence`: Altera√ß√µes no status de presen√ßa\n- `groups`: Modifica√ß√µes em grupos\n- `labels`: Gerenciamento de etiquetas\n- `chats`: Eventos de conversas\n- `chat_labels`: Altera√ß√µes em etiquetas de conversas\n- `blocks`: Bloqueios/desbloqueios\n- `leads`: Atualiza√ß√µes de leads\n- `sender`: Atualiza√ß√µes de campanhas, quando inicia, e quando completa\n\n**Remover mensagens com base nos filtros**:\n- `wasSentByApi`: Mensagens originadas pela API ‚ö†Ô∏è **IMPORTANTE:** Use sempre este filtro para evitar loops em automa√ß√µes\n- `wasNotSentByApi`: Mensagens n√£o originadas pela API\n- `fromMeYes`: Mensagens enviadas pelo usu√°rio\n- `fromMeNo`: Mensagens recebidas de terceiros\n- `isGroupYes`: Mensagens em grupos\n- `isGroupNo`: Mensagens em conversas individuais\n\nüí° **Preven√ß√£o de Loops**: Se voc√™ tem automa√ß√µes que enviam mensagens via API, sempre inclua `\"excludeMessages\": [\"wasSentByApi\"]` no seu webhook. Caso prefira receber esses eventos, certifique-se de que sua automa√ß√£o detecta mensagens enviadas pela pr√≥pria API para n√£o criar loops infinitos.\n\n**A√ß√µes Suportadas**:\n- `add`: Registrar novo webhook\n- `delete`: Remover webhook existente\n\n**Par√¢metros de URL**:\n- `addUrlEvents` (boolean): Quando ativo, adiciona o tipo do evento como path parameter na URL.\n  Exemplo: `https://api.example.com/webhook/{evento}`\n- `addUrlTypesMessages` (boolean): Quando ativo, adiciona o tipo da mensagem como path parameter na URL.\n  Exemplo: `https://api.example.com/webhook/{tipo_mensagem}`\n\n**Combina√ß√µes de Par√¢metros**:\n- Ambos ativos: `https://api.example.com/webhook/{evento}/{tipo_mensagem}`\n  Exemplo real: `https://api.example.com/webhook/message/conversation`\n- Apenas eventos: `https://api.example.com/webhook/message`\n- Apenas tipos: `https://api.example.com/webhook/conversation`\n\n**Notas T√©cnicas**:\n1. Os par√¢metros s√£o adicionados na ordem: evento ‚Üí tipo mensagem\n2. A URL deve ser configurada para aceitar esses par√¢metros din√¢micos\n3. Funciona com qualquer combina√ß√£o de eventos/mensagens\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID √∫nico do webhook (necess√°rio para update/delete)","example":"123e4567-e89b-12d3-a456-426614174000"},"enabled":{"type":"boolean","description":"Habilita/desabilita o webhook","example":true},"url":{"type":"string","description":"URL para receber os eventos","example":"https://example.com/webhook"},"events":{"type":"array","description":"Lista de eventos monitorados","items":{"type":"string","enum":["connection","history","messages","messages_update","call","contacts","presence","groups","labels","chats","chat_labels","blocks","leads"]}},"excludeMessages":{"type":"array","description":"Filtros para excluir tipos de mensagens","items":{"type":"string","enum":["wasSentByApi","wasNotSentByApi","fromMeYes","fromMeNo","isGroupYes","isGroupNo"]}},"addUrlEvents":{"type":"boolean","description":"Adiciona o tipo do evento como par√¢metro na URL.\n- `false` (padr√£o): URL normal\n- `true`: Adiciona evento na URL (ex: `/webhook/message`)\n","default":false},"addUrlTypesMessages":{"type":"boolean","description":"Adiciona o tipo da mensagem como par√¢metro na URL.\n- `false` (padr√£o): URL normal  \n- `true`: Adiciona tipo da mensagem (ex: `/webhook/conversation`)\n","default":false},"action":{"type":"string","description":"A√ß√£o a ser executada:\n- add: criar novo webhook\n- update: atualizar webhook existente (requer id)\n- delete: remover webhook (requer apenas id)\nSe n√£o informado, opera no modo simples (√∫nico webhook)\n","enum":["add","update","delete"]}},"required":["url"]},"examples":{"modo_simples":{"summary":"Exemplo Modo Simples (Recomendado)","description":"Configura√ß√£o b√°sica sem complexidade","value":{"enabled":true,"url":"https://webhook.cool/example","events":["messages","connection"],"excludeMessages":["wasSentByApi"]}},"modo_avancado_criar":{"summary":"Modo Avan√ßado - Criar Webhook","description":"Criar novo webhook com ID autom√°tico","value":{"action":"add","enabled":true,"url":"https://api.exemplo.com/webhook","events":["messages","groups"],"excludeMessages":["wasSentByApi"]}},"modo_simples_com_urls":{"summary":"Modo Simples com URLs Din√¢micas","description":"Alternativa ao modo avan√ßado usando addUrlEvents","value":{"enabled":true,"url":"https://webhook.cool/api","events":["messages","connection","groups"],"excludeMessages":["wasSentByApi"],"addUrlEvents":true}}}}}},"responses":{"200":{"description":"Webhook configurado ou atualizado com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/webhook.yaml#/Webhook"}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid action"}}}}}},"401":{"description":"Token inv√°lido ou n√£o fornecido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"missing token"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Could not save webhook"}}}}}}}}},"/globalwebhook":{"get":{"operationId":"getGlobalWebhook","tags":["Admininstra√ß√£o"],"summary":"Ver Webhook Global","security":[{"admintoken":[]}],"description":"Retorna a configura√ß√£o atual do webhook global, incluindo:\n- URL configurada\n- Eventos ativos\n- Filtros aplicados\n- Configura√ß√µes adicionais\n\nExemplo de resposta:\n```json\n{\n  \"enabled\": true,\n  \"url\": \"https://example.com/webhook\",\n  \"events\": [\"messages\", \"messages_update\"],\n  \"excludeMessages\": [\"wasSentByApi\", \"isGroupNo\"],\n  \"addUrlEvents\": true,\n  \"addUrlTypesMessages\": true\n}\n```\n","responses":{"200":{"description":"Configura√ß√£o atual do webhook global","content":{"application/json":{"schema":{"$ref":"../schemas/webhook.yaml#/Webhook"}}}},"401":{"description":"Token de administrador n√£o fornecido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"403":{"description":"Token de administrador inv√°lido ou servidor demo","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"This is a public demo server. This endpoint has been disabled."}}}}}},"404":{"description":"Webhook global n√£o encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Global webhook not found"}}}}}}}},"post":{"operationId":"updateGlobalWebhook","tags":["Admininstra√ß√£o"],"summary":"Configurar Webhook Global","security":[{"admintoken":[]}],"description":"Configura um webhook global que receber√° eventos de todas as inst√¢ncias.\n\n### üöÄ Configura√ß√£o Simples (Recomendada)\n\n**Para a maioria dos casos de uso**:\n- Configure apenas URL e eventos desejados\n- Modo simples por padr√£o (sem complexidade)\n- **Recomendado**: Sempre use `\"excludeMessages\": [\"wasSentByApi\"]` para evitar loops\n- **Exemplo**: `{\"url\": \"https://webhook.cool/global\", \"events\": [\"messages\", \"connection\"], \"excludeMessages\": [\"wasSentByApi\"]}`\n\n### üß™ Sites para Testes (ordenados por qualidade)\n\n**Para testar webhooks durante desenvolvimento**:\n1. **https://webhook.cool/** - ‚≠ê Melhor op√ß√£o (sem rate limit, interface limpa)\n2. **https://rbaskets.in/** - ‚≠ê Boa alternativa (confi√°vel, baixo rate limit)\n3. **https://webhook.site/** - ‚ö†Ô∏è Evitar se poss√≠vel (rate limit agressivo)\n\n### Funcionalidades Principais:\n- Configura√ß√£o de URL para recebimento de eventos\n- Sele√ß√£o granular de tipos de eventos\n- Filtragem avan√ßada de mensagens\n- Par√¢metros adicionais na URL\n\n**Eventos Dispon√≠veis**:\n- `connection`: Altera√ß√µes no estado da conex√£o\n- `history`: Recebimento de hist√≥rico de mensagens\n- `messages`: Novas mensagens recebidas\n- `messages_update`: Atualiza√ß√µes em mensagens existentes\n- `call`: Eventos de chamadas VoIP\n- `contacts`: Atualiza√ß√µes na agenda de contatos\n- `presence`: Altera√ß√µes no status de presen√ßa\n- `groups`: Modifica√ß√µes em grupos\n- `labels`: Gerenciamento de etiquetas\n- `chats`: Eventos de conversas\n- `chat_labels`: Altera√ß√µes em etiquetas de conversas\n- `blocks`: Bloqueios/desbloqueios\n- `leads`: Atualiza√ß√µes de leads\n- `sender`: Atualiza√ß√µes de campanhas, quando inicia, e quando completa\n\n**Remover mensagens com base nos filtros**:\n- `wasSentByApi`: Mensagens originadas pela API ‚ö†Ô∏è **IMPORTANTE:** Use sempre este filtro para evitar loops em automa√ß√µes\n- `wasNotSentByApi`: Mensagens n√£o originadas pela API\n- `fromMeYes`: Mensagens enviadas pelo usu√°rio\n- `fromMeNo`: Mensagens recebidas de terceiros\n- `isGroupYes`: Mensagens em grupos\n- `isGroupNo`: Mensagens em conversas individuais\n\nüí° **Preven√ß√£o de Loops Globais**: O webhook global recebe eventos de TODAS as inst√¢ncias. Se voc√™ tem automa√ß√µes que enviam mensagens via API, sempre inclua `\"excludeMessages\": [\"wasSentByApi\"]`. Caso prefira receber esses eventos, certifique-se de que sua automa√ß√£o detecta mensagens enviadas pela pr√≥pria API para n√£o criar loops infinitos em m√∫ltiplas inst√¢ncias.\n\n**Par√¢metros de URL**:\n- `addUrlEvents` (boolean): Quando ativo, adiciona o tipo do evento como path parameter na URL.\n  Exemplo: `https://api.example.com/webhook/{evento}`\n- `addUrlTypesMessages` (boolean): Quando ativo, adiciona o tipo da mensagem como path parameter na URL.\n  Exemplo: `https://api.example.com/webhook/{tipo_mensagem}`\n\n**Combina√ß√µes de Par√¢metros**:\n- Ambos ativos: `https://api.example.com/webhook/{evento}/{tipo_mensagem}`\n  Exemplo real: `https://api.example.com/webhook/message/conversation`\n- Apenas eventos: `https://api.example.com/webhook/message`\n- Apenas tipos: `https://api.example.com/webhook/conversation`\n\n**Notas T√©cnicas**:\n1. Os par√¢metros s√£o adicionados na ordem: evento ‚Üí tipo mensagem\n2. A URL deve ser configurada para aceitar esses par√¢metros din√¢micos\n3. Funciona com qualquer combina√ß√£o de eventos/mensagens\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string","format":"uri","description":"URL para receber os eventos","example":"https://webhook.cool/global"},"events":{"type":"array","description":"Lista de eventos monitorados","items":{"type":"string","enum":["connection","history","messages","messages_update","call","contacts","presence","groups","labels","chats","chat_labels","blocks","leads","sender"]},"example":["messages","connection"]},"excludeMessages":{"type":"array","description":"Filtros para excluir tipos de mensagens","items":{"type":"string","enum":["wasSentByApi","wasNotSentByApi","fromMeYes","fromMeNo","isGroupYes","isGroupNo"]},"example":["wasSentByApi"]},"addUrlEvents":{"type":"boolean","description":"Adiciona o tipo do evento como par√¢metro na URL.\n- `false` (padr√£o): URL normal\n- `true`: Adiciona evento na URL (ex: `/webhook/message`)\n","default":false},"addUrlTypesMessages":{"type":"boolean","description":"Adiciona o tipo da mensagem como par√¢metro na URL.\n- `false` (padr√£o): URL normal  \n- `true`: Adiciona tipo da mensagem (ex: `/webhook/conversation`)\n","default":false}},"required":["url","events"]},"examples":{"configuracao_simples":{"summary":"Configura√ß√£o Simples (Recomendada)","description":"Configura√ß√£o b√°sica sem complexidade","value":{"url":"https://webhook.cool/global","events":["messages","connection"],"excludeMessages":["wasSentByApi"]}},"configuracao_completa":{"summary":"Configura√ß√£o Completa","description":"Exemplo com todos os recursos","value":{"url":"https://webhook.cool/api","events":["messages","connection","groups","leads"],"excludeMessages":["wasSentByApi","isGroupNo"],"addUrlEvents":true}}}}}},"responses":{"200":{"description":"Webhook global configurado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/webhook.yaml#/Webhook"}}}},"400":{"description":"Payload inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid payload"}}}}}},"401":{"description":"Token de administrador n√£o fornecido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"403":{"description":"Token de administrador inv√°lido ou servidor demo","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"This is a public demo server. This endpoint has been disabled."}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to save global webhook to database"}}}}}}}}},"/sse":{"get":{"operationId":"subscribeSSE","tags":["Webhooks e SSE"],"summary":"Server-Sent Events (SSE)","description":"Receber eventos em tempo real via Server-Sent Events (SSE)\n\n### Funcionalidades Principais:\n- Configura√ß√£o de URL para recebimento de eventos\n- Sele√ß√£o granular de tipos de eventos\n- Filtragem avan√ßada de mensagens\n- Par√¢metros adicionais na URL\n- Gerenciamento m√∫ltiplo de webhooks\n\n**Eventos Dispon√≠veis**:\n- `connection`: Altera√ß√µes no estado da conex√£o\n- `history`: Recebimento de hist√≥rico de mensagens\n- `messages`: Novas mensagens recebidas\n- `messages_update`: Atualiza√ß√µes em mensagens existentes\n- `call`: Eventos de chamadas VoIP\n- `contacts`: Atualiza√ß√µes na agenda de contatos\n- `presence`: Altera√ß√µes no status de presen√ßa\n- `groups`: Modifica√ß√µes em grupos\n- `labels`: Gerenciamento de etiquetas\n- `chats`: Eventos de conversas\n- `chat_labels`: Altera√ß√µes em etiquetas de conversas\n- `blocks`: Bloqueios/desbloqueios\n- `leads`: Atualiza√ß√µes de leads\n\n\nEstabelece uma conex√£o persistente para receber eventos em tempo real. Este\nendpoint:\n\n1. Requer autentica√ß√£o via token\n\n2. Mant√©m uma conex√£o HTTP aberta com o cliente\n\n3. Envia eventos conforme ocorrem no servidor\n\n4. Suporta diferentes tipos de eventos\n\nExemplo de uso:\n\n```javascript\n\nconst eventSource = new\nEventSource('/sse?token=SEU_TOKEN&events=chats,messages');\n\n\neventSource.onmessage = function(event) {\n  const data = JSON.parse(event.data);\n  console.log('Novo evento:', data);\n};\n\n\neventSource.onerror = function(error) {\n  console.error('Erro na conex√£o SSE:', error);\n};\n\n```\n\n\nEstrutura de um evento:\n\n```json\n\n{\n  \"type\": \"message\",\n  \"data\": {\n    \"id\": \"3EB0538DA65A59F6D8A251\",\n    \"from\": \"5511999999999@s.whatsapp.net\",\n    \"to\": \"5511888888888@s.whatsapp.net\",\n    \"text\": \"Ol√°!\",\n    \"timestamp\": 1672531200000\n  }\n}\n\n```","security":[],"parameters":[{"name":"token","in":"query","schema":{"type":"string"},"required":true,"description":"Token de autentica√ß√£o da inst√¢ncia","example":"{{token}}"},{"name":"events","in":"query","schema":{"type":"string"},"required":true,"description":"Tipos de eventos a serem recebidos. Suporta dois formatos:\n- Separados por v√≠rgula: `?events=chats,messages`\n- Par√¢metros repetidos: `?events=chats&events=messages`\n","example":"chats,messages"},{"name":"excludeMessages","in":"query","schema":{"type":"string"},"required":false,"description":"Tipos de mensagens a serem exclu√≠das do evento `messages`. Suporta dois formatos:\n- Separados por v√≠rgula: `?excludeMessages=poll,reaction`\n- Par√¢metros repetidos: `?excludeMessages=poll&excludeMessages=reaction`\n","example":"poll,reaction"}]}},"/agent/edit":{"post":{"operationId":"editAgent","tags":["Configura√ß√£o do Agente de IA"],"summary":"Criar/Editar Agente","description":"# Documenta√ß√£o dos Campos de Configura√ß√£o\n\n## Campos B√°sicos\n\n### Nome e Identifica√ß√£o\n\nO agente precisa ser configurado com informa√ß√µes b√°sicas que determinam sua identidade e funcionamento.\n\n#### Nome do Agente\n**name**: Define como o agente ser√° identificado nas conversas.\n\nExemplos v√°lidos:\n- \"Assistente de Vendas\"\n- \"Suporte T√©cnico\" \n- \"Jo√£o\"\n- \"Maria\"\n\n#### Provedor do Servi√ßo\n**provider**: Especifica qual servi√ßo de IA ser√° utilizado.\n\nProvedores dispon√≠veis:\n- \"openai\" (ChatGPT)\n- \"anthropic\" (Claude)\n- \"gemini\" (Google)\n- \"deepseek\" (DeepSeek)\n\n#### Chave de API\n**apikey**: Credencial necess√°ria para autentica√ß√£o com o provedor escolhido.\n- Deve ser obtida atrav√©s do site oficial do provedor selecionado\n- Mantenha esta chave em seguran√ßa e nunca a compartilhe\n\n### Configura√ß√£o do Modelo\n\n#### Sele√ß√£o do Modelo\n**model**: Especifica qual modelo de IA ser√° utilizado. A disponibilidade depende do provedor selecionado.\n\n##### OpenAI\nDocumenta√ß√£o: https://platform.openai.com/docs/models\n- gpt-4o\n- gpt-4o-mini\n- gpt-3.5-turbo\n\n##### Claude\nDocumenta√ß√£o: https://docs.anthropic.com/en/docs/about-claude/models\n- claude-3-5-sonnet-latest\n- claude-3-5-haiku-latest\n- claude-3-opus-latest\n\n##### Gemini\nDocumenta√ß√£o: https://ai.google.dev/models/gemini\n- gemini-2.0-flash-exp\n- gemini-1.5-pro\n- gemini-1.5-flash\n\n##### DeepSeek\nDocumenta√ß√£o: https://api-docs.deepseek.com/quick_start/pricing\n- deepseek-chat\n- deepseek-reasoner\n\n        \n\n## Configura√ß√µes de Comportamento\n\n\n### Prompt Base (**basePrompt**)\n\n\nInstru√ß√µes iniciais para definir o comportamento do agente\n    \nExemplo para assistente de vendas:\n\n\"Voc√™ √© um assistente especializado em vendas, focado em ajudar clientes a encontrar os produtos ideais. Mantenha um tom profissional e amig√°vel.\"\n        \nExemplo para suporte:\n\n\"Voc√™ √© um agente de suporte t√©cnico especializado em nossos produtos. Forne√ßa respostas claras e objetivas para ajudar os clientes a resolverem seus problemas.\"\n\n        \n\n### Par√¢metros de Gera√ß√£o\n\n\n- **temperature**: Controla a criatividade das respostas (0-100)\n    \n    - 0-30: Respostas mais conservadoras e precisas\n        \n    - 30-70: Equil√≠brio entre criatividade e precis√£o\n        \n    - 70-100: Respostas mais criativas e variadas\n\n        \n- **maxTokens**: Limite m√°ximo de tokens por resposta\n    \n    - Recomendado: 1000-4000 para respostas detalhadas\n        \n    - Para respostas curtas: 500-1000\n        \n    - Limite m√°ximo varia por modelo\n\n        \n- **diversityLevel**: Controla a diversidade das respostas (0-100)\n    \n    - Valores mais altos geram respostas mais variadas\n        \n    - Recomendado: 30-70 para uso geral\n\n        \n- **frequencyPenalty**: Penalidade para repeti√ß√£o de palavras (0-100)\n    \n    - Valores mais altos reduzem repeti√ß√µes\n        \n    - Recomendado: 20-50 para comunica√ß√£o natural\n\n        \n- **presencePenalty**: Penalidade para manter foco no t√≥pico (0-100)\n    \n    - Valores mais altos incentivam mudan√ßas de t√≥pico\n        \n    - Recomendado: 10-30 para manter coer√™ncia\n\n        \n\n## Configura√ß√µes de Intera√ß√£o\n\n\n### Mensagens\n\n\n- **signMessages**: Se verdadeiro, adiciona a assinatura do agente nas mensagens\n    \n    - √ötil para identificar quem est√° enviando a mensagem\n\n        \n- **readMessages**: Se verdadeiro, marca as mensagens como lidas ao responder\n    \n    - Recomendado para simular comportamento humano\n\n        \n\n## Exemplos de Configura√ß√£o\n\n\n### Assistente de Vendas\n\n\n``` json\n\n{\n  \"name\": \"Assistente de Vendas\",\n  \"provider\": \"openai\",\n  \"model\": \"gpt-4\",\n  \"basePrompt\": \"Voc√™ √© um assistente de vendas especializado...\",\n  \"temperature\": 70,\n  \"maxTokens\": 2000,\n  \"diversityLevel\": 50,\n  \"frequencyPenalty\": 30,\n  \"presencePenalty\": 20,\n  \"signMessages\": true,\n  \"readMessages\": true\n}\n\n  ```\n\n### Suporte T√©cnico\n\n\n``` json\n\n{\n  \"name\": \"Suporte T√©cnico\",\n  \"provider\": \"anthropic\",\n  \"model\": \"claude-3-sonnet-20240229\",\n  \"basePrompt\": \"Voc√™ √© um agente de suporte t√©cnico...\",\n  \"temperature\": 30,\n  \"maxTokens\": 3000,\n  \"diversityLevel\": 40,\n  \"frequencyPenalty\": 40,\n  \"presencePenalty\": 15,\n  \"signMessages\": true,\n  \"readMessages\": true\n}\n\n  ```\n\n## Dicas de Otimiza√ß√£o\n\n\n1. **Ajuste Gradual**: Comece com valores moderados e ajuste conforme necess√°rio\n    \n2. **Teste o Base Prompt**: Verifique se as instru√ß√µes est√£o claras e completas\n    \n3. **Monitore o Desempenho**: Observe as respostas e ajuste os par√¢metros para melhor adequa√ß√£o\n    \n4. **Backup**: Mantenha um backup das configura√ß√µes que funcionaram bem\n    \n5. **Documenta√ß√£o**: Registre as altera√ß√µes e seus impactos para refer√™ncia futura\n","requestBody":{"content":{"application/json":{"schema":{"type":"object","example":{"id":"","delete":false,"agent":{"name":"uazabot","provider":"openai","apikey":"sk-proj-HfXFgA","basePrompt":"Seu nome √© Sara e voc√™ faz parte do time de suporte ao cliente da TechShop...","model":"gpt-4o-mini","maxTokens":2000,"temperature":70,"diversityLevel":50,"frequencyPenalty":30,"presencePenalty":30,"signMessages":true,"readMessages":true,"maxMessageLength":500,"typingDelay_seconds":3,"contextTimeWindow_hours":24,"contextMaxMessages":50,"contextMinMessages":3}}}}}},"responses":{"200":{"description":"Agente atualizado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_ai_agent.yaml#/ChatbotAIAgent"}}}},"201":{"description":"Novo agente criado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_ai_agent.yaml#/ChatbotAIAgent"}}}},"400":{"description":"Erro na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing required fields"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"404":{"description":"Agente n√£o encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Agent not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to create agent"}}}}}}}}},"/agent/list":{"get":{"operationId":"listAgents","tags":["Configura√ß√£o do Agente de IA"],"summary":"Todos os agentes","parameters":[],"responses":{"200":{"description":"Lista de todos os agentes de IA","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/chatbot_ai_agent.yaml#/ChatbotAIAgent"}}}}},"401":{"description":"Sess√£o n√£o encontrada","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"500":{"description":"Erro ao buscar agentes","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to fetch agents"}}}}}}}}},"/sender/simple":{"post":{"operationId":"sendSimpleCampaign","tags":["Mensagem em massa"],"summary":"Criar nova campanha (Simples)","description":"Cria uma nova campanha de envio com configura√ß√µes b√°sicas","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["numbers","type","delayMin","delayMax","scheduled_for"],"properties":{"numbers":{"type":"array","description":"Lista de n√∫meros para envio","items":{"type":"string"},"example":["5511999999999@s.whatsapp.net"]},"type":{"type":"string","description":"Tipo da mensagem","enum":["text","image","video","audio","document","contact","location","list","button","poll","carousel"]},"folder":{"type":"string","description":"Nome da campanha de envio","example":"Campanha Janeiro"},"delayMin":{"type":"integer","description":"Delay m√≠nimo entre mensagens em segundos","minimum":1,"example":10},"delayMax":{"type":"integer","description":"Delay m√°ximo entre mensagens em segundos","minimum":1,"example":30},"scheduled_for":{"type":"integer","description":"Timestamp em milissegundos ou minutos a partir de agora para agendamento","example":1706198400000},"info":{"type":"string","description":"Informa√ß√µes adicionais sobre a campanha"},"delay":{"type":"integer","description":"Delay fixo entre mensagens (opcional)"},"mentions":{"type":"string","description":"Men√ß√µes na mensagem em formato JSON"},"text":{"type":"string","description":"Texto da mensagem"},"linkPreview":{"type":"boolean","description":"Habilitar preview de links em mensagens de texto. O preview ser√° gerado automaticamente a partir da URL contida no texto."},"linkPreviewTitle":{"type":"string","description":"T√≠tulo personalizado para o preview do link (opcional)"},"linkPreviewDescription":{"type":"string","description":"Descri√ß√£o personalizada para o preview do link (opcional)"},"linkPreviewImage":{"type":"string","description":"URL ou dados base64 da imagem para o preview do link (opcional)"},"linkPreviewLarge":{"type":"boolean","description":"Se deve usar preview grande ou pequeno (opcional, padr√£o false)"},"file":{"type":"string","description":"URL da m√≠dia ou arquivo (quando type √© image, video, audio, document, etc.)"},"docName":{"type":"string","description":"Nome do arquivo (quando type √© document)"},"fullName":{"type":"string","description":"Nome completo (quando type √© contact)"},"phoneNumber":{"type":"string","description":"N√∫mero do telefone (quando type √© contact)"},"organization":{"type":"string","description":"Organiza√ß√£o (quando type √© contact)"},"email":{"type":"string","description":"Email (quando type √© contact)"},"url":{"type":"string","description":"URL (quando type √© contact)"},"latitude":{"type":"number","description":"Latitude (quando type √© location)"},"longitude":{"type":"number","description":"Longitude (quando type √© location)"},"name":{"type":"string","description":"Nome do local (quando type √© location)"},"address":{"type":"string","description":"Endere√ßo (quando type √© location)"},"footerText":{"type":"string","description":"Texto do rodap√© (quando type √© list, button, poll ou carousel)"},"buttonText":{"type":"string","description":"Texto do bot√£o (quando type √© list, button, poll ou carousel)"},"listButton":{"type":"string","description":"Texto do bot√£o da lista (quando type √© list)"},"selectableCount":{"type":"integer","description":"Quantidade de op√ß√µes selecion√°veis (quando type √© poll)"},"choices":{"type":"array","items":{"type":"string"},"description":"Lista de op√ß√µes (quando type √© list, button, poll ou carousel). Para carousel, use formato espec√≠fico com [texto], {imagem} e bot√µes"},"imageButton":{"type":"string","description":"URL da imagem para o bot√£o (quando type √© button)"}}}}}},"responses":{"200":{"description":"campanha criada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"folder_id":{"type":"string","description":"ID √∫nico da campanha criada"},"count":{"type":"integer","description":"Quantidade de mensagens agendadas"},"status":{"type":"string","description":"Status da opera√ß√£o","example":"queued"}}}}}},"400":{"description":"Erro nos par√¢metros da requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}},"401":{"description":"Erro de autentica√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}},"409":{"description":"Conflito - campanha j√° existe","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}}}},"/sender/advanced":{"post":{"operationId":"sendAdvancedCampaign","tags":["Mensagem em massa"],"summary":"Criar envio em massa avan√ßado","description":"Cria um novo envio em massa com configura√ß√µes avan√ßadas, permitindo definir\nm√∫ltiplos destinat√°rios e mensagens com delays personalizados.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"delayMin":{"type":"integer","description":"Delay m√≠nimo entre mensagens (segundos)","minimum":0,"example":3},"delayMax":{"type":"integer","description":"Delay m√°ximo entre mensagens (segundos)","minimum":0,"example":6},"info":{"type":"string","description":"Descri√ß√£o ou informa√ß√£o sobre o envio em massa","example":"Campanha de lan√ßamento"},"scheduled_for":{"type":"integer","description":"Timestamp em milissegundos (date unix) ou minutos a partir de agora para agendamento","example":1},"messages":{"type":"array","description":"Lista de mensagens a serem enviadas","items":{"type":"object","required":["number","type"],"properties":{"number":{"type":"string","description":"ID do chat ou n√∫mero do destinat√°rio.","example":"5511999999999"},"type":{"type":"string","enum":["text","image","document","audio","ptt","myaudio","sticker","video","contact","location","poll","list","button","carousel"],"description":"Tipo da mensagem:\n- text: Mensagem de texto\n- image: Imagem\n- document: Documento/arquivo\n- audio: √Åudio\n- ptt: Mensagem de voz\n- myaudio: √Åudio (op√ß√£o alternativa)\n- sticker: Figurinha\n- video: V√≠deo\n- contact: Contato\n- location: Localiza√ß√£o\n- poll: Enquete\n- list: Lista de op√ß√µes\n- button: Bot√µes interativos\n- carousel: Carrossel de cart√µes com imagens e bot√µes\n"},"text":{"type":"string","description":"Texto da mensagem (quando type √© \"text\") ou legenda para m√≠dia"},"file":{"type":"string","description":"URL da m√≠dia (quando type √© image, video, audio, document, etc)"},"docName":{"type":"string","description":"Nome do arquivo (quando type √© document)"},"linkPreview":{"type":"boolean","description":"Se deve gerar preview de links (quando type √© text). O preview ser√° gerado automaticamente a partir da URL contida no texto."},"linkPreviewTitle":{"type":"string","description":"T√≠tulo personalizado para o preview do link (opcional)"},"linkPreviewDescription":{"type":"string","description":"Descri√ß√£o personalizada para o preview do link (opcional)"},"linkPreviewImage":{"type":"string","description":"URL ou dados base64 da imagem para o preview do link (opcional)"},"linkPreviewLarge":{"type":"boolean","description":"Se deve usar preview grande ou pequeno (opcional, padr√£o false)"},"fullName":{"type":"string","description":"Nome completo (quando type √© contact)"},"phoneNumber":{"type":"string","description":"N√∫mero do telefone (quando type √© contact)"},"organization":{"type":"string","description":"Organiza√ß√£o (quando type √© contact)"},"email":{"type":"string","description":"Email (quando type √© contact)"},"url":{"type":"string","description":"URL (quando type √© contact)"},"latitude":{"type":"number","description":"Latitude (quando type √© location)"},"longitude":{"type":"number","description":"Longitude (quando type √© location)"},"name":{"type":"string","description":"Nome do local (quando type √© location)"},"address":{"type":"string","description":"Endere√ßo (quando type √© location)"},"footerText":{"type":"string","description":"Texto do rodap√© (quando type √© list, button, poll ou carousel)"},"buttonText":{"type":"string","description":"Texto do bot√£o (quando type √© list, button, poll ou carousel)"},"listButton":{"type":"string","description":"Texto do bot√£o da lista (quando type √© list)"},"selectableCount":{"type":"integer","description":"Quantidade de op√ß√µes selecion√°veis (quando type √© poll)"},"choices":{"type":"array","items":{"type":"string"},"description":"Lista de op√ß√µes (quando type √© list, button, poll ou carousel). Para carousel, use formato espec√≠fico com [texto], {imagem} e bot√µes"},"imageButton":{"type":"string","description":"URL da imagem para o bot√£o (quando type √© button)"}}}}},"required":["messages"],"example":{"delayMin":3,"delayMax":6,"info":"teste avan√ßado","scheduled_for":1,"messages":[{"number":"5511999999999","type":"text","text":"First message"},{"number":"5511999999999","type":"button","text":"Promo√ß√£o Especial!\nConfira nossas ofertas incr√≠veis","footerText":"V√°lido at√© 31/12/2024","imageButton":"https://exemplo.com/banner-promocao.jpg","choices":["Ver Ofertas|https://loja.exemplo.com/ofertas","Falar com Vendedor|reply:vendedor","Copiar Cupom|copy:PROMO2024"]},{"number":"5511999999999","type":"list","text":"Escolha sua categoria preferida:","listButton":"Ver Categorias","choices":["[Eletr√¥nicos]","Smartphones|eletronicos_smartphones","Notebooks|eletronicos_notebooks","[Roupas]","Camisetas|roupas_camisetas","Sapatos|roupas_sapatos"]},{"number":"5511999999999","type":"document","file":"https://example.com/doc.pdf","docName":"Documento.pdf"},{"number":"5511999999999","type":"carousel","text":"Conhe√ßa nossos produtos","choices":["[Smartphone XYZ\nO mais avan√ßado smartphone da linha]","{https://exemplo.com/produto1.jpg}","Copiar C√≥digo|copy:PROD123","Ver no Site|https://exemplo.com/xyz","[Notebook ABC\nO notebook ideal para profissionais]","{https://exemplo.com/produto2.jpg}","Copiar C√≥digo|copy:NOTE456","Comprar Online|https://exemplo.com/abc"]}]}}}}},"responses":{"200":{"description":"Mensagens adicionadas √† fila com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"folder_id":{"type":"string","description":"ID da pasta/lote criado"},"count":{"type":"integer","description":"Total de mensagens adicionadas √† fila"},"status":{"type":"string","description":"Status da opera√ß√£o","example":"queued"}}}}}},"400":{"description":"Erro nos par√¢metros da requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro","example":"Formato de n√∫mero inv√°lido"}}}}}},"401":{"description":"N√£o autorizado - token inv√°lido ou ausente","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro","example":"Token inv√°lido ou ausente"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Detalhes do erro interno"}}}}}}}}},"/sender/edit":{"post":{"operationId":"editCampaign","tags":["Mensagem em massa"],"summary":"Controlar campanha de envio em massa","description":"Permite controlar campanhas de envio de mensagens em massa atrav√©s de diferentes a√ß√µes:\n\n## A√ß√µes Dispon√≠veis:\n\n**üõë stop** - Pausar campanha\n- Pausa uma campanha ativa ou agendada\n- Altera o status para \"paused\" \n- Use quando quiser interromper temporariamente o envio\n- Mensagens j√° enviadas n√£o s√£o afetadas\n\n**‚ñ∂Ô∏è continue** - Continuar campanha  \n- Retoma uma campanha pausada\n- Altera o status para \"scheduled\"\n- Use para continuar o envio ap√≥s pausar uma campanha\n- N√£o funciona em campanhas j√° conclu√≠das (\"done\")\n\n**üóëÔ∏è delete** - Deletar campanha\n- Remove completamente a campanha\n- Deleta apenas mensagens N√ÉO ENVIADAS (status \"scheduled\")\n- Mensagens j√° enviadas s√£o preservadas no hist√≥rico\n- Opera√ß√£o √© executada de forma ass√≠ncrona\n\n## Status de Campanhas:\n- **scheduled**: Agendada para envio\n- **sending**: Enviando mensagens  \n- **paused**: Pausada pelo usu√°rio\n- **done**: Conclu√≠da (n√£o pode ser alterada)\n- **deleting**: Sendo deletada (opera√ß√£o em andamento)\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"folder_id":{"type":"string","description":"Identificador √∫nico da campanha de envio","example":"folder_123"},"action":{"type":"string","enum":["stop","continue","delete"],"description":"A√ß√£o a ser executada na campanha:\n- **stop**: Pausa a campanha (muda para status \"paused\")\n- **continue**: Retoma campanha pausada (muda para status \"scheduled\") \n- **delete**: Remove campanha e mensagens n√£o enviadas (ass√≠ncrono)\n","example":"stop"}},"required":["folder_id","action"]}}}},"responses":{"200":{"description":"A√ß√£o realizada com sucesso","content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"Resposta para a√ß√£o 'stop'","properties":{"status":{"type":"string","enum":["paused"],"description":"Status da campanha ap√≥s pausar","example":"paused"}}},{"type":"object","title":"Resposta para a√ß√£o 'continue'","properties":{"status":{"type":"string","enum":["scheduled"],"description":"Status da campanha ap√≥s retomar","example":"scheduled"},"message":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Folder resumed successfully"}}},{"type":"object","title":"Resposta para a√ß√£o 'delete'","properties":{"status":{"type":"string","enum":["deleting"],"description":"Status indicando que a dele√ß√£o foi iniciada","example":"deleting"},"message":{"type":"string","description":"Mensagem informando que a dele√ß√£o √© ass√≠ncrona","example":"Folder deletion has been initiated"}}}]}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"folder_id is required"}}}}}}}}},"/sender/cleardone":{"post":{"operationId":"clearDoneCampaigns","tags":["Mensagem em massa"],"summary":"Limpar mensagens enviadas","description":"Inicia processo de limpeza de mensagens antigas em lote que j√° foram enviadas com sucesso. Por padr√£o, remove mensagens mais antigas que 7 dias.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"hours":{"type":"integer","description":"Quantidade de horas para manter mensagens. Mensagens mais antigas que esse valor ser√£o removidas.","example":168,"default":168}}}}}},"responses":{"200":{"description":"Limpeza iniciada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","description":"Status da opera√ß√£o","example":"cleanup started"}}}}}}}}},"/sender/clearall":{"delete":{"operationId":"clearAllCampaigns","tags":["Mensagem em massa"],"summary":"Limpar toda fila de mensagens","description":"Remove todas as mensagens da fila de envio em massa, incluindo mensagens pendentes e j√° enviadas.\nEsta √© uma opera√ß√£o irrevers√≠vel.\n","responses":{"200":{"description":"Fila de mensagens limpa com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","description":"Status da opera√ß√£o","example":"processed"},"messages_deleted":{"type":"integer","description":"Quantidade de mensagens deletadas","example":150},"folders_deleted":{"type":"integer","description":"Quantidade de pastas deletadas","example":3}}}}}},"401":{"description":"N√£o autorizado - token inv√°lido ou ausente","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro","example":"Token inv√°lido ou ausente"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Detalhes do erro interno"}}}}}}}}},"/sender/listfolders":{"get":{"operationId":"listCampaignFolders","tags":["Mensagem em massa"],"summary":"Listar campanhas de envio","description":"Retorna todas as campanhas de mensagens em massa com possibilidade de filtro por status","security":[],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["Active","Archived"]},"description":"Filtrar campanhas por status"}],"responses":{"200":{"description":"Lista de campanhas retornada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/message_queue_folder.yaml#/MessageQueueFolder"}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}}}},"/sender/listmessages":{"post":{"operationId":"listCampaignMessages","tags":["Mensagem em massa"],"summary":"Listar mensagens de uma campanha","description":"Retorna a lista de mensagens de uma campanha espec√≠fica, com op√ß√µes de filtro por status e pagina√ß√£o","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"folder_id":{"type":"string","description":"ID da campanha a ser consultada"},"messageStatus":{"type":"string","enum":["Scheduled","Sent","Failed"],"description":"Status das mensagens para filtrar"},"page":{"type":"integer","minimum":1,"default":1,"description":"N√∫mero da p√°gina para pagina√ß√£o"},"pageSize":{"type":"integer","minimum":1,"maximum":1000,"default":1000,"description":"Quantidade de itens por p√°gina"}},"required":["folder_id"]}}}},"responses":{"200":{"description":"Lista de mensagens retornada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"messages":{"type":"array","items":{"$ref":"../schemas/message.yaml#/Message"}},"pagination":{"type":"object","properties":{"total":{"type":"integer","description":"Total de mensagens encontradas"},"page":{"type":"integer","description":"P√°gina atual"},"pageSize":{"type":"integer","description":"Itens por p√°gina"},"lastPage":{"type":"integer","description":"N√∫mero da √∫ltima p√°gina"}}}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"folder_id is required"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to fetch messages"}}}}}}}}},"/trigger/edit":{"post":{"operationId":"editTrigger","tags":["Chatbot Trigger"],"summary":"Criar, atualizar ou excluir um trigger do chatbot","description":"Endpoint para gerenciar triggers do chatbot. Suporta:\n- Cria√ß√£o de novos triggers\n- Atualiza√ß√£o de triggers existentes\n- Exclus√£o de triggers por ID\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["trigger"],"properties":{"id":{"type":"string","description":"ID do trigger. Vazio para cria√ß√£o, obrigat√≥rio para atualiza√ß√£o/exclus√£o"},"delete":{"type":"boolean","description":"Quando verdadeiro, exclui o trigger especificado pelo id","default":false},"trigger":{"$ref":"../schemas/chatbot_trigger.yaml#/ChatbotTrigger"}}},"examples":{"create":{"summary":"Criar novo trigger","value":{"id":"","delete":false,"trigger":{"active":true,"type":"agent","agent_id":"ref2ed7ab21d4ea","ignoreGroups":true,"lead_field":"lead_status","lead_operator":"equals","lead_value":"novo","priority":1,"wordsToStart":"ola|oi|iniciar","responseDelay_seconds":6}}},"update":{"summary":"Atualizar trigger existente","value":{"id":"r7ab21d4","delete":false,"trigger":{"active":false,"type":"agent","agent_id":"ref2ed7ab21d4ea"}}},"delete":{"summary":"Excluir trigger","value":{"id":"r7ab21d4","delete":true}}}}}},"responses":{"200":{"description":"Trigger atualizado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_trigger.yaml#/ChatbotTrigger"}}}},"201":{"description":"Trigger criado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_trigger.yaml#/ChatbotTrigger"}}}},"400":{"description":"Corpo da requisi√ß√£o inv√°lido ou campos obrigat√≥rios ausentes","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}},"404":{"description":"Trigger n√£o encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}},"500":{"description":"Erro no servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}}}},"/trigger/list":{"get":{"operationId":"listTriggers","tags":["Chatbot Trigger"],"summary":"Listar todos os triggers do chatbot","description":"Retorna a lista completa de triggers configurados para a inst√¢ncia atual","parameters":[],"responses":{"200":{"description":"Lista de triggers retornada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/chatbot_trigger.yaml#/ChatbotTrigger"}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"500":{"description":"Erro no servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to fetch triggers"}}}}}}}}},"/knowledge/edit":{"post":{"operationId":"editKnowledge","tags":["Conhecimento dos Agentes"],"summary":"Criar/Editar Conhecimento do Agente","description":"Gerencia o conhecimento base usado pelos agentes de IA para responder consultas.\nO conhecimento pode ser fornecido como texto direto ou atrav√©s de arquivos PDF/CSV.\n\nCaracter√≠sticas principais:\n- Suporta cria√ß√£o, edi√ß√£o e exclus√£o de conhecimento\n- Aceita conte√∫do em:\n  - Texto puro\n  - URLs p√∫blicas\n  - Base64 encoded de arquivos\n  - Upload direto de arquivos\n- Formatos suportados: PDF, CSV, TXT, HTML\n- Processa automaticamente qualquer formato de entrada\n- Vetoriza automaticamente o conte√∫do para busca sem√¢ntica\n\nNota sobre URLs e Base64:\n- URLs devem ser p√∫blicas e acess√≠veis\n- Para PDFs/CSVs, especifique fileType se n√£o for detect√°vel da extens√£o\n- Base64 deve incluir o encoding completo do arquivo\n- O servidor detecta e processa automaticamente conte√∫do Base64\n","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"ID do conhecimento (vazio para criar novo)"},"delete":{"type":"boolean","description":"Define se √© uma opera√ß√£o de exclus√£o"},"knowledge":{"type":"object","properties":{"active":{"type":"boolean","description":"Status de ativa√ß√£o do conhecimento"},"tittle":{"type":"string","description":"T√≠tulo identificador do conhecimento"},"content":{"type":"string","description":"Conte√∫do textual, URL ou Base64"}}},"fileType":{"type":"string","enum":["pdf","txt","html","csv"],"description":"Tipo do arquivo quando n√£o detectado automaticamente"}},"example":{"id":"","delete":false,"knowledge":{"active":true,"tittle":"Informa√ß√µes sobre a uazapi","content":"A uazapi foi originalmente desenvolvida..."}}}}}},"responses":{"200":{"description":"Conhecimento atualizado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_ai_knowledge.yaml#/ChatbotAIKnowledge"}}}},"201":{"description":"Novo conhecimento criado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_ai_knowledge.yaml#/ChatbotAIKnowledge"}}}},"400":{"description":"Requisi√ß√£o inv√°lida"},"404":{"description":"Conhecimento n√£o encontrado"},"500":{"description":"Erro interno do servidor"}}}},"/knowledge/list":{"get":{"operationId":"listKnowledge","tags":["Conhecimento dos Agentes"],"summary":"Listar Base de Conhecimento","description":"Retorna todos os conhecimentos cadastrados para o agente de IA da inst√¢ncia.\nEstes conhecimentos s√£o utilizados pelo chatbot para responder perguntas\ne interagir com os usu√°rios de forma contextualizada.\n","parameters":[],"responses":{"200":{"description":"Lista de conhecimentos recuperada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/chatbot_ai_knowledge.yaml#/ChatbotAIKnowledge"}}}}},"401":{"description":"Token de autentica√ß√£o ausente ou inv√°lido"},"500":{"description":"Erro interno do servidor ao buscar conhecimentos"}}}},"/function/edit":{"post":{"operationId":"editFunction","tags":["Fun√ß√µes API dos Agentes"],"summary":"Criar/Editar fun√ß√£o para integra√ß√£o com APIs externas","description":"# Configura√ß√£o de Fun√ß√µes de API para Agentes IA\n\nDocumenta√ß√£o para criar/editar fun√ß√µes utilizadas pelos agentes de IA para integra√ß√£o com APIs externas. Inclui valida√ß√£o autom√°tica e controle de ativa√ß√£o.\n\n## 1. Estrutura Base da Fun√ß√£o\n\n### Campos Principais\n```json\n{\n  \"name\": \"nomeDaFuncao\",\n  \"description\": \"Descri√ß√£o detalhada\",\n  \"active\": true,\n  \"method\": \"POST\",\n  \"endpoint\": \"https://api.exemplo.com/recurso\",\n  \"headers\": {},\n  \"body\": {},\n  \"parameters\": []\n}\n```\n\n### Detalhamento dos Campos\n\n#### `name`\n- Identificador √∫nico e descritivo\n- Sem espa√ßos ou caracteres especiais\n- Ex: \"createProduct\", \"updateUserStatus\"\n\n#### `description`\n- Prop√≥sito e funcionamento da fun√ß√£o\n- Inclua casos de uso e resultados esperados\n- Ex: \"Cria produto no cat√°logo com nome, pre√ßo e categoria\"\n\n#### `active`\n- Controla disponibilidade da fun√ß√£o\n- Desativa automaticamente se houver erros\n- Default: false\n\n#### `method`\n- GET: buscar dados\n- POST: criar recurso\n- PUT: atualizar completo\n- PATCH: atualiza√ß√£o parcial\n- DELETE: remover recurso\n\n#### `endpoint`\n- URL completa da API\n- Aceita placeholders: {{variavel}}\n- Exemplos:\n  ```\n  https://api.exemplo.com/produtos\n  https://api.exemplo.com/usuarios/{{userId}}\n  https://api.exemplo.com/busca?q={{query}}&limit={{limit}}\n  ```\n\n#### `headers`\n```json\n{\n  \"Authorization\": \"Bearer {{apiKey}}\",\n  \"Content-Type\": \"application/json\",\n  \"Accept\": \"application/json\"\n}\n```\n\n#### `body` (POST/PUT/PATCH)\n```json\n{\n  \"name\": \"{{productName}}\",\n  \"price\": \"{{price}}\",\n  \"metadata\": {\n    \"tags\": \"{{tags}}\"\n  }\n}\n```\n\n## 2. Configura√ß√£o de Par√¢metros\n\n### Estrutura do Par√¢metro\n```json\n{\n  \"name\": \"nomeParametro\",\n  \"type\": \"string\",\n  \"description\": \"Descri√ß√£o do uso\",\n  \"required\": true,\n  \"enum\": \"valor1,valor2,valor3\",\n  \"minimum\": 0,\n  \"maximum\": 100\n}\n```\n\n### Tipos de Par√¢metros\n\n#### String\n```json\n{\n  \"name\": \"status\",\n  \"type\": \"string\",\n  \"description\": \"Status do pedido\",\n  \"required\": true,\n  \"enum\": \"pending,processing,completed\"\n}\n```\n\n#### N√∫mero\n```json\n{\n  \"name\": \"price\",\n  \"type\": \"number\",\n  \"description\": \"Pre√ßo em reais\",\n  \"required\": true,\n  \"minimum\": 0.01,\n  \"maximum\": 99999.99\n}\n```\n\n#### Inteiro\n```json\n{\n  \"name\": \"quantity\",\n  \"type\": \"integer\",\n  \"description\": \"Quantidade\",\n  \"minimum\": 0,\n  \"maximum\": 1000\n}\n```\n\n#### Boolean\n```json\n{\n  \"name\": \"active\",\n  \"type\": \"boolean\",\n  \"description\": \"Status de ativa√ß√£o\"\n}\n```\n\n## 3. Sistema de Valida√ß√£o\n\n### Valida√ß√µes Autom√°ticas\n1. JSON\n  - Headers e body devem ser v√°lidos\n  - Erros desativam a fun√ß√£o\n\n2. Placeholders ({{variavel}})\n  - Case-sensitive\n  - Devem ter par√¢metro correspondente\n\n3. Par√¢metros\n  - Nomes √∫nicos\n  - Tipos corretos\n  - Limites num√©ricos v√°lidos\n  - Enums sem valores vazios\n\n### Erros e Avisos\n- Fun√ß√£o desativa se houver:\n  - JSON inv√°lido\n  - Par√¢metros n√£o documentados\n  - Viola√ß√µes de tipo\n- Erros aparecem em `undocumentedParameters`\n\n## 4. Exemplo Completo\n\n```json\n{\n  \"name\": \"createProduct\",\n  \"description\": \"Criar novo produto no cat√°logo\",\n  \"active\": true,\n  \"method\": \"POST\",\n  \"endpoint\": \"https://api.store.com/v1/products\",\n  \"headers\": {\n    \"Authorization\": \"Bearer {{apiKey}}\",\n    \"Content-Type\": \"application/json\"\n  },\n  \"body\": {\n    \"name\": \"{{productName}}\",\n    \"price\": \"{{price}}\",\n    \"category\": \"{{category}}\"\n  },\n  \"parameters\": [\n    {\n      \"name\": \"apiKey\",\n      \"type\": \"string\",\n      \"description\": \"Chave de API\",\n      \"required\": true\n    },\n    {\n      \"name\": \"productName\",\n      \"type\": \"string\",\n      \"description\": \"Nome do produto\",\n      \"required\": true\n    },\n    {\n      \"name\": \"price\",\n      \"type\": \"number\",\n      \"description\": \"Pre√ßo em reais\",\n      \"required\": true,\n      \"minimum\": 0.01\n    },\n    {\n      \"name\": \"category\",\n      \"type\": \"string\",\n      \"description\": \"Categoria do produto\",\n      \"required\": true,\n      \"enum\": \"electronics,clothing,books\"\n    }\n  ]\n}\n```\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["id","delete","function"],"properties":{"id":{"type":"string","description":"ID da fun√ß√£o. Vazio para criar nova, preenchido para editar existente."},"delete":{"type":"boolean","description":"Se true, deleta a fun√ß√£o especificada pelo ID."},"function":{"type":"object","required":["name","description","method","endpoint"],"properties":{"name":{"type":"string","description":"Nome da fun√ß√£o","example":"createProduct"},"active":{"type":"boolean","description":"Status de ativa√ß√£o da fun√ß√£o","default":false},"description":{"type":"string","description":"Descri√ß√£o detalhada da fun√ß√£o e seu prop√≥sito","example":"Cria um novo produto no cat√°logo"},"method":{"type":"string","description":"M√©todo HTTP da requisi√ß√£o","enum":["GET","POST","PUT","DELETE","PATCH"],"example":"POST"},"endpoint":{"type":"string","description":"URL do endpoint da API","example":"https://api.example.com/products"},"headers":{"type":"object","description":"Cabe√ßalhos da requisi√ß√£o. Suporta placeholders no formato {{variavel}}","example":{"Authorization":"Bearer {{apiKey}}","Content-Type":"application/json"}},"body":{"type":"object","description":"Corpo da requisi√ß√£o. Suporta placeholders no formato {{variavel}}","example":{"name":"{{productName}}","price":"{{price}}","category":"{{category}}"}},"parameters":{"type":"array","description":"Lista de par√¢metros aceitos pela fun√ß√£o","items":{"type":"object","required":["name","type","description"],"properties":{"name":{"type":"string","description":"Nome do par√¢metro"},"type":{"type":"string","enum":["string","number","integer","boolean","array","object"],"description":"Tipo do par√¢metro"},"description":{"type":"string","description":"Descri√ß√£o do par√¢metro"},"required":{"type":"boolean","description":"Indica se o par√¢metro √© obrigat√≥rio"},"enum":{"type":"string","description":"Lista de valores permitidos para par√¢metros do tipo string, separados por v√≠rgula"},"minimum":{"type":"number","description":"Valor m√≠nimo para par√¢metros num√©ricos"},"maximum":{"type":"number","description":"Valor m√°ximo para par√¢metros num√©ricos"}}},"example":[{"name":"apiKey","type":"string","description":"Chave de API para autentica√ß√£o","required":true},{"name":"price","type":"number","description":"Pre√ßo do produto","minimum":0.01,"maximum":999999.99,"required":true}]}}}}}}}},"responses":{"200":{"description":"Fun√ß√£o atualizada com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_ai_function.yaml#/ChatbotAIFunction"}}}},"201":{"description":"Nova fun√ß√£o criada com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chatbot_ai_function.yaml#/ChatbotAIFunction"}}}},"400":{"description":"Erro de valida√ß√£o nos dados fornecidos","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}},"404":{"description":"Fun√ß√£o n√£o encontrada"},"500":{"description":"Erro interno do servidor"}}}},"/function/list":{"get":{"operationId":"listFunctions","tags":["Fun√ß√µes API dos Agentes"],"summary":"Lista todas as fun√ß√µes de API","description":"Retorna todas as fun√ß√µes de API configuradas para a inst√¢ncia atual","responses":{"200":{"description":"Lista de fun√ß√µes recuperada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/chatbot_ai_function.yaml#/ChatbotAIFunction"}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}}}},"/chat/block":{"post":{"operationId":"blockChat","summary":"Bloqueia ou desbloqueia contato do WhatsApp","description":"Bloqueia ou desbloqueia um contato do WhatsApp. Contatos bloqueados n√£o podem enviar mensagens \npara a inst√¢ncia e a inst√¢ncia n√£o pode enviar mensagens para eles.\n","tags":["Bloqueios"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do WhatsApp no formato internacional (ex. 5511999999999)","example":"5511999999999"},"block":{"type":"boolean","description":"True para bloquear, False para desbloquear","example":true}},"required":["number","block"]}}}},"responses":{"200":{"description":"Opera√ß√£o realizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Blocked successfully"},"blockList":{"type":"array","description":"Lista atualizada de contatos bloqueados","items":{"type":"string"},"example":["5511999999999@s.whatsapp.net","5511888888888@s.whatsapp.net"]}}}}}},"401":{"description":"N√£o autorizado - token inv√°lido"},"404":{"description":"Contato n√£o encontrado"},"500":{"description":"Erro do servidor ao processar a requisi√ß√£o"}}}},"/chat/blocklist":{"get":{"operationId":"getBlocklist","summary":"Lista contatos bloqueados","description":"Retorna a lista completa de contatos que foram bloqueados pela inst√¢ncia.\nEsta lista √© atualizada em tempo real conforme contatos s√£o bloqueados/desbloqueados.\n","tags":["Bloqueios"],"responses":{"200":{"description":"Lista de contatos bloqueados recuperada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"blockList":{"type":"array","items":{"type":"string","description":"JIDs dos contatos bloqueados no formato \"n√∫mero@s.whatsapp.net\""},"example":["5511999999999@s.whatsapp.net","5511888888888@s.whatsapp.net"]}}}}}},"401":{"description":"Token inv√°lido ou n√£o fornecido"},"500":{"description":"Erro interno do servidor ou inst√¢ncia n√£o conectada"}}}},"/chat/labels":{"post":{"operationId":"setChatLabels","summary":"Gerencia labels de um chat","description":"Atualiza as labels associadas a um chat espec√≠fico. Este endpoint oferece tr√™s modos de opera√ß√£o:\n\n1. **Definir todas as labels** (labelids): Define o conjunto completo de labels para o chat, substituindo labels existentes\n2. **Adicionar uma label** (add_labelid): Adiciona uma √∫nica label ao chat sem afetar as existentes\n3. **Remover uma label** (remove_labelid): Remove uma √∫nica label do chat sem afetar as outras\n\n**Importante**: Use apenas um dos tr√™s par√¢metros por requisi√ß√£o. Labels inexistentes ser√£o rejeitadas.\n\nAs labels devem ser fornecidas no formato id ou labelid encontradas na fun√ß√£o get labels.\n","tags":["Etiquetas"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do chat ou grupo","example":"5511999999999"},"labelids":{"type":"array","items":{"type":"string"},"description":"Lista de IDs das labels a serem aplicadas ao chat (define todas as labels)","example":["10","20"]},"add_labelid":{"type":"string","description":"ID da label a ser adicionada ao chat","example":"10"},"remove_labelid":{"type":"string","description":"ID da label a ser removida do chat","example":"20"}},"required":["number"],"oneOf":[{"required":["labelids"]},{"required":["add_labelid"]},{"required":["remove_labelid"]}]},"examples":{"definir_todas_labels":{"summary":"Definir todas as labels do chat","description":"Define o conjunto completo de labels, substituindo as existentes","value":{"number":"5511999999999","labelids":["10","20","30"]}},"adicionar_label":{"summary":"Adicionar uma label ao chat","description":"Adiciona uma √∫nica label sem afetar as existentes","value":{"number":"5511999999999","add_labelid":"10"}},"remover_label":{"summary":"Remover uma label do chat","description":"Remove uma √∫nica label sem afetar as outras","value":{"number":"5511999999999","remove_labelid":"20"}}}}}},"responses":{"200":{"description":"Labels atualizadas com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de confirma√ß√£o"},"editions":{"type":"array","items":{"type":"string"},"description":"Lista de opera√ß√µes realizadas (apenas para opera√ß√£o labelids)"}}},"examples":{"definir_todas_labels":{"summary":"Resposta para definir todas as labels","value":{"response":"Labels updated successfully","editions":["Added label 10 to chat","Added label 20 to chat","Removed label 5 from chat"]}},"adicionar_label":{"summary":"Resposta para adicionar uma label","value":{"response":"Label added to chat"}},"remover_label":{"summary":"Resposta para remover uma label","value":{"response":"Label removed from chat"}}}}}},"400":{"description":"Erro na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Use only one operation: labelids, add_labelid, or remove_labelid"}}}}}},"404":{"description":"Chat n√£o encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Chat not found"}}}}}}}}},"/chat/delete":{"post":{"operationId":"deleteChat","summary":"Deleta chat","description":"Deleta um chat e/ou suas mensagens do WhatsApp e/ou banco de dados. \nVoc√™ pode escolher deletar:\n- Apenas do WhatsApp\n- Apenas do banco de dados\n- Apenas as mensagens do banco de dados\n- Qualquer combina√ß√£o das op√ß√µes acima\n","tags":["Chats"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do chat no formato internacional.\nPara grupos use o ID completo do grupo.\n","example":"5511999999999"},"deleteChatDB":{"type":"boolean","description":"Se true, deleta o chat do banco de dados","default":false,"example":true},"deleteMessagesDB":{"type":"boolean","description":"Se true, deleta todas as mensagens do chat do banco de dados","default":false,"example":true},"deleteChatWhatsApp":{"type":"boolean","description":"Se true, deleta o chat do WhatsApp","default":false,"example":true}},"required":["number"]}}}},"responses":{"200":{"description":"Opera√ß√£o realizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de sucesso","example":"Chat deletion process completed"},"actions":{"type":"array","description":"Lista de a√ß√µes realizadas","items":{"type":"string"},"example":["Chat deleted from WhatsApp","Chat deleted from database","Messages associated with chat deleted from database: 42"]},"errors":{"type":"array","description":"Lista de erros ocorridos, se houver","items":{"type":"string"},"example":["Error deleting chat from WhatsApp: connection timeout"]}}}}}},"400":{"description":"Erro nos par√¢metros da requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing number in payload"}}}}}},"401":{"description":"Token inv√°lido ou n√£o fornecido"},"404":{"description":"Chat n√£o encontrado"},"500":{"description":"Erro interno do servidor"}}}},"/chat/archive":{"post":{"operationId":"archiveChat","summary":"Arquivar/desarquivar chat","description":"Altera o estado de arquivamento de um chat do WhatsApp.\n- Quando arquivado, o chat √© movido para a se√ß√£o de arquivados no WhatsApp\n- A a√ß√£o √© sincronizada entre todos os dispositivos conectados\n- N√£o afeta as mensagens ou o conte√∫do do chat\n","tags":["Chats"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["number","archive"],"properties":{"number":{"type":"string","description":"N√∫mero do telefone (formato E.164) ou ID do grupo","example":"5511999999999"},"archive":{"type":"boolean","description":"true para arquivar, false para desarquivar","example":true}}}}}},"responses":{"200":{"description":"Chat arquivado/desarquivado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Chat updated successfully"}}}}}},"400":{"description":"Dados da requisi√ß√£o inv√°lidos","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid phone number format"}}}}}},"401":{"description":"Token de autentica√ß√£o ausente ou inv√°lido"},"500":{"description":"Erro ao executar a opera√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Error archiving chat"}}}}}}}}},"/chat/read":{"post":{"operationId":"markChatRead","summary":"Marcar chat como lido/n√£o lido","description":"Atualiza o status de leitura de um chat no WhatsApp.\n\nQuando um chat √© marcado como lido:\n- O contador de mensagens n√£o lidas √© zerado\n- O indicador visual de mensagens n√£o lidas √© removido\n- O remetente recebe confirma√ß√£o de leitura (se ativado)\n\nQuando marcado como n√£o lido:\n- O chat aparece como pendente de leitura\n- N√£o afeta as confirma√ß√µes de leitura j√° enviadas\n","tags":["Chats"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["number","read"],"properties":{"number":{"type":"string","description":"Identificador do chat no formato:\n- Para usu√°rios: [n√∫mero]@s.whatsapp.net (ex: 5511999999999@s.whatsapp.net)\n- Para grupos: [id-grupo]@g.us (ex: 123456789-987654321@g.us)\n","example":"5511999999999@s.whatsapp.net"},"read":{"type":"boolean","description":"- true: marca o chat como lido\n- false: marca o chat como n√£o lido\n"}}}}}},"responses":{"200":{"description":"Status de leitura atualizado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Chat read status updated successfully"}}}}}},"401":{"description":"Token de autentica√ß√£o ausente ou inv√°lido"},"404":{"description":"Chat n√£o encontrado"},"500":{"description":"Erro ao atualizar status de leitura"}}}},"/chat/mute":{"post":{"operationId":"muteChat","summary":"Silenciar chat","description":"Silencia notifica√ß√µes de um chat por um per√≠odo espec√≠fico. \nAs op√ß√µes de silenciamento s√£o:\n* 0 - Remove o silenciamento\n* 8 - Silencia por 8 horas\n* 168 - Silencia por 1 semana (168 horas)\n* -1 - Silencia permanentemente\n","tags":["Chats"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["number","muteEndTime"],"properties":{"number":{"type":"string","description":"ID do chat no formato 123456789@s.whatsapp.net ou 123456789-123456@g.us","example":"5511999999999@s.whatsapp.net"},"muteEndTime":{"type":"integer","description":"Dura√ß√£o do silenciamento:\n* 0 = Remove silenciamento\n* 8 = Silencia por 8 horas\n* 168 = Silencia por 1 semana\n* -1 = Silencia permanentemente\n","enum":[0,8,168,-1],"example":8}}}}}},"responses":{"200":{"description":"Chat silenciado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Chat mute settings updated successfully"}}}}}},"400":{"description":"Dura√ß√£o inv√°lida ou formato de n√∫mero incorreto"},"401":{"description":"Token inv√°lido ou ausente"},"404":{"description":"Chat n√£o encontrado"}}}},"/chat/pin":{"post":{"operationId":"pinChat","summary":"Fixar/desafixar chat","description":"Fixa ou desafixa um chat no topo da lista de conversas. Chats fixados permanecem \nno topo mesmo quando novas mensagens s√£o recebidas em outros chats.\n","tags":["Chats"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do chat no formato internacional completo (ex: \"5511999999999\") \nou ID do grupo (ex: \"123456789-123456@g.us\")\n","example":"5511999999999"},"pin":{"type":"boolean","description":"Define se o chat deve ser fixado (true) ou desafixado (false)\n","example":true}},"required":["number","pin"]}}}},"responses":{"200":{"description":"Chat fixado/desafixado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Chat pinned"}}}}}},"400":{"description":"Erro na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro","example":"Could not parse phone"}}}}}},"401":{"description":"N√£o autorizado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"Invalid token"}}}}}}}}},"/chat/find":{"post":{"operationId":"findChats","summary":"Busca chats com filtros","description":"Busca chats com diversos filtros e ordena√ß√£o. Suporta filtros em todos os campos do chat, \npagina√ß√£o e ordena√ß√£o customizada.\n\nOperadores de filtro:\n- `~` : LIKE (cont√©m)\n- `!~` : NOT LIKE (n√£o cont√©m)\n- `!=` : diferente\n- `>=` : maior ou igual\n- `>` : maior que\n- `<=` : menor ou igual\n- `<` : menor que\n- Sem operador: LIKE (cont√©m)\n","tags":["Chats"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"operator":{"type":"string","enum":["AND","OR"],"default":"AND","description":"Operador l√≥gico entre os filtros"},"sort":{"type":"string","description":"Campo para ordena√ß√£o (+/-campo). Ex -wa_lastMsgTimestamp"},"limit":{"type":"integer","description":"Quantidade m√°xima de resultados a retornar","default":20},"offset":{"type":"integer","description":"N√∫mero de registros a pular (para pagina√ß√£o)","default":0},"wa_fastid":{"type":"string"},"wa_chatid":{"type":"string"},"wa_archived":{"type":"boolean"},"wa_contactName":{"type":"string"},"wa_name":{"type":"string"},"name":{"type":"string"},"wa_isBlocked":{"type":"boolean"},"wa_isGroup":{"type":"boolean"},"wa_isGroup_admin":{"type":"boolean"},"wa_isGroup_announce":{"type":"boolean"},"wa_isGroup_member":{"type":"boolean"},"wa_isPinned":{"type":"boolean"},"wa_label":{"type":"string"},"lead_tags":{"type":"string"},"lead_isTicketOpen":{"type":"boolean"},"lead_assignedAttendant_id":{"type":"string"},"lead_status":{"type":"string"}},"example":{"operator":"AND","sort":"-wa_lastMsgTimestamp","limit":50,"offset":0,"wa_isGroup":true,"lead_status":"~novo","wa_label":"~importante"}}}}},"responses":{"200":{"description":"Lista de chats encontrados","content":{"application/json":{"schema":{"type":"object","properties":{"chats":{"type":"array","items":{"$ref":"../schemas/chat.yaml#/Chat"}},"totalChatsStats":{"type":"object","description":"Contadores totais de chats"},"pagination":{"type":"object","properties":{"totalRecords":{"type":"integer","description":"Total de registros encontrados"},"currentPage":{"type":"integer","description":"P√°gina atual (calculada a partir do offset)"},"totalPages":{"type":"integer","description":"Total de p√°ginas dispon√≠veis"},"pageSize":{"type":"integer","description":"Tamanho da p√°gina (igual ao limit)"},"hasNextPage":{"type":"boolean","description":"Se h√° pr√≥xima p√°gina"},"hasPreviousPage":{"type":"boolean","description":"Se h√° p√°gina anterior"}}}}}}}}}}},"/chat/editLead":{"post":{"operationId":"editLead","summary":"Edita informa√ß√µes de lead","description":"Atualiza as informa√ß√µes de lead associadas a um chat. Permite modificar status do ticket, \natribui√ß√£o de atendente, posi√ß√£o no kanban, tags e outros campos customizados.\n\nAs altera√ß√µes s√£o refletidas imediatamente no banco de dados e disparam eventos webhook/SSE\npara manter a aplica√ß√£o sincronizada.\n","tags":["CRM"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Identificador do chat. Pode ser:\n- wa_chatid (ex: \"5511999999999@s.whatsapp.net\")\n- wa_fastid (ex: \"5511888888888:5511999999999\")\n","example":"5511999999999@s.whatsapp.net"},"chatbot_disableUntil":{"type":"integer","format":"int64","description":"Timestamp UTC at√© quando o chatbot deve ficar desativado para este chat.\nUse 0 para reativar imediatamente.\n","example":1735686000},"lead_isTicketOpen":{"type":"boolean","description":"Status do ticket associado ao lead.\n- true: Ticket est√° aberto/em atendimento\n- false: Ticket est√° fechado/resolvido\n","example":true},"lead_assignedAttendant_id":{"type":"string","description":"ID do atendente atribu√≠do ao lead.\nUse string vazia (\"\") para remover a atribui√ß√£o.\n","example":"att_123456"},"lead_kanbanOrder":{"type":"integer","format":"int64","description":"Posi√ß√£o do card no quadro kanban.\nValores maiores aparecem primeiro.\n","example":1000},"lead_tags":{"type":"array","items":{"type":"string"},"description":"Lista de tags associadas ao lead.\nTags inexistentes s√£o criadas automaticamente.\nEnvie array vazio ([]) para remover todas as tags.\n","example":["vip","suporte","prioridade-alta"]},"lead_name":{"type":"string","description":"Nome principal do lead","example":"Jo√£o Silva"},"lead_fullName":{"type":"string","description":"Nome completo do lead","example":"Jo√£o Silva Pereira"},"lead_email":{"type":"string","format":"email","description":"Email do lead","example":"joao@exemplo.com"},"lead_personalid":{"type":"string","description":"Documento de identifica√ß√£o (CPF/CNPJ)\nApenas n√∫meros ou formatado\n","example":"123.456.789-00"},"lead_status":{"type":"string","description":"Status do lead no funil de vendas","example":"qualificado"},"lead_notes":{"type":"string","description":"Anota√ß√µes sobre o lead","example":"Cliente interessado em plano premium"},"lead_field01":{"type":"string","description":"Campo personalizado 1"},"lead_field02":{"type":"string","description":"Campo personalizado 2"},"lead_field03":{"type":"string","description":"Campo personalizado 3"},"lead_field04":{"type":"string","description":"Campo personalizado 4"},"lead_field05":{"type":"string","description":"Campo personalizado 5"},"lead_field06":{"type":"string","description":"Campo personalizado 6"},"lead_field07":{"type":"string","description":"Campo personalizado 7"},"lead_field08":{"type":"string","description":"Campo personalizado 8"},"lead_field09":{"type":"string","description":"Campo personalizado 9"},"lead_field10":{"type":"string","description":"Campo personalizado 10"},"lead_field11":{"type":"string","description":"Campo personalizado 11"},"lead_field12":{"type":"string","description":"Campo personalizado 12"},"lead_field13":{"type":"string","description":"Campo personalizado 13"},"lead_field14":{"type":"string","description":"Campo personalizado 14"},"lead_field15":{"type":"string","description":"Campo personalizado 15"},"lead_field16":{"type":"string","description":"Campo personalizado 16"},"lead_field17":{"type":"string","description":"Campo personalizado 17"},"lead_field18":{"type":"string","description":"Campo personalizado 18"},"lead_field19":{"type":"string","description":"Campo personalizado 19"},"lead_field20":{"type":"string","description":"Campo personalizado 20"}}}}}},"responses":{"200":{"description":"Lead atualizado com sucesso","content":{"application/json":{"schema":{"$ref":"../schemas/chat.yaml#/Chat"},"example":{"wa_fastid":"5511888888888:5511999999999","wa_chatid":"5511999999999@s.whatsapp.net","lead_name":"Jo√£o Silva","lead_status":"qualificado","lead_tags":["vip","suporte"],"lead_isTicketOpen":true,"lead_assignedAttendant_id":"att_123456"}}}},"400":{"description":"Payload inv√°lido"},"404":{"description":"Chat n√£o encontrado"},"500":{"description":"Erro interno do servidor"}}}},"/contacts":{"get":{"operationId":"checkContacts","tags":["Contatos"],"summary":"Retorna lista de contatos do WhatsApp","description":"Retorna a lista de contatos salvos na agenda do celular e que est√£o no WhatsApp.\n\nO endpoint realiza:\n- Busca todos os contatos armazenados\n- Retorna dados formatados incluindo JID e informa√ß√µes de nome\n","security":[{"token":[]}],"responses":{"200":{"description":"Lista de contatos retornada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"jid":{"type":"string","description":"ID √∫nico do contato no WhatsApp (formato: n√∫mero@s.whatsapp.net)","example":"5511999999999@s.whatsapp.net"},"contactName":{"type":"string","description":"Nome completo do contato","example":"Jo√£o Silva"},"contact_FirstName":{"type":"string","description":"Primeiro nome do contato","example":"Jo√£o"}}}}}}},"401":{"description":"Sem sess√£o ativa","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Internal server error"}}}}}}}}},"/contacts/list":{"post":{"operationId":"listContacts","tags":["Contatos"],"summary":"Listar todos os contatos com paginacao","description":"Retorna uma lista paginada de contatos da instancia do WhatsApp. \nUse este endpoint (POST) para controlar pagina, tamanho e offset via corpo da requisicao.\nA rota GET `/contacts` continua disponivel para quem prefere a lista completa sem paginacao.\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"page":{"type":"integer","description":"Numero da pagina para paginacao (padrao 1)","default":1},"pageSize":{"type":"integer","description":"Quantidade de resultados por pagina (padrao 100, maximo 1000)","default":100},"limit":{"type":"integer","description":"Alias opcional para `pageSize`"},"offset":{"type":"integer","description":"Deslocamento base zero para paginacao; se informado recalcula a pagina","default":0}}}}}},"responses":{"200":{"description":"Lista de contatos recuperada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"contacts":{"type":"array","items":{"type":"object","properties":{"jid":{"type":"string","description":"ID unico do contato no WhatsApp (formato: numero@s.whatsapp.net)","example":"5511999999999@s.whatsapp.net"},"contact_name":{"type":"string","description":"Nome completo do contato (quando salvo)","example":"Joao Silva"},"contact_FirstName":{"type":"string","description":"Primeiro nome do contato","example":"Joao"}}}},"pagination":{"type":"object","properties":{"totalRecords":{"type":"integer","description":"Total de contatos apos filtragem"},"totalDeviceContacts":{"type":"integer","description":"Total bruto de contatos no dispositivo"},"pageSize":{"type":"integer","description":"Quantidade de itens por pagina"},"currentPage":{"type":"integer","description":"Pagina atual"},"totalPages":{"type":"integer","description":"Numero total de paginas"},"hasNextPage":{"type":"boolean","description":"Indica se existe uma proxima pagina"},"hasPreviousPage":{"type":"boolean","description":"Indica se existe pagina anterior"}}}}}}}},"401":{"description":"Token nao fornecido ou invalido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"500":{"description":"Erro interno do servidor ao recuperar contatos","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/contact/add":{"post":{"operationId":"addContact","tags":["Contatos"],"summary":"Adiciona um contato √† agenda","description":"Adiciona um novo contato √† agenda do celular.\n\nO endpoint realiza:\n- Adiciona o contato √† agenda usando o WhatsApp\n- Usa o campo 'name' tanto para o nome completo quanto para o primeiro nome\n- Salva as informa√ß√µes do contato na agenda do WhatsApp\n- Retorna informa√ß√µes do contato adicionado\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["phone","name"],"properties":{"phone":{"type":"string","description":"N√∫mero de telefone no formato internacional com c√≥digo do pa√≠s obrigat√≥rio. \nPara Brasil, deve come√ßar com 55. Aceita varia√ß√µes com/sem s√≠mbolo +, \ncom/sem par√™nteses, com/sem h√≠fen e com/sem espa√ßos. Tamb√©m aceita formato \nJID do WhatsApp (@s.whatsapp.net). N√£o aceita contatos comerciais (@lid) \nnem grupos (@g.us).\n","examples":["+55 (21) 99999-9999","+55 21 99999-9999","+55 21 999999999","+5521999999999","5521999999999","5521999999999@s.whatsapp.net"]},"name":{"type":"string","description":"Nome completo do contato (ser√° usado como primeiro nome e nome completo)","example":"Jo√£o Silva"}}}}}},"responses":{"200":{"description":"Contato adicionado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Contato adicionado com sucesso"},"contact":{"type":"object","properties":{"jid":{"type":"string","description":"ID √∫nico do contato no WhatsApp (formato: n√∫mero@s.whatsapp.net)","example":"5511999999999@s.whatsapp.net"},"name":{"type":"string","description":"Nome completo do contato","example":"Jo√£o Silva"},"phone":{"type":"string","description":"N√∫mero de telefone","example":"5511999999999"}}}}}}}},"400":{"description":"Dados inv√°lidos na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"N√∫mero de telefone inv√°lido"}}}}}},"401":{"description":"Sem sess√£o ativa","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Erro ao adicionar contato"}}}}}}}}},"/contact/remove":{"post":{"operationId":"removeContact","tags":["Contatos"],"summary":"Remove um contato da agenda","description":"Remove um contato da agenda do celular.\n\nO endpoint realiza:\n- Remove o contato da agenda usando o WhatsApp AppState\n- Atualiza a lista de contatos sincronizada\n- Retorna confirma√ß√£o da remo√ß√£o\n","security":[{"token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["phone"],"properties":{"phone":{"type":"string","description":"N√∫mero de telefone no formato internacional com c√≥digo do pa√≠s obrigat√≥rio. \nPara Brasil, deve come√ßar com 55. Aceita varia√ß√µes com/sem s√≠mbolo +, \ncom/sem par√™nteses, com/sem h√≠fen e com/sem espa√ßos. Tamb√©m aceita formato \nJID do WhatsApp (@s.whatsapp.net). N√£o aceita contatos comerciais (@lid) \nnem grupos (@g.us).\n","examples":["+55 (21) 99999-9999","+55 21 99999-9999","+55 21 999999999","+5521999999999","5521999999999","5521999999999@s.whatsapp.net"]}}}}}},"responses":{"200":{"description":"Contato removido com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Contato removido com sucesso"},"removed_contact":{"type":"object","properties":{"jid":{"type":"string","description":"ID √∫nico do contato no WhatsApp (formato: n√∫mero@s.whatsapp.net)","example":"5511999999999@s.whatsapp.net"},"phone":{"type":"string","description":"N√∫mero de telefone removido","example":"5511999999999"}}}}}}}},"400":{"description":"Dados inv√°lidos na requisi√ß√£o","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"N√∫mero de telefone inv√°lido"}}}}}},"401":{"description":"Sem sess√£o ativa","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}},"404":{"description":"Contato n√£o encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Contato n√£o encontrado na agenda"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Erro ao remover contato"}}}}}}}}},"/chat/details":{"post":{"operationId":"getChatDetails","tags":["Contatos"],"summary":"Obter Detalhes Completos","description":"Retorna informa√ß√µes **completas** sobre um contato ou chat, incluindo **todos os campos dispon√≠veis** do modelo Chat.\n\n### Funcionalidades:\n- **Retorna chat completo**: Todos os campos do modelo Chat (mais de 60 campos)\n- **Busca informa√ß√µes para contatos individuais e grupos**\n- **URLs de imagem em dois tamanhos**: preview (menor) ou full (original)\n- **Combina informa√ß√µes de diferentes fontes**: WhatsApp, contatos salvos, leads\n- **Atualiza automaticamente dados desatualizados** no banco\n\n### Campos Retornados:\n- **Informa√ß√µes b√°sicas**: id, wa_fastid, wa_chatid, owner, name, phone\n- **Dados do WhatsApp**: wa_name, wa_contactName, wa_archived, wa_isBlocked, etc.\n- **Dados de lead/CRM**: lead_name, lead_email, lead_status, lead_field01-20, etc.\n- **Informa√ß√µes de grupo**: wa_isGroup, wa_isGroup_admin, wa_isGroup_announce, etc.\n- **Chatbot**: chatbot_summary, chatbot_lastTrigger_id, chatbot_disableUntil, etc.\n- **Configura√ß√µes**: wa_muteEndTime, wa_isPinned, wa_unreadCount, etc.\n\n**Comportamento**:\n- Para contatos individuais:\n  - Busca nome verificado do WhatsApp\n  - Verifica nome salvo nos contatos\n  - Formata n√∫mero internacional\n  - Calcula grupos em comum\n- Para grupos:\n  - Busca nome do grupo\n  - Verifica status de comunidade\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do telefone ou ID do grupo","example":"5511999999999"},"preview":{"type":"boolean","description":"Controla o tamanho da imagem de perfil retornada:\n- `true`: Retorna imagem em tamanho preview (menor, otimizada para listagens)\n- `false` (padr√£o): Retorna imagem em tamanho full (resolu√ß√£o original, maior qualidade)\n","default":false}},"required":["number"]}}}},"responses":{"200":{"description":"Informa√ß√µes completas do chat retornadas com sucesso","content":{"application/json":{"schema":{"allOf":[{"$ref":"../schemas/chat.yaml#/Chat"},{"type":"object","properties":{"common_groups":{"type":"string","description":"Grupos em comum separados por v√≠rgula, formato: nome_grupo(id_grupo)","example":"Grupo Fam√≠lia(120363123456789012@g.us),Trabalho(987654321098765432@g.us)"},"imagePreview":{"type":"string","description":"URL da imagem de perfil em tamanho preview (menor) - apenas se preview=true"},"image":{"type":"string","description":"URL da imagem de perfil em tamanho full (resolu√ß√£o original) - apenas se preview=false"}}}]},"examples":{"contact_example":{"summary":"Contato individual","description":"Exemplo de resposta para um contato individual","value":{"id":"r1a2b3c4d5e6f7","wa_fastid":"admin:5511999999999","wa_chatid":"5511999999999@s.whatsapp.net","wa_name":"Jo√£o Silva","name":"Jo√£o Silva","phone":"+55 11 99999-9999","owner":"admin","wa_archived":false,"wa_isBlocked":false,"wa_isGroup":false,"lead_name":"Jo√£o","lead_fullName":"Jo√£o Silva","lead_email":"joao@exemplo.com","lead_status":"ativo","wa_contactName":"Jo√£o Silva","common_groups":"Grupo Fam√≠lia(120363123456789012@g.us),Trabalho(987654321098765432@g.us)","image":"https://pps.whatsapp.net/v/t61.24694-24/12345_image.jpg"}},"group_example":{"summary":"Grupo","description":"Exemplo de resposta para um grupo","value":{"id":"r9z8y7x6w5v4u3","wa_fastid":"admin:120363123456789012@g.us","wa_chatid":"120363123456789012@g.us","wa_name":"Grupo Fam√≠lia","name":"Grupo Fam√≠lia","phone":"","owner":"admin","wa_archived":false,"wa_isBlocked":false,"wa_isGroup":true,"wa_isGroup_admin":true,"wa_isGroup_announce":false,"wa_isGroup_community":false,"wa_isGroup_member":true,"image":"https://pps.whatsapp.net/v/t61.24694-24/67890_group.jpg"}}}}}},"400":{"description":"Payload inv√°lido ou n√∫mero inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid request payload"}}}}}},"401":{"description":"Token n√£o fornecido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Unauthorized"}}}}}},"500":{"description":"Erro interno do servidor ou sess√£o n√£o iniciada","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No session"}}}}}}}}},"/chat/check":{"post":{"operationId":"checkChat","tags":["Contatos"],"summary":"Verificar N√∫meros no WhatsApp","description":"Verifica se n√∫meros fornecidos est√£o registrados no WhatsApp e retorna informa√ß√µes detalhadas.\n\n### Funcionalidades:\n- Verifica m√∫ltiplos n√∫meros simultaneamente\n- Suporta n√∫meros individuais e IDs de grupo\n- Retorna nome verificado quando dispon√≠vel\n- Identifica grupos e comunidades\n- Verifica subgrupos de comunidades\n\n**Comportamento espec√≠fico**:\n- Para n√∫meros individuais:\n  - Verifica registro no WhatsApp\n  - Retorna nome verificado se dispon√≠vel\n  - Normaliza formato do n√∫mero\n- Para grupos:\n  - Verifica exist√™ncia\n  - Retorna nome do grupo\n  - Retorna id do grupo de an√∫ncios se buscado por id de comunidade\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"numbers":{"type":"array","items":{"type":"string"},"description":"Lista de n√∫meros ou IDs de grupo para verificar","example":["5511999999999","123456789@g.us"]}}}}}},"responses":{"200":{"description":"Resultado da verifica√ß√£o","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"query":{"type":"string","description":"N√∫mero/ID original consultado"},"jid":{"type":"string","description":"JID do WhatsApp"},"lid":{"type":"string","description":"LID do WhatsApp"},"isInWhatsapp":{"type":"boolean","description":"Indica se est√° no WhatsApp"},"verifiedName":{"type":"string","description":"Nome verificado se dispon√≠vel"},"groupName":{"type":"string","description":"Nome do grupo se aplic√°vel"},"error":{"type":"string","description":"Mensagem de erro se houver"}}}}}}},"400":{"description":"Payload inv√°lido ou sem n√∫meros","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Missing numbers in payload"}}}}}},"401":{"description":"Sem sess√£o ativa","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No active session"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"WhatsApp client is not connected"}}}}}}}}},"/label/edit":{"post":{"operationId":"editLabel","tags":["Etiquetas"],"summary":"Editar etiqueta","description":"Edita uma etiqueta existente na inst√¢ncia.\nPermite alterar nome, cor ou deletar a etiqueta.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"labelid":{"type":"string","description":"ID da etiqueta a ser editada","example":"25"},"name":{"type":"string","description":"Novo nome da etiqueta","example":"responder editado"},"color":{"type":"integer","description":"C√≥digo num√©rico da nova cor (0-19)","minimum":0,"maximum":19,"example":2},"delete":{"type":"boolean","description":"Indica se a etiqueta deve ser deletada","example":false}},"required":["labelid"]}}}},"responses":{"200":{"description":"Etiqueta editada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","example":"Label edited"}}}}}},"400":{"description":"Payload inv√°lido","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"invalid payload"}}}}}},"500":{"description":"Erro interno do servidor ou sess√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"error editing label"}}}}}}}}},"/labels":{"get":{"operationId":"listLabels","tags":["Etiquetas"],"summary":"Buscar todas as etiquetas","description":"Retorna a lista completa de etiquetas da inst√¢ncia.\n","responses":{"200":{"description":"Lista de etiquetas retornada com sucesso","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/label.yaml#/Label"}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to fetch labels from database"}}}}}}}}},"/quickreply/edit":{"post":{"operationId":"editQuickReply","tags":["Respostas R√°pidas"],"summary":"Criar, atualizar ou excluir resposta r√°pida","description":"Gerencia templates de respostas r√°pidas para agilizar o atendimento. Suporta mensagens de texto e m√≠dia.\n\n- Para criar: n√£o inclua o campo `id`\n- Para atualizar: inclua o `id` existente\n- Para excluir: defina `delete: true` e inclua o `id`\n\nObserva√ß√£o: Templates originados do WhatsApp (onWhatsApp=true) n√£o podem ser modificados ou exclu√≠dos.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["shortCut","type"],"properties":{"id":{"type":"string","description":"Necess√°rio para atualiza√ß√µes/exclus√µes, omitir para cria√ß√£o","example":"rb9da9c03637452"},"delete":{"type":"boolean","description":"Definir como true para excluir o template","default":false},"shortCut":{"type":"string","description":"Atalho para acesso r√°pido ao template","example":"saudacao1"},"type":{"type":"string","enum":["text","audio","myaudio","ptt","document","video","image"],"description":"Tipo da mensagem"},"text":{"type":"string","description":"Obrigat√≥rio para mensagens do tipo texto","example":"Ol√°! Como posso ajudar hoje?"},"file":{"type":"string","description":"URL ou Base64 para tipos de m√≠dia","example":"https://exemplo.com/arquivo.pdf"},"docName":{"type":"string","description":"Nome do arquivo opcional para tipo documento","example":"apresentacao.pdf"}}}}}},"responses":{"200":{"description":"Opera√ß√£o conclu√≠da com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opera√ß√£o conclu√≠da com sucesso"},"quickReplies":{"type":"array","items":{"$ref":"../schemas/quick_reply.yaml#/QuickReply"}}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida (erro de valida√ß√£o)"},"403":{"description":"N√£o √© poss√≠vel modificar template originado do WhatsApp"},"404":{"description":"Template n√£o encontrado"},"500":{"description":"Erro no servidor"}}}},"/quickreply/showall":{"get":{"operationId":"listQuickReplies","tags":["Respostas R√°pidas"],"summary":"Listar todas as respostas r√°pidas","description":"Retorna todas as respostas r√°pidas cadastradas para a inst√¢ncia autenticada","responses":{"200":{"description":"Lista de respostas r√°pidas","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"../schemas/quick_reply.yaml#/QuickReply"}}}}},"500":{"description":"Erro no servidor"}}}},"/call/make":{"post":{"operationId":"makeCall","tags":["Chamadas"],"summary":"Iniciar chamada de voz","description":"Inicia uma chamada de voz para um contato espec√≠fico. Este endpoint permite:\n1. Iniciar chamadas de voz para contatos\n2. Funciona apenas com n√∫meros v√°lidos do WhatsApp\n3. O contato receber√° uma chamada de voz\n\n**Nota**: O telefone do contato tocar√° normalmente, mas ao contato atender, ele n√£o ouvir√° nada, e voc√™ tamb√©m n√£o ouvir√° nada. \nEste endpoint apenas inicia a chamada, n√£o estabelece uma comunica√ß√£o de voz real.\n\nExemplo de requisi√ß√£o:\n```json\n{\n  \"number\": \"5511999999999\"\n}\n```\n\nExemplo de resposta:\n```json\n{\n  \"response\": \"Call successful\"\n}\n```\n\nErros comuns:\n- 401: Token inv√°lido ou expirado\n- 400: N√∫mero inv√°lido ou ausente\n- 500: Erro ao iniciar chamada\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"N√∫mero do contato no formato internacional (ex: 5511999999999)","example":"5511999999999"}},"required":["number"]}}}},"responses":{"200":{"description":"Chamada iniciada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Call successful"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro"}}},"examples":{"missing_number":{"summary":"Numero nao informado","value":{"error":"missing number in payload"}},"invalid_number":{"summary":"Numero invalido","value":{"error":"invalid number JID"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro interno","example":"error making call: network timeout"}}}}}}}}},"/call/reject":{"post":{"operationId":"rejectCall","tags":["Chamadas"],"summary":"Rejeitar chamada recebida","description":"Rejeita uma chamada recebida do WhatsApp.\n\nO body pode ser enviado vazio `{}`. Os campos `number` e `id` s√£o opcionais e podem ser usados para especificar uma chamada espec√≠fica.\n\nExemplo de requisi√ß√£o (recomendado):\n```json\n{}\n```\n\nExemplo de requisi√ß√£o com campos opcionais:\n```json\n{\n  \"number\": \"5511999999999\",\n  \"id\": \"ABEiGmo8oqkAcAKrBYQAAAAA_1\"\n}\n```\n\nExemplo de resposta:\n```json\n{\n  \"response\": \"Call rejected\"\n}\n```\n\nErros comuns:\n- 401: Token inv√°lido ou expirado\n- 400: N√∫mero inv√°lido\n- 500: Erro ao rejeitar chamada\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","example":{},"properties":{"number":{"type":"string","description":"(Opcional) N√∫mero do contato no formato internacional (ex: 5511999999999)"},"id":{"type":"string","description":"(Opcional) ID √∫nico da chamada a ser rejeitada"}}}}}},"responses":{"200":{"description":"Chamada rejeitada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Call rejected"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro","examples":["invalid number"]}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Descri√ß√£o do erro interno","example":"error rejecting call: timeout"}}}}}}}}},"/chatwoot/config":{"get":{"operationId":"getChatwootConfig","tags":["Integra√ß√£o Chatwoot"],"summary":"Obter configura√ß√£o do Chatwoot","description":"Retorna a configura√ß√£o atual da integra√ß√£o com Chatwoot para a inst√¢ncia.\n\n### Funcionalidades:\n- Retorna todas as configura√ß√µes do Chatwoot incluindo credenciais\n- Mostra status de habilita√ß√£o da integra√ß√£o\n- √ötil para verificar configura√ß√µes atuais antes de fazer altera√ß√µes\n","responses":{"200":{"description":"Configura√ß√£o obtida com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"chatwoot_enabled":{"type":"boolean","description":"Se a integra√ß√£o com Chatwoot est√° habilitada","example":true},"chatwoot_url":{"type":"string","description":"URL base da inst√¢ncia Chatwoot","example":"https://app.chatwoot.com"},"chatwoot_account_id":{"type":"integer","format":"int64","description":"ID da conta no Chatwoot","example":1},"chatwoot_inbox_id":{"type":"integer","format":"int64","description":"ID da inbox no Chatwoot","example":5},"chatwoot_access_token":{"type":"string","description":"Token de acesso da API Chatwoot","example":"pXXGHHHyJPYHYgWHJHYHgJjj"},"chatwoot_ignore_groups":{"type":"boolean","description":"Se deve ignorar mensagens de grupos na sincroniza√ß√£o","example":false},"chatwoot_sign_messages":{"type":"boolean","description":"Se deve assinar mensagens enviadas para o WhatsApp","example":true},"chatwoot_create_new_conversation":{"type":"boolean","description":"Sempre criar nova conversa ao inv√©s de reutilizar conversas existentes","example":false}}}}}},"401":{"description":"Token inv√°lido/expirado"},"500":{"description":"Erro interno do servidor"}}},"put":{"operationId":"updateChatwootConfig","tags":["Integra√ß√£o Chatwoot"],"summary":"Atualizar configura√ß√£o do Chatwoot","description":"Atualiza a configura√ß√£o da integra√ß√£o com Chatwoot para a inst√¢ncia.\n\n### Funcionalidades:\n- Configura todos os par√¢metros da integra√ß√£o Chatwoot\n- Reinicializa automaticamente o cliente Chatwoot quando habilitado\n- Retorna URL do webhook para configurar no Chatwoot\n- Sincroniza√ß√£o bidirecional de mensagens novas entre WhatsApp e Chatwoot\n- Sincroniza√ß√£o autom√°tica de contatos (nome e telefone)\n- Atualiza√ß√£o autom√°tica LID ‚Üí PN (Local ID para Phone Number)\n- Sistema de nomes inteligentes com til (~)\n\n### Configura√ß√£o no Chatwoot:\n1. Ap√≥s configurar via API, use a URL retornada no webhook settings da inbox no Chatwoot\n2. Configure como webhook URL na sua inbox do Chatwoot\n3. A integra√ß√£o ficar√° ativa e sincronizar√° mensagens e contatos automaticamente\n\n### üè∑Ô∏è Sistema de Nomes Inteligentes:\n- **Nomes com til (~)**: S√£o atualizados automaticamente quando o contato modifica seu nome no WhatsApp\n- **Nomes espec√≠ficos**: Para definir um nome fixo, remova o til (~) do nome no Chatwoot\n- **Exemplo**: \"~Jo√£o Silva\" ser√° atualizado automaticamente, \"Jo√£o Silva\" (sem til) permanecer√° fixo\n- **Atualiza√ß√£o LID‚ÜíPN**: Contatos migram automaticamente de Local ID para Phone Number quando dispon√≠vel\n- **Sem duplica√ß√£o**: Durante a migra√ß√£o LID‚ÜíPN, n√£o haver√° duplica√ß√£o de conversas\n- **Respostas nativas**: Todas as respostas dos agentes aparecem nativamente no Chatwoot\n\n### üöß AVISO IMPORTANTE - INTEGRA√á√ÉO BETA:\n- **Fase Beta**: Esta integra√ß√£o est√° em fase de desenvolvimento e testes\n- **Uso por conta e risco**: O usu√°rio assume total responsabilidade pelo uso\n- **Recomenda√ß√£o**: Teste em ambiente n√£o-produtivo antes de usar em produ√ß√£o\n- **Suporte limitado**: Funcionalidades podem mudar sem aviso pr√©vio\n\n### ‚ö†Ô∏è Limita√ß√µes Conhecidas:\n- **Sincroniza√ß√£o de hist√≥rico**: N√£o implementada - apenas mensagens novas s√£o sincronizadas\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"enabled":{"type":"boolean","description":"Habilitar/desabilitar integra√ß√£o com Chatwoot","example":true},"url":{"type":"string","description":"URL base da inst√¢ncia Chatwoot (sem barra final)","example":"https://app.chatwoot.com"},"access_token":{"type":"string","description":"Token de acesso da API Chatwoot (obtido em Profile Settings > Access Token)","example":"pXXGHHHyJPYHYgWHJHYHgJjj"},"account_id":{"type":"integer","format":"int64","description":"ID da conta no Chatwoot (vis√≠vel na URL da conta)","example":1},"inbox_id":{"type":"integer","format":"int64","description":"ID da inbox no Chatwoot (obtido nas configura√ß√µes da inbox)","example":5},"ignore_groups":{"type":"boolean","description":"Ignorar mensagens de grupos do WhatsApp na sincroniza√ß√£o","example":false},"sign_messages":{"type":"boolean","description":"Assinar mensagens enviadas para WhatsApp com identifica√ß√£o do agente","example":true},"create_new_conversation":{"type":"boolean","description":"Sempre criar nova conversa ao inv√©s de reutilizar conversas existentes","example":false}},"required":["enabled","url","access_token","account_id","inbox_id"]}}}},"responses":{"200":{"description":"Configura√ß√£o atualizada com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem de confirma√ß√£o","example":"Chatwoot config updated successfully, put this URL in Chatwoot inbox webhook settings:"},"chatwoot_inbox_webhook_url":{"type":"string","description":"URL do webhook para configurar na inbox do Chatwoot","example":"https://sua-api.com/chatwoot/webhook/inst_abc123"}}}}}},"400":{"description":"Dados inv√°lidos no body da requisi√ß√£o"},"401":{"description":"Token inv√°lido/expirado"},"500":{"description":"Erro interno ao salvar configura√ß√£o"}}}},"/business/get/profile":{"post":{"tags":["Business"],"summary":"Obter o perfil comercial","description":"Retorna o perfil comercial da inst√¢ncia do WhatsApp.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"jid":{"type":"string","description":"JID do perfil comercial a consultar","example":"5511999999999@s.whatsapp.net"}}}}}},"responses":{"200":{"description":"Perfil comercial recuperado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"object","description":"Dados do perfil comercial","properties":{"tag":{"type":"string","description":"A tag do perfil comercial."},"description":{"type":"string","description":"A descri√ß√£o do perfil comercial."},"address":{"type":"string","description":"O endere√ßo do perfil comercial."},"email":{"type":"string","description":"O email do perfil comercial."},"websites":{"type":"array","items":{"type":"string"},"description":"Os websites do perfil comercial."},"categories":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"localized_display_name":{"type":"string"}}},"description":"As categorias do perfil comercial."}}}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de valida√ß√£o do payload ou do JID","example":"invalid payload"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor ao recuperar o perfil comercial","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/business/get/categories":{"get":{"tags":["Business"],"summary":"Obter as categorias de neg√≥cios","description":"Retorna as categorias de neg√≥cios dispon√≠veis.\n","responses":{"200":{"description":"Categorias de neg√≥cios recuperadas com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"array","description":"Lista de categorias de neg√≥cios","items":{"type":"object","properties":{"id":{"type":"string"},"localized_display_name":{"type":"string"}}}}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor ao recuperar as categorias de neg√≥cios","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/business/update/profile":{"post":{"tags":["Business"],"summary":"Atualizar o perfil comercial","description":"Atualiza os dados do perfil comercial da inst√¢ncia do WhatsApp.\nTodos os campos s√£o opcionais; apenas os enviados ser√£o atualizados.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"description":{"type":"string","description":"Nova descri√ß√£o do perfil comercial.","example":"Loja de eletr√¥nicos e acess√≥rios"},"address":{"type":"string","description":"Novo endere√ßo do perfil comercial.","example":"Rua das Flores, 123 - Centro"},"email":{"type":"string","description":"Novo email do perfil comercial.","example":"contato@empresa.com"}}},"examples":{"todos_campos":{"summary":"Atualizar todos os campos","value":{"description":"Loja de eletr√¥nicos e acess√≥rios","address":"Rua das Flores, 123 - Centro","email":"contato@empresa.com"}},"apenas_descricao":{"summary":"Atualizar apenas a descri√ß√£o","value":{"description":"Nova descri√ß√£o da empresa"}},"endereco_email":{"summary":"Atualizar endere√ßo e email","value":{"address":"Av. Principal, 456","email":"novo@email.com"}}}}}},"responses":{"200":{"description":"Todos os campos enviados foram atualizados","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"object","description":"Resultado por campo"},"results":{"type":"object","description":"Alias de response (compatibilidade)"},"updated":{"type":"integer","description":"Total de campos atualizados","example":3},"failed":{"type":"integer","description":"Total de campos que falharam","example":0}}},"examples":{"sucesso_todos":{"summary":"Todos os campos atualizados","value":{"response":{"description":{"status":"updated"},"address":{"status":"updated"},"email":{"status":"updated"}},"updated":3,"failed":0}}}}}},"207":{"description":"Sucesso parcial ‚Äî ao menos um campo falhou","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"object","description":"Resultado por campo"},"results":{"type":"object"},"updated":{"type":"integer","example":1},"failed":{"type":"integer","example":1}}},"examples":{"parcial":{"summary":"Falha em um dos campos","value":{"response":{"description":{"status":"updated"},"address":{"status":"error","error":"upstream unavailable"}},"updated":1,"failed":1}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de valida√ß√£o"}}},"examples":{"payload_invalido":{"value":{"error":"invalid payload"}},"campo_obrigatorio":{"value":{"error":"at least one field (description, address, email) is required"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Falha total ‚Äî nenhum campo foi atualizado","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"object","description":"Resultado por campo"},"results":{"type":"object"},"updated":{"type":"integer","example":0},"failed":{"type":"integer","example":3}}}}}}}}},"/business/catalog/list":{"post":{"tags":["Business"],"summary":"Listar os produtos do cat√°logo","description":"Lista os produtos do cat√°logo da inst√¢ncia do WhatsApp.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"jid":{"type":"string","description":"JID do cat√°logo a consultar","example":"5511999999999@s.whatsapp.net"}},"required":["jid"]}}}},"responses":{"200":{"description":"Produtos do cat√°logo recuperados com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"array","description":"Lista de produtos do cat√°logo","items":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"price":{"type":"string"},"currency":{"type":"string"}}}}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de valida√ß√£o do payload ou JID","example":"invalid payload"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor ao recuperar os produtos do cat√°logo","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/business/catalog/info":{"post":{"tags":["Business"],"summary":"Obter informa√ß√µes de um produto do cat√°logo","description":"Retorna as informa√ß√µes de um produto espec√≠fico do cat√°logo.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"jid":{"type":"string","description":"JID do cat√°logo a consultar","example":"5511999999999@s.whatsapp.net"},"id":{"type":"string","description":"O ID do produto."}},"required":["jid","id"]}}}},"responses":{"200":{"description":"Informa√ß√µes do produto recuperadas com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"object","description":"Informa√ß√µes do produto","properties":{"id":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"},"price":{"type":"string"},"currency":{"type":"string"}}}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de valida√ß√£o do payload ou JID","example":"invalid payload"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor ao recuperar as informa√ß√µes do produto","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/business/catalog/delete":{"post":{"tags":["Business"],"summary":"Deletar um produto do cat√°logo","description":"Deleta um produto espec√≠fico do cat√°logo.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"O ID do produto."}},"required":["id"]}}}},"responses":{"200":{"description":"Produto deletado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de sucesso.","example":"Deleted product"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de valida√ß√£o do payload","example":"invalid payload"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor ao deletar o produto","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/business/catalog/show":{"post":{"tags":["Business"],"summary":"Mostrar um produto do cat√°logo","description":"Mostra um produto espec√≠fico do cat√°logo.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"O ID do produto."}},"required":["id"]}}}},"responses":{"200":{"description":"Produto mostrado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de sucesso.","example":"Product shown"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de valida√ß√£o do payload","example":"invalid payload"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor ao mostrar o produto","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}},"/business/catalog/hide":{"post":{"tags":["Business"],"summary":"Ocultar um produto do cat√°logo","description":"Oculta um produto espec√≠fico do cat√°logo.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"O ID do produto."}},"required":["id"]}}}},"responses":{"200":{"description":"Produto ocultado com sucesso","content":{"application/json":{"schema":{"type":"object","properties":{"response":{"type":"string","description":"Mensagem de sucesso.","example":"Product hidden"}}}}}},"400":{"description":"Requisi√ß√£o inv√°lida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de valida√ß√£o do payload","example":"invalid payload"}}}}}},"401":{"description":"Token inv√°lido ou expirado","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem de erro de autentica√ß√£o","example":"client not found"}}}}}},"500":{"description":"Erro interno do servidor ao ocultar o produto","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Mensagem detalhando o erro encontrado"}}}}}}}}}}}